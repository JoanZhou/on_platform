<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
	<meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0 minimum-scale=0.5, user-scalable=no" />
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
	<title>跑步</title>
	<link rel="stylesheet" href="/static/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="/static/css/weui.min.css" />
	<link rel="stylesheet" href="/static/css/material.min.css">
	<link rel="stylesheet" href="/static/css/jquery-weui.min.css">
	<link rel="stylesheet" href="/static/css/share.css" />
	<link rel="stylesheet" href="/static/css/activity.css" />
{#	<link rel="stylesheet" href="/static/css/running.css" />#}
    <link rel="stylesheet" href="//at.alicdn.com/t/font_591099_4u8ozc77pm0zr529.css"/>
    <link rel="stylesheet" href="/static/css/public.css">
    <style>
        html, body{
            width: 100%;
            background: #f5f6f9;
        }

        .setting-mode__background{
            width: 45vw;
            height: 5vh;
            border-radius: 5vh;
            background: #f5f7f9;
            display: flex;
            justify-content: space-between;
        }

        .setting-mode__button{
            width: 50%;
            height: 5vh;
            background: #f5f7f9;
            color: #B6C1C8;
            border-radius: 5vh;
            border-width: 0;
            -webkit-transition: background-color 0.3s;
            transition: background-color 0.3s;
        }

        .setting-mode__button:active{
            border: 0;
        }

        .weui-picker-modal{
            background: #ffffff;
        }

        .weui-picker-modal .toolbar .title{
            background: transparent;
            color: #545c64;
        }
        .weui-picker-modal .toolbar {
            background: #fefefe;
        }

        .close-picker{
            color:#1fa2ff !important;
        }

        .setting-mode__button-active{
            color: #ffffff;
            background: #1fa2ff;
        }

        .setting-item > div{
            margin-left: 0.8rem;
        }

        .setting-item__right{
            flex: 1;
        }

        #free__timeSetButton, #discipline__timeSetButton{
            padding: 0 0.5rem;
            color: #1fa2ff;;
            background: #ffffff;
            margin-right: 0;
            border: 1px solid #f5f6f9;
            width: 80px;
            height: 32px;
            margin-top: 0;
        }

        #free__statusSetButton, #discipline__statusSetButton,#discipline__avoidSetButton{
            padding: 0 0.5rem;
            color: #1fa2ff;;
            background: #ffffff;
            margin-right: 0;
            border: 1px solid #f5f6f9;
            width: 80px;
            height: 32px;
            margin-top: 0;
        }
        .fixed-panel{
            position: fixed;
            background-color: #ffffff;
            bottom: 0px;
            width: 100%;
        }

        .position-right{
            display: flex;
            flex-direction: row;
            justify-content: flex-end;
            align-items: flex-start;
            position: relative;
        }

        .fix-height{
            max-height: 300px;
            overflow-y: scroll;
        }

        .popup-open{
            overflow: hidden;
        }


        h1{
            margin: 0px;
        }

        /*新的CSS样式*/

        .mdl-slider__background-flex{
            height: 15px;
            top: 5px;
            width: 100%;
            margin: 0;
        }
        /*#2ca7ff*/
        .mdl-slider__background-upper{
            background: #efefef;
            height: 100%;
            border-radius: 15px;
        }

        .mdl-slider {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            height: 1px;
            background: 0 0;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            outline: 0;
            padding: 0;
            -webkit-align-self: center;
            -ms-flex-item-align: center;
            -ms-grid-row-align: center;
            align-self: center;
            z-index: 1;
            cursor: pointer;
            margin: 0;
            width: 100%;
        }

        input[type=range]::-webkit-slider-thumb {
            height: 12px;
            width: 44px;
            border-radius: 20px;
            border-color: #1fa2ff;
            -webkit-box-shadow: 1px 1px 3px rgba(31, 162, 255, 0.8);
            background-image: url("/static/images/activity_run_slide_icon.svg");
            -webkit-background-size: 20px;
            background-size: 20px;
            background-repeat: no-repeat;
            background-position: center;
            background-color: #1fa2ff;
            cursor: pointer;
            -webkit-appearance: none;
            margin-top: -2.5px;
        }

        .distance-slider::-moz-range-thumb {
            height: 12px;
            width: 44px;
            border-radius: 20px;
            border-color: #1fa2ff;
            background: #1fa2ff;
            cursor: pointer;
            box-shadow: 1px 1px 3px rgba(31, 162, 255, 0.8);
        }

        .distance-slider::-ms-thumb {
            height: 12px;
            width: 44px;
            border-radius: 20px;
            border-color: #1fa2ff;
            background: #1fa2ff;
            cursor: pointer;
            box-shadow: 1px 1px 3px rgba(31, 162, 255, 0.8);
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 2px;
            cursor: pointer;
            background: transparent;
            border-radius: 0px;
            border: 0px solid #010101;
        }
        input[type=range]::-moz-range-track {
            width: 100%;
            height: 2px;
            cursor: pointer;
            border-radius: 0px;
            background: transparent;
        }

        input[type=range]::-ms-track {
            width: 100%;
            height: 2px;
            cursor: pointer;
            background: transparent;
            border-color: transparent;
            color: transparent;
        }

        .setting-list{
            margin-top: 15px;
            list-style: none;
        }

        .setting-item{
            display: flex;
            flex-direction:row;
            justify-content: flex-start;
            margin-top: 8px;
        }

        .image-header{
            background: url(/static/images/index/run_tubar_1@3x.png) center / cover;
            overflow: hidden;
        }

        .running__upload-notice{
            position: absolute;
            bottom: 20px;
            color: #B6C1C8;
            left: 0;
            width: 100%;
            text-align: center;
        }

        .small-font{
            font-size: 12px;
        }

        #upload-panel .upload-card .row-center{
            margin-bottom: 20px;
        }

        #upload-btn{
            background: #1EC771;
            box-shadow: 1px 1px 6px rgba(30, 199, 113, 0.96);
        }
        #upload-btn:active{
            background: #1EC771 !important;
        }

        #upload-btn.finish {
            background: #BDBDBD;
            box-shadow: 1px 1px 6px rgba(189, 189, 189, 0.96);
        }

        #upload-btn.finish:active{
            background: #BDBDBD !important;
        }

        .news-item__tail-text{
            margin-left: 0px;
        }


        .iconfont{

        }
        .weui-btn:after{
            border: none;
        }
        .icon-shourumingxi,.icon-xinxishuoming{
            color:rgba(31,162,255,1);
        }
        .weui-btn::after{
            border: none;
        }
    </style>
    <style>
        html,body,p,*{
            margin: 0;
            padding: 0;
        }
        .patternSelection{
            margin-top: 0;
        }

        .setting-mode__background{
            {#border-radius: 5vh;#}
            width: 50vw;
            height: 1.8rem;
            position: relative;
            background-color: rgba(0,0,0,0);
            border:1px solid rgba(31,162,255,1);

        }
        .setting-mode__button-active{
            z-index: 2;
        }

        .setting-mode__button{
            width: 55%;
            height: 1.7rem;
        }
        #discipline-mode{
            position: absolute;
            right: 0vw;
            {#border:1px solid rgba(31,162,255,1);#}
        }
        #free-mode{
            position: absolute;
            left: 0vw;
            text-align: center;
            padding: 0 15px;
            {#border:1px solid rgba(31,162,255,1);#}
        }
        #discipline-panel,#free-panel{
            display: block;
            overflow: hidden;
            width: 100%;
        }
        #discipline-panel .p_1,#free-panel .p_1{
            text-align: center;
            color: rgba(31,162,255,1);
            font-size: 12px;
            line-height: 20px;
            margin:5px 10px  auto;
        }
        .setting-item{

        }
        .setting-item__right{
            margin-left: 0.2rem!important;
            margin-right: 0.6rem;
        }
        .setting-desc{
            margin: 0 0 5px;
        }
        .content_box{
            height: 2rem;
        }
        .detailed_box{
            line-height: 2rem;
        }
        .detailed_box_div,.detailed_box_div span{
            margin-left: 0.8rem;
            color: rgba(31,162,255,1);
        }
        .rule_box{
            line-height: 2rem;
        }
        .rule_box_div,.rule_box_div span{
            margin-right: 0.8rem;
            color: rgba(31,162,255,1);
            text-align: right;
        }


        .mask_on{
            position: fixed;
            z-index: 1000;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,.6);
        }
        .mask_on__1{
            position: fixed;
            z-index: 9990;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,.0);
        }
        .rule_box_text,.detailed_box_text,.qqGroupCode_box{
            position: fixed;
            z-index: 5000;
            width: 80%;
            max-width: 300px;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%,-50%);
            transform: translate(-50%,-50%);
            background-color: #fff;
            text-align: left;
            overflow: hidden;
            padding: 15px;
            font-size: 10px;
            border-radius: 10px;
            color:rgba(0,0,0,0.5)
        }
        .detailed_box__2{
            margin-top: 22px;
        }
        .detailed_box__1 p,.detailed_box__2 p{
            font-size: 9px;
        }
        .detailed_box__1,.detailed_box__2{
            width: 100%;
            border-radius: 10px;
            border: 1px solid rgba(0,171,255,1);
            background-color: rgba(246,255,250,1);
            text-align: left;
        }
        .font_color_1{
            color: rgba(10,182,247,1);
        }
        .dropdown-menu{
            min-width: 80px;
        }
        .detailed__info_moneyUp{
            text-align: center;
        }

        .block-panel{
            margin-top: 5px;
        }
        .mdl-card{
            min-height: 0;
            max-height: 250px;
            height: 190px;
        }

        .challenger_deposit{
            font-family:"Microsoft YaHei";
            background-color: white;
            width: 15px;
            text-align: center;
            color: black;
            border: 1px solid rgba(0,0,0,0.4);
            display: inline-block;
            font-size: 19px;
            position: relative;
            overflow: hidden;

        }

        .challenger_deposit_{
            font-family:"Microsoft YaHei";
            width: 15px;
            text-align: center;
            color: white;
            display: inline-block;
            font-size: 16px;
            position: relative;
            overflow: hidden;
        }
        .challenger_deposit__{
            position: absolute;
            color: white;
            width: 15px;
            font-weight:bold;
            left: 0;
            right: 0;
            bottom: 0;
            top: 0;
            line-height: 23px;
            height: 25px;
        }
        .hide{
            display: none;
        }
    </style>
</head>

<body>
	<!--页面上方的活动信息栏-->
	<div class="image-header mdl-card mdl-shadow--2dp" style="position: fixed;top: 0;z-index: 3;">
		<div class="header-title" style="display: none">跑步</div>
		<div class="header-mask"></div>
		<div class="header-desc mdl-card__supporting-text">
			<!--跑步页首-->
			<div class="row-center between">
                <div class="coloum-space" style="width: 30%">
                    <div class="header_avatar-text">
                        {{ app.active_participants }}人参与
                    </div>
                    <div class="header__avatars">
                        {% for person in persons %}
                        <img class="img-circle" src="{{ person.headimgurl }}">
                        {% endfor %}
                    <!--
                        <img class="img-circle" src="/static/fake/running_1.jpg">
                        <img class="img-circle" src="/static/fake/running_2.jpg">
                        <img class="img-circle" src="/static/fake/running_3.jpg">
                        <img class="img-circle" src="/static/fake/running_4.jpg">
                        <img class="img-circle" src="/static/fake/running_5.jpg">
                        -->
				    </div>
                </div>
				<div class="coloum-space" style="position: absolute;left: 50%;transform: translate(-50%,0%);">
                    <div class="header_avatar-text center">总系数</div>
					<div class="header__text">
                        <span style="color: #1fa2ff; font-weight: 500;">{{ app.coefficient }}</span>
                    </div>
				</div>
				<div class="coloum-space">
                    <div class="header_avatar-text center">奖金池</div>
                    <div class="header__text">
                        <span style="color: #ff931f; font-weight: 500;" id="app_bonus_all">{{ app.bonus_all|floatformat:"0" }}</span>
                        <span>元</span>
                    </div>
				</div>
			</div>
		</div>

        <div style="position: absolute;right: 20px;color: white;top:10px;font-size: 16px;height: 20px;line-height: 20px;display:none">

            <div class="challenger_deposit_" style="width: auto;">
                <span class="" style="width: 60px">擂主押金</span>
            </div>
            <div class="challenger_deposit">
                <span class="challenger_deposit_0" style="">1</span>
                <span class="challenger_deposit__">一</span>
            </div>
            <div class="challenger_deposit">
                <span class="challenger_deposit_1" style="">1</span>
                <span class="challenger_deposit__">一</span>
            </div>
            <div class="challenger_deposit">
                <span class="challenger_deposit_2" style="">1</span>
                <span class="challenger_deposit__">一</span>
            </div>
            <div class="challenger_deposit">
                <span  class="challenger_deposit_3"  style="">1</span>
                <span class="challenger_deposit__">一</span>
            </div>
            <div class="challenger_deposit">
                <span class="challenger_deposit_4" style="">1</span>
                <span class="challenger_deposit__">一</span>
            </div>
            <div class="challenger_deposit">
                <span class="challenger_deposit_5" style="">1</span>
                <span class="challenger_deposit__">一</span>
            </div>
            <div class="challenger_deposit">
                <span class="challenger_deposit_6" style="">1</span>
                <span class="challenger_deposit__">一</span>
            </div>

        </div>

        <div id="qqGroupCode" style="position: absolute;right:20px;top: 20px;width: 30px;">
           <img src="/static/images/user/share@2x.png" style="width: 100%;">
        </div>
        <!-- 左上角的后退按钮 -->
		<div class="mdl-card__menu" style="display: none">
			<button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" id="backup-btn">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                     width="36px" height="36px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                <g>
                    <path d="M24.001,33.52c-0.539,0-1.076-0.217-1.471-0.644l-12-13c-0.707-0.766-0.707-1.947,0-2.713l12-13
                        c0.749-0.811,2.014-0.862,2.826-0.113c0.812,0.75,0.862,2.015,0.113,2.826L14.722,18.52L25.47,30.163
                        c0.749,0.812,0.698,2.077-0.113,2.826C24.972,33.344,24.485,33.52,24.001,33.52z"/>
                </g>
                </svg>
			</button>
		</div>
	</div>
    <div style="height: 190px;width: 100%">

    </div>

<div style="display: block;">
    <div class="block-panel patternSelection">
		<ul class="setting-list">
			<li class="setting-item" style="justify-content: center;">
				<div class="setting-mode__background">
                    <button id="discipline-mode" class="setting-mode__button setting-mode__button-active">
						日常模式
					</button>
					<button id="free-mode" class="setting-mode__button">
						自由模式
					</button>
				</div>
			</li>

            <!-- 日常模式 -->
            <div class="panel-layout" id="discipline-panel">
                <p class="p_1">每日完成用户自己设置的特定距离</p>

                <!-- 目标周数 -->
                <li class="setting-item" style="border-bottom: 1px solid rgba(182,193,200,0.3);">
                    <div>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                             width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                        <path fill="#bc6eff" d="M27.692,5H25V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H13V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H8.308
                            C5.381,5,3,7.9,3,10.857V26.13C3,29.087,5.381,31,8.308,31h19.385C30.619,31,33,29.087,33,26.13V10.857C33,7.9,30.619,5,27.692,5z
                             M8.308,7H11v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h10v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h2.692
                            C29.517,7,31,9.002,31,10.857v0.789C30.851,11.558,30.686,11,30.5,11h-25c-0.186,0-0.351,0.558-0.5,0.647v-0.789
                            C5,9.002,6.483,7,8.308,7z M27.692,29H8.308C6.483,29,5,27.985,5,26.13V13.34C5.149,13.429,5.314,13,5.5,13h25
                            c0.186,0,0.351,0.429,0.5,0.34v12.79C31,27.985,29.517,29,27.692,29z"/>
                        </svg>
                    </div>
                    <div style="flex: 8;">
                        <div class="setting-title">目标周数</div>
                        <p class="setting-desc">
                            <!-- -->
                            原系数: <span id="discipline__base-coeff">12</span>&nbsp;
                            保证金: <span id="discipline__deposit-value">20</span>元&nbsp;
                            总底金: <span id="discipline__excess-value">30</span>元

                            <!--
                            免签: <span id="discipline__avoid-value">1</span>
                            -->
                    </div>
                    <div class="setting-item__right position-right">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="discipline__timeSetButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span id="discipline__time-text">一 周</span>
                                <span>
                                    <i class="iconfont icon-xiaozhuanhuan-" style="font-size: 0.4rem;"></i>
                                    <!--
                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                          width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                                    <g>
                                        <path d="M19,25c-0.47,0-0.94-0.165-1.317-0.495l-8-7c-0.831-0.728-0.915-1.99-0.188-2.822c0.728-0.829,1.99-0.915,2.822-0.188
                                            L19,20.343l6.683-5.848c0.832-0.729,2.095-0.643,2.822,0.188c0.728,0.832,0.644,2.095-0.188,2.822l-8,7
                                            C19.94,24.835,19.47,25,19,25z"/>
                                    </g>
                                    </svg>
                                    -->
                                </span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="discipline__timeSetButton">
                                <li><a class="timeSetMenu" href="#">一 周</a></li>
                                <li><a class="timeSetMenu" href="#">二 周</a></li>
                                <li><a class="timeSetMenu" href="#">三 周</a></li>
                                <!--
                                <li><a class="timeSetMenu" href="#">1 月</a></li>
                                <li><a class="timeSetMenu" href="#">2 月</a></li>
                                -->
                            </ul>
                        </div>
                    </div>
                </li>

                <!--  提高收益 -->
                <li class="setting-item" style="border-bottom: 1px solid rgba(182,193,200,0.3);">
                    <div>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                             width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                        <g>
                            <path fill="#45d3ba" d="M32.958,18.917c-1.641-1.815-3.957-2.994-6.549-3.139l-0.774-0.051l0.809-0.954
                                c0.273-0.501,0.333-1.046,0.397-1.622l0.009-0.076l0.032-3.479c0-0.488-0.114-0.913-0.369-1.375l-0.006-0.01L26.433,7.99
                                l0.017-0.044c0.112-0.282,0.156-0.486,0.156-0.726c0-0.635-0.332-1.229-0.987-1.765c-0.621-0.507-1.516-0.954-2.661-1.328
                                c-2.126-0.697-5.024-1.095-7.949-1.095c-2.926,0-5.823,0.399-7.949,1.093C5.916,4.498,5.02,4.945,4.4,5.453
                                C3.745,5.99,3.413,6.582,3.413,7.218c0,0.266,0.054,0.521,0.152,0.717l0.023,0.048L3.512,8.21L3.506,8.22
                                C3.251,8.683,3.137,9.107,3.137,9.597v3.486c0,0.573,0.206,1.154,0.578,1.636l0.054,0.069l-0.209,0.35
                                c-0.284,0.516-0.423,0.984-0.423,1.429v3.486c0,0.517,0.169,1.042,0.532,1.649l0.044,0.074l-0.211,0.284
                                c-0.284,0.514-0.42,0.979-0.42,1.424v3.485c0,1.445,1.21,2.799,3.407,3.811c2.228,1.027,5.235,1.593,8.466,1.593
                                c1.353,0,3.938-0.292,3.963-0.294l0.063-0.007l0.044,0.046c1.283,1.33,2.945,2.287,4.813,2.696
                                c-0.646-0.074,0.646,0.215,2.005,0.215h0.013c5.271,0,9.56-4.311,9.56-9.609c0-0.036,0.001-0.079,0.001-0.121
                                c0-2.46-0.934-4.702-2.465-6.391L32.958,18.917z M7.78,5.683c1.932-0.592,4.518-0.918,7.285-0.918
                                c5.916,0,10.039,1.468,10.039,2.785c0,0.649-1.004,1.329-2.754,1.866c-1.932,0.594-4.518,0.919-7.284,0.919
                                c-5.916,0-10.039-1.468-10.039-2.785C5.026,6.901,6.03,6.22,7.78,5.683L7.78,5.683z M4.806,9.858l0.216,0.197
                                c0.841,0.768,2.27,1.403,4.133,1.837c1.739,0.405,3.764,0.619,5.855,0.619c2.09,0,4.115-0.214,5.855-0.619
                                c1.863-0.434,3.293-1.069,4.133-1.837l0.216-0.197v3.17c0,1.057-1.051,2.139-2.884,2.968c-1.951,0.882-4.55,1.367-7.32,1.367
                                c-2.77,0-5.368-0.485-7.32-1.367c-1.831-0.828-2.884-1.91-2.884-2.968V9.858z M18.479,19.396l-0.173,0.237
                                c-0.954,1.288-1.58,2.873-1.725,4.594c0.136-0.955,0.116-0.856,0.095-0.752c-0.052,0.256-0.106,0.521-0.106,0.785v0.129h-0.129
                                c-0.189,0-0.396,0.014-0.597,0.027c-0.201,0.014-0.417,0.028-0.614,0.028c-2.772,0-5.382-0.485-7.347-1.367
                                c-1.851-0.829-2.911-1.911-2.911-2.968l-0.061-3.631l0.224,0.219c0.911,0.888,2.308,1.631,4.042,2.147
                                c1.765,0.526,3.839,0.804,5.999,0.804c1.039,0,2.043-0.112,3.013-0.221L18.479,19.396z M18.053,30.308
                                c-0.855,0.106-1.845,0.167-2.849,0.167c-0.029,0-0.059,0-0.088,0c-2.799,0-5.423-0.403-7.384-1.137
                                c-1.86-0.695-2.926-1.619-2.926-2.535v-2.978l0.209,0.167c1.903,1.518,5.775,2.463,10.105,2.463c0.439,0,0.818,0,1.25-0.054
                                l0.123-0.015l0.02,0.122c0.166,1.001,0.494,1.916,0.974,2.722l0.005,0.009c0.146,0.293,0.342,0.556,0.637,0.853l0.187,0.19
                                L18.053,30.308z M31.495,30.969c-1.483,1.502-3.467,2.329-5.583,2.329c-2.21,0-4.256-0.898-5.764-2.53
                                c-0.337-0.339-0.62-0.737-0.893-1.121l-0.004-0.006c-0.773-1.206-1.232-2.678-1.232-4.257c0-0.006,0-0.012,0-0.018v-0.055
                                c0-0.451,0.057-0.905,0.111-1.344c0.056-0.398,0.169-0.796,0.279-1.181l0.002-0.006c0.992-2.883,3.536-4.981,6.608-5.308
                                c0.165-0.035,0.505-0.035,0.835-0.035h0.28c2.038,0.082,3.947,0.943,5.38,2.425c1.38,1.419,2.232,3.36,2.232,5.499v0.007
                                C33.775,27.48,32.974,29.47,31.495,30.969L31.495,30.969z M31.495,30.969"/>
                            <path fill="#45d3ba" d="M29.809,24.655c-0.125-0.095-0.283-0.152-0.455-0.152c-0.247,0-0.467,0.118-0.605,0.301L27.08,27.03v-6.821
                                c0-0.418-0.339-0.758-0.758-0.758c-0.419,0-0.758,0.339-0.758,0.758v6.821l-1.667-2.223c-0.14-0.185-0.359-0.303-0.606-0.303
                                c-0.419,0-0.758,0.339-0.758,0.758c0,0.171,0.057,0.33,0.153,0.456l3.03,4.04c0.14,0.185,0.359,0.303,0.606,0.303
                                c0.247,0,0.466-0.118,0.605-0.301l3.033-4.044c0.095-0.125,0.152-0.283,0.152-0.455c0-0.247-0.118-0.466-0.301-0.605L29.809,24.655
                                z M29.809,24.655"/>
                        </g>
                        </svg>
                    </div>
                    <div>
                        <div class="setting-title">提高收益</div>
                        <p class="setting-desc">
                            系数: X <span id="discipline__status-coeff-value">1</span> &nbsp;
                            金额: X <span id="discipline__money_time">1</span>
                        </p>
                    </div>
                    <div class="setting-item__right position-right">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="discipline__statusSetButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span id="discipline__status-text">普 通</span>
                                <span>
                                    <i class="iconfont icon-xiaozhuanhuan-" style="font-size: 0.4rem;"></i>
                                    <!--
                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                          width="20px" height="24px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                                    <g>
                                        <path d="M19,25c-0.47,0-0.94-0.165-1.317-0.495l-8-7c-0.831-0.728-0.915-1.99-0.188-2.822c0.728-0.829,1.99-0.915,2.822-0.188
                                            L19,20.343l6.683-5.848c0.832-0.729,2.095-0.643,2.822,0.188c0.728,0.832,0.644,2.095-0.188,2.822l-8,7
                                            C19.94,24.835,19.47,25,19,25z"/>
                                    </g>
                                    </svg>
                                    -->
                                </span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="statusSetButton">
                                <li><a class="statusSetMenu" href="#">尝 新</a></li>
{#                                <li><a class="statusSetMenu" href="#">尝 试</a></li>#}
                                <li><a class="statusSetMenu" href="#">体 验</a></li>
                                <li><a class="statusSetMenu" href="#">普 通</a></li>
                                <li><a class="statusSetMenu" href="#">升 级</a></li>
                            </ul>
                        </div>
                    </div>
                </li>

                <li class="setting-item" style="border-bottom: 1px solid rgba(182,193,200,0.3);">
                    <div>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                        <g>
                            <path fill="#ff9947" d="M25.723,14c0-3.86-3.141-7-7-7s-7,3.14-7,7s3.141,7,7,7S25.723,17.86,25.723,14z M13.723,14c0-2.757,2.243-5,5-5
                                s5,2.243,5,5s-2.243,5-5,5S13.723,16.757,13.723,14z"/>
                            <path fill="#ff9947" d="M29,32h-9l8.818-10.02c1.876-2.307,2.907-5.213,2.904-8.183c0-5.755-3.698-10.751-9.202-12.433
                                c-1.234-0.376-2.512-0.568-3.797-0.568c-4.331,0-8.361,2.145-10.782,5.737c-3.216,4.773-2.94,10.983,0.712,15.484L17.445,32H9v-2H7
                                v4h24v-4h-2V32z M9.6,7.652c2.049-3.04,5.459-4.855,9.124-4.855c1.087,0,2.168,0.162,3.213,0.481
                                c4.657,1.422,7.786,5.65,7.786,10.521c0.003,2.512-0.869,4.97-2.431,6.89l-8.569,9.736l-8.543-9.697
                                C7.112,16.945,6.879,11.691,9.6,7.652z"/>
                        </g>
                        </svg>
                    </div>
                    <div>
                        <div class="setting-title">目标距离</div>
                        <p class="setting-desc">系数: X <span id="discipline__distance-coeff-times">1</span></p>
                    </div>
                    <div class="setting-item__right" style="padding-left: 20px;">
                        <div style="display: flex;flex-direction: row;justify-content: space-between;color: #B6C1C8; font-size: 16px;">
                            <span>1km</span>
                            <span style="color: #1fa2ff;"><span id="discipline__distance-desc">1km/天</span></span>
                            <span>5km</span>
                        </div>
                        <div class="mdl-slider__container">
                            <input class="mdl-slider" type="range" min="0" max="8" value="0" tabindex="0">
                            <div class="mdl-slider__background-flex">
                                <div class="mdl-slider__background-upper" style="flex: 1 1 0%;">
                                </div>
                            </div>
                        </div>
                    </div>
                </li>

                <!--  免签卡 -->
                <li class="setting-item">
                    <div>
                        <img src="/static/images/activity_running/3D-touch_@2x.png" style="width: 18px;height: 18px">
                    </div>
                    <div>
                        <div class="setting-title">免签卡</div>
                        <p class="setting-desc">原系数: - <span id="discipline__avoid-coeff-value">0</span></p>
                    </div>
                    <div class="setting-item__right position-right">
                        <div class="dropup">
                            <button class="btn btn-default dropdown-toggle" type="button" id="discipline__avoidSetButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span id="discipline__avoid-text">一 张</span>
                                <span>
                                    <i class="iconfont icon-xiaozhuanhuan-" style="font-size: 0.4rem;"></i>
                                    <!--
                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                          width="20px" height="24px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                                    <g>
                                        <path d="M19,25c-0.47,0-0.94-0.165-1.317-0.495l-8-7c-0.831-0.728-0.915-1.99-0.188-2.822c0.728-0.829,1.99-0.915,2.822-0.188
                                            L19,20.343l6.683-5.848c0.832-0.729,2.095-0.643,2.822,0.188c0.728,0.832,0.644,2.095-0.188,2.822l-8,7
                                            C19.94,24.835,19.47,25,19,25z"/>
                                    </g>
                                    </svg>
                                    -->
                                </span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="avoidSetButton">
                                <li class="avoidNumber avoidNumber_1"><a class="avoidSetButton" href="#">一 张</a></li>
                                <li class="avoidNumber avoidNumber_2"><a class="avoidSetButton" href="#">二 张</a></li>
                                <li class="avoidNumber avoidNumber_3"><a class="avoidSetButton" href="#">三 张</a></li>
                                <li class="avoidNumber avoidNumber_4"><a class="avoidSetButton" href="#">四 张</a></li>
                                <li class="avoidNumber avoidNumber_5"><a class="avoidSetButton" href="#">五 张</a></li>
                                <li class="avoidNumber avoidNumber_6"><a class="avoidSetButton" href="#">六 张</a></li>
                                <li class="avoidNumber avoidNumber_7"><a class="avoidSetButton" href="#">七 张</a></li>
                                <li class="avoidNumber avoidNumber_8"><a class="avoidSetButton" href="#">八 张</a></li>
                                <li class="avoidNumber avoidNumber_9"><a class="avoidSetButton" href="#">九 张</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </div>


            <!-- 自由模式 -->
            <div class="panel-layout" id="free-panel" style="display: none;">
                <p class="p_1">在目标天数内完成目标距离</p>

                <!-- 目标周数 -->
                <li class="setting-item" style="border-bottom: 1px solid rgba(182,193,200,0.3);">
                    <div>
                         <!---->
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                             width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                        <path fill="#bc6eff" d="M27.692,5H25V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H13V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H8.308
                            C5.381,5,3,7.9,3,10.857V26.13C3,29.087,5.381,31,8.308,31h19.385C30.619,31,33,29.087,33,26.13V10.857C33,7.9,30.619,5,27.692,5z
                             M8.308,7H11v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h10v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h2.692
                            C29.517,7,31,9.002,31,10.857v0.789C30.851,11.558,30.686,11,30.5,11h-25c-0.186,0-0.351,0.558-0.5,0.647v-0.789
                            C5,9.002,6.483,7,8.308,7z M27.692,29H8.308C6.483,29,5,27.985,5,26.13V13.34C5.149,13.429,5.314,13,5.5,13h25
                            c0.186,0,0.351,0.429,0.5,0.34v12.79C31,27.985,29.517,29,27.692,29z"/>
                        </svg>

                    </div>
                    <div>
                        <div class="setting-title">目标周数</div>
                        <p class="setting-desc">
                            原系数: <span id="free__base-coeff">10</span>&nbsp;
                            保证金: <span id="free__deposit-value">20</span>元&nbsp;
                            总底金: <span id="free__excess-value">30</span>元
                        </p>
                    </div>
                    <div class="setting-item__right position-right">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="free__timeSetButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span id="free__time-text">一 周</span>
                                <span>
                                    <i class="iconfont icon-xiaozhuanhuan-" style="font-size: 0.4rem;"></i>
                                    <!--
                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                          width="20px" height="24px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                                    <g>
                                        <path d="M19,25c-0.47,0-0.94-0.165-1.317-0.495l-8-7c-0.831-0.728-0.915-1.99-0.188-2.822c0.728-0.829,1.99-0.915,2.822-0.188
                                            L19,20.343l6.683-5.848c0.832-0.729,2.095-0.643,2.822,0.188c0.728,0.832,0.644,2.095-0.188,2.822l-8,7
                                            C19.94,24.835,19.47,25,19,25z"/>
                                    </g>
                                    </svg>
                                    -->
                                </span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="free__timeSetButton">
                                <li><a class="timeSetMenu" href="#">一 周</a></li>
                                <li><a class="timeSetMenu" href="#">二 周</a></li>
                                <li><a class="timeSetMenu" href="#">三 周</a></li>
                                <!--
                                <li><a class="timeSetMenu" href="#">1 月</a></li>
                                <li><a class="timeSetMenu" href="#">2 月</a></li>-->
                            </ul>
                        </div>
                    </div>
                </li>

                <li class="setting-item" style="border-bottom: 1px solid rgba(182,193,200,0.3);">
                    <div>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                             width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                        <g>
                            <path fill="#45d3ba" d="M32.958,18.917c-1.641-1.815-3.957-2.994-6.549-3.139l-0.774-0.051l0.809-0.954
                                c0.273-0.501,0.333-1.046,0.397-1.622l0.009-0.076l0.032-3.479c0-0.488-0.114-0.913-0.369-1.375l-0.006-0.01L26.433,7.99
                                l0.017-0.044c0.112-0.282,0.156-0.486,0.156-0.726c0-0.635-0.332-1.229-0.987-1.765c-0.621-0.507-1.516-0.954-2.661-1.328
                                c-2.126-0.697-5.024-1.095-7.949-1.095c-2.926,0-5.823,0.399-7.949,1.093C5.916,4.498,5.02,4.945,4.4,5.453
                                C3.745,5.99,3.413,6.582,3.413,7.218c0,0.266,0.054,0.521,0.152,0.717l0.023,0.048L3.512,8.21L3.506,8.22
                                C3.251,8.683,3.137,9.107,3.137,9.597v3.486c0,0.573,0.206,1.154,0.578,1.636l0.054,0.069l-0.209,0.35
                                c-0.284,0.516-0.423,0.984-0.423,1.429v3.486c0,0.517,0.169,1.042,0.532,1.649l0.044,0.074l-0.211,0.284
                                c-0.284,0.514-0.42,0.979-0.42,1.424v3.485c0,1.445,1.21,2.799,3.407,3.811c2.228,1.027,5.235,1.593,8.466,1.593
                                c1.353,0,3.938-0.292,3.963-0.294l0.063-0.007l0.044,0.046c1.283,1.33,2.945,2.287,4.813,2.696
                                c-0.646-0.074,0.646,0.215,2.005,0.215h0.013c5.271,0,9.56-4.311,9.56-9.609c0-0.036,0.001-0.079,0.001-0.121
                                c0-2.46-0.934-4.702-2.465-6.391L32.958,18.917z M7.78,5.683c1.932-0.592,4.518-0.918,7.285-0.918
                                c5.916,0,10.039,1.468,10.039,2.785c0,0.649-1.004,1.329-2.754,1.866c-1.932,0.594-4.518,0.919-7.284,0.919
                                c-5.916,0-10.039-1.468-10.039-2.785C5.026,6.901,6.03,6.22,7.78,5.683L7.78,5.683z M4.806,9.858l0.216,0.197
                                c0.841,0.768,2.27,1.403,4.133,1.837c1.739,0.405,3.764,0.619,5.855,0.619c2.09,0,4.115-0.214,5.855-0.619
                                c1.863-0.434,3.293-1.069,4.133-1.837l0.216-0.197v3.17c0,1.057-1.051,2.139-2.884,2.968c-1.951,0.882-4.55,1.367-7.32,1.367
                                c-2.77,0-5.368-0.485-7.32-1.367c-1.831-0.828-2.884-1.91-2.884-2.968V9.858z M18.479,19.396l-0.173,0.237
                                c-0.954,1.288-1.58,2.873-1.725,4.594c0.136-0.955,0.116-0.856,0.095-0.752c-0.052,0.256-0.106,0.521-0.106,0.785v0.129h-0.129
                                c-0.189,0-0.396,0.014-0.597,0.027c-0.201,0.014-0.417,0.028-0.614,0.028c-2.772,0-5.382-0.485-7.347-1.367
                                c-1.851-0.829-2.911-1.911-2.911-2.968l-0.061-3.631l0.224,0.219c0.911,0.888,2.308,1.631,4.042,2.147
                                c1.765,0.526,3.839,0.804,5.999,0.804c1.039,0,2.043-0.112,3.013-0.221L18.479,19.396z M18.053,30.308
                                c-0.855,0.106-1.845,0.167-2.849,0.167c-0.029,0-0.059,0-0.088,0c-2.799,0-5.423-0.403-7.384-1.137
                                c-1.86-0.695-2.926-1.619-2.926-2.535v-2.978l0.209,0.167c1.903,1.518,5.775,2.463,10.105,2.463c0.439,0,0.818,0,1.25-0.054
                                l0.123-0.015l0.02,0.122c0.166,1.001,0.494,1.916,0.974,2.722l0.005,0.009c0.146,0.293,0.342,0.556,0.637,0.853l0.187,0.19
                                L18.053,30.308z M31.495,30.969c-1.483,1.502-3.467,2.329-5.583,2.329c-2.21,0-4.256-0.898-5.764-2.53
                                c-0.337-0.339-0.62-0.737-0.893-1.121l-0.004-0.006c-0.773-1.206-1.232-2.678-1.232-4.257c0-0.006,0-0.012,0-0.018v-0.055
                                c0-0.451,0.057-0.905,0.111-1.344c0.056-0.398,0.169-0.796,0.279-1.181l0.002-0.006c0.992-2.883,3.536-4.981,6.608-5.308
                                c0.165-0.035,0.505-0.035,0.835-0.035h0.28c2.038,0.082,3.947,0.943,5.38,2.425c1.38,1.419,2.232,3.36,2.232,5.499v0.007
                                C33.775,27.48,32.974,29.47,31.495,30.969L31.495,30.969z M31.495,30.969"/>
                            <path fill="#45d3ba" d="M29.809,24.655c-0.125-0.095-0.283-0.152-0.455-0.152c-0.247,0-0.467,0.118-0.605,0.301L27.08,27.03v-6.821
                                c0-0.418-0.339-0.758-0.758-0.758c-0.419,0-0.758,0.339-0.758,0.758v6.821l-1.667-2.223c-0.14-0.185-0.359-0.303-0.606-0.303
                                c-0.419,0-0.758,0.339-0.758,0.758c0,0.171,0.057,0.33,0.153,0.456l3.03,4.04c0.14,0.185,0.359,0.303,0.606,0.303
                                c0.247,0,0.466-0.118,0.605-0.301l3.033-4.044c0.095-0.125,0.152-0.283,0.152-0.455c0-0.247-0.118-0.466-0.301-0.605L29.809,24.655
                                z M29.809,24.655"/>
                        </g>
                        </svg>
                    </div>
                    <div>
                        <div class="setting-title">提高收益</div>
                        <p class="setting-desc">
                            系数: X <span id="free__status-coeff-value">1</span>&nbsp;
                            金额: X <span id="free__money_time">1</span>
                        </p>
                    </div>
                    <div class="setting-item__right position-right">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="free__statusSetButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span id="free__status-text">普 通</span>
                                <span>
                                    <i class="iconfont icon-xiaozhuanhuan-" style="font-size: 0.4rem;"></i>
                                    <!--
                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                          width="20px" height="24px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                                    <g>
                                        <path d="M19,25c-0.47,0-0.94-0.165-1.317-0.495l-8-7c-0.831-0.728-0.915-1.99-0.188-2.822c0.728-0.829,1.99-0.915,2.822-0.188
                                            L19,20.343l6.683-5.848c0.832-0.729,2.095-0.643,2.822,0.188c0.728,0.832,0.644,2.095-0.188,2.822l-8,7
                                            C19.94,24.835,19.47,25,19,25z"/>
                                    </g>
                                    </svg>
                                    -->
                                </span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="free__statusSetButton">
                                <li><a class="statusSetMenu" href="#">尝 新</a></li>
{#                                <li><a class="statusSetMenu" href="#">尝 试</a></li>#}
                                <li><a class="statusSetMenu" href="#">体 验</a></li>
                                <li><a class="statusSetMenu" href="#">普 通</a></li>
                                <li><a class="statusSetMenu" href="#">升 级</a></li>
                            </ul>
                        </div>
                    </div>
                </li>

                <li class="setting-item" style="margin-bottom: 40px">
                    <div>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                        <g>
                            <path fill="#ff9947" d="M25.723,14c0-3.86-3.141-7-7-7s-7,3.14-7,7s3.141,7,7,7S25.723,17.86,25.723,14z M13.723,14c0-2.757,2.243-5,5-5
                                s5,2.243,5,5s-2.243,5-5,5S13.723,16.757,13.723,14z"/>
                            <path fill="#ff9947" d="M29,32h-9l8.818-10.02c1.876-2.307,2.907-5.213,2.904-8.183c0-5.755-3.698-10.751-9.202-12.433
                                c-1.234-0.376-2.512-0.568-3.797-0.568c-4.331,0-8.361,2.145-10.782,5.737c-3.216,4.773-2.94,10.983,0.712,15.484L17.445,32H9v-2H7
                                v4h24v-4h-2V32z M9.6,7.652c2.049-3.04,5.459-4.855,9.124-4.855c1.087,0,2.168,0.162,3.213,0.481
                                c4.657,1.422,7.786,5.65,7.786,10.521c0.003,2.512-0.869,4.97-2.431,6.89l-8.569,9.736l-8.543-9.697
                                C7.112,16.945,6.879,11.691,9.6,7.652z"/>
                        </g>
                        </svg>
                    </div>
                    <div>
                        <div class="setting-title">目标距离</div>
                        <p class="setting-desc">系数: X <span id="free__distance-coeff-times">1</span></p>
                    </div>
                    <div class="setting-item__right" style="padding-left: 20px;">
                        <div style="display: flex;flex-direction: row;justify-content: space-between;color: #B6C1C8; font-size: 16px;">
                            <span><span id="distance-min">6</span>km</span>
                            <span style="color: #1fa2ff;"><span id="free__distance-desc">6km</span></span>
                            <span><span id="distance-max">30</span>km</span>
                        </div>
                        <div class="mdl-slider__container">
                            <input class="mdl-slider" type="range" min="0" max="8" value="0" tabindex="0">
                            <div class="mdl-slider__background-flex">
                                <div class="mdl-slider__background-upper" style="flex: 1 1 0%;">
                                </div>
                            </div>
                        </div>
                    </div>
                </li>

            </div>

        </ul>
	</div>

    <!-- 明细规则-->
            <div class="block-panel" style="">
                <div class="weui-flex content_box">
                    <div class="weui-flex__item detailed_box">
                        <div class="detailed_box_div" style="">
                            <div style="display: inline-block;line-height: 2rem;">
                                <i class="iconfont icon-shourumingxi" style="font-size: 1rem;font-weight: 500;"></i>
                            </div>

                            <div style="display: inline-block">
                                <span style="margin-left:0;font-size: 0.85rem">
                                    明细 <i class="iconfont icon-dazhuanhuan-" style="font-size: 0.8rem;"></i>
                                </span>
                            </div>

                        </div>

                    </div>
                    <div class="weui-flex__item rule_box">
                        <div class="rule_box_div" style="">
                            <i class="iconfont icon-xinxishuoming"  style="font-size: 1rem;"></i>
                            <span style="font-size: 0.85rem">
                                规则说明 <i class="iconfont icon-dazhuanhuan-" style="font-size: 0.8rem;"></i>
                            </span>
                        </div>

                    </div>
                </div>
            </div>


        </div>

    <div style="height: 100px;width: 100%;opacity: 0;background-color: white">

    </div>


	<div class="fixed-panel" style="z-index: 3;">
		<div class="row-center" style="justify-content: space-between;margin-top: 10px;">
			<div class="fixed-text">
				系数:
				<span id="all-coefficient-value" class="fixed-text__bold" style="color: #565c66;">12.00</span>
			</div>
			<div class="fixed-text">
				押金:
				<span style="color: #ff931f;" id="guarantee-cash" class="fixed-text__bold">
					50.00
				</span>
				元
			</div>
		</div>
		<button class="weui-btn weui-btn_primary" id="gen-btn">
			生成目标
		</button>
	</div>

    <!-- 支付弹窗 -->
	<div id="gen-popup" class="weui-popup__container popup-bottom">
		<div class="weui-popup__overlay"></div>
		<div class="weui-popup__modal">
			<div class="modal-content">
				<div class="gen-title">
					<div class="title-line"></div>
					<span class="title-text">
						<span style="font-weight: 600;">跑步</span>
						<span id="free-gen-title" class="gen-title-text" style="display: none;">自由模式</span>
                        <span id="discipline-gen-title" class="gen-title-text" >日常模式</span>
					</span>
				</div>
				<div class="weui-cell">
						<div class="weui-cell__bd">
						<span class="gen_title">总价</span>
						</div>
						<div class="weui-cell__ft" style="margin-right: 20px;">
							<span id="pay-count" style="color: #565c66;font-size: 1.4rem;font-weight: 600;">
								50
							</span>
							元
						</div>
				  </div>
				<div class="weui-cell no-before">
						<div class="weui-cell__hd">
							<span class="gen_title">使用余额</span>
						</div>
						<div class="weui-cells_checkbox weui-cell__bd">
							<label class="weui-cell weui-check__label" for="weuiAgree">
								<div class="weui-cell__bd">
                                    <p>{{ balance }} 元</p>
								</div>
								<div class="weui-cell__hd">
                                    <input type="checkbox" id="weuiAgree" class="weui-check" name="checkbox1" checked="checked">
                                    <i class="weui-icon-checked"></i>
								</div>
						  </label>
						</div>
					</div>
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                    <span class="gen_title">应付</span>
                    </div>
                    <div class="weui-cell__ft" style="margin-right: 20px;">
                        <span id="reality_price" style="color: #565c66;font-size: 1.4rem;font-weight: 600;">
                            50.00
                        </span>
                        元
                    </div>
                </div>

				<button class="weui-btn weui-btn_primary" id="pay-btn">

                    <i class="iconfont icon-ai-weixin"></i>
					微信支付
				</button>
                <p class="user-agreement__text">进入下一步即代表同意<a  href="/user/userAgreement" class="font_color_1">用户协议</a></p>
			</div>
		</div>
	</div>
    <div id="activity-get__id" hidden>{{ app.activity_id }}</div>



    <div>
        <div class="mask_on" style="display: none"></div>
        <div class="mask_on__1" ></div>


        <!-- 活动规则 -->
        <div class="rule_box_text" style="display: none">
            <p style="text-align: center;font-size: 14px">#活动规则#</p>
            1. 设置个人目标，支付押金报名参加。<br>
            2. 完成自己所设置的目标，并以打卡或上传图片等方式进行记录。<br>
            3. 在活动进行期间,未完成时则扣除<u>部分押金</u>纳入当日活动瓜分池。并根据<u>系数</u>瓜分给当日参与此活动的<u>所有用户</u>。被扣除的押金在被瓜分前会扣除1%的服务费，并取整瓜分。（预学金另外计算。）（押金、系数等更多平台元素说明，<a href="https://mp.weixin.qq.com/s/e7LQzUe6DjaN9Zc9rjafFQ" style="color:rgba(31, 162, 255, 0.8)">请点击此处</a> 。）<br>
            4. 支付完押金后，在活动结束前不可申请退出。完成目标天数或押金为0的情况下，即活动结束，并可退回剩余押金及累计的瓜分的奖励。<br>
        </div>

        <!-- 明细 -->
        <div class="detailed_box_text"  style="display: none">
            <p style="text-align: center;font-size: 14px">明细</p>
            <div class="detailed_box__1">
                <div class="weui-flex">
                    <div class="weui-flex__item" style="padding-left: 10px;">
                        <p>&#12288;</p>
                        <p>保证金</p>
                        <p>底&#12288;金</p>
                    </div>
                    <div class="weui-flex__item">
                        <p  class="font_color_1 detailed__info_timeSet">一 周</p>
                        <p><span class="detailed__info_deposit">20</span>元</p>
                        <p><span class="detailed__info_excess">10</span>元X<span class="detailed__info_excess_number">3</span>次</p>
                    </div>
                    <div class="weui-flex__item" style="text-align: center;">
                        <p  class="font_color_1 detailed__info_moneyUp">普 通</p>
                        <p>X<span class="detailed__info_moneyUp_money">1</span></p>
                        <p>X<span class="detailed__info_moneyUp_money">1</span></p>
                    </div>
                    <div class="weui-flex__item" style="text-align: center">
                        <p class="font_color_1">合 计</p>
                        <p><span class="detailed__info_depositTotals">20</span>元</p>
                        <p><span class="detailed__info_excessTotals">30</span>元</p>
                    </div>
                </div>
            </div>
            <div class="detailed_box__2">
                <div class="weui-flex">
                    <div class="weui-flex__item" style="padding-left: 10px;">
                        <p>&#12288;</p>
                        <p>系&#12288;数</p>
                    </div>
                    <div class="weui-flex__item">
                        <p class="font_color_1 detailed__info_timeSet">一 周</p>
                        <p><span class="detailed__info_base_coeff">12</span></p>
                    </div>
                    <div class="weui-flex__item detailed__info_avoid_box">
                        <p class="font_color_1">免 签</p>
                        <p>-<span class="detailed__info_avoid_coeff">0</span></p>
                    </div>
                    <div class="weui-flex__item" style="text-align: center">
                        <p class="font_color_1 detailed__distance_desc">1km/天</p>
                        <p>X<span class="detailed__distance-coeff">1</span></p>
                    </div>
                    <div class="weui-flex__item">
                        <p class="font_color_1 detailed__info_moneyUp">普 通</p>
                        <p style="text-align: center;">X<span class="detailed__info_moneyUp_coeff">1</span></p>
                    </div>
                    <div class="weui-flex__item" style="text-align: center">
                        <p class="font_color_1">合 计</p>
                        <p><span class="detailed__info_all_coefficient">12</span></p></div>
                </div>
            </div>
        </div>

        <div class="qqGroupCode_box" style="opacity: 0;">
            <div class="container_on_share_run">
                <div class="swiper-container_on_share_run" data-space-between='10' data-pagination='.swiper-pagination' data-autoplay="1000">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="/static/images/on_share/on_share_run_1.jpg" class="fadeInLeft_1" style="width: 100%;" >
                        </div>
                        <div class="swiper-slide">
                            <img src="/static/images/on_share/on_share_run_2.jpg" class="fadeInLeft_1" style="width: 100%;" >
                        </div>

                    </div>
                </div>
{#                <img src="/static/images/on_share/on_share_run_1.jpg" class="hide fadeInLeft_1" style="width: 100%;" >#}
{#                <img src="/static/images/on_share/on_share_run_2.jpg" class="fadeInLeft_1" style="width: 100%;" >#}
            </div>
        </div>
    </div>



	<script type="text/javascript" src="/static/js/jquery-2.1.4.js"></script>
    <script type="text/javascript" src="/static/js/jquery-weui-2.1.4.js"></script>
    <script type="text/javascript" src="/static/js/public.js"></script>
	<script type="text/javascript" src="/static/js/fastclick.js"></script>
    <script type='text/javascript' src='/static/js/swiper.min.js' charset='utf-8'></script>
	<script>
		// fast click binding
		$(function() {
			FastClick.attach(document.body);
			$(".mask_on__1").hide();
			$(".qqGroupCode_box").hide();
			$(".qqGroupCode_box").css("opacity","1");
		});

		$("iframe").detach();

	</script>
	<script type="text/javascript" src="/static/js/jquery-weui.min.js"></script>
	<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/static/js/material.min.js"></script>
    <script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
     <script>
          $(".swiper-container_on_share_run").swiper({
              loop: true,
              autoplay:true,
          });
    </script>
    <!--配置CSRF保护-->
    <script>

        $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}' }
        });
    </script>
    <!--注入Config信息-->
	<script>
	{{ WechatJSConfig|safe}}
        wx.ready(function() {
            wx.hideAllNonBaseMenuItem();
            wx.hideOptionMenu();
        })
	</script>
	<script>
        //日常天数
        var day__map = {
            '一 周': 7,
            '二 周': 14,
            '三 周': 21,
            '一 月': 30,
            '二 月': 61
        };

        //日常模式 原系数
        var day_map = {
            '一 周': 12,
            '二 周': 18,
            '三 周': 24,
            '一 月': 30,
            '二 月': 61
        };
        //自由模式 目标周数 原系数
        var free_coefficient_map = {
            '一 周':'10',
            '二 周':'15',
            '三 周':'20',
            '一 月':'24',
            '二 月':'30'
        };

        //保证金，两个模式下是一致的
        var deposit_map = {
            '一 周':'20',
            '二 周':'30',
            '三 周':'40',
            '一 月':'50',
            '二 月':'100'
        };
        //底金，押金=保证金+底金
        var excess_map = {
            '一 周':'10',
            '二 周':'10',
            '三 周':'10',
            '一 月':'0',
            '二 月':'0'
        };
        //底金次数
        var moneytimes_map ={
            '一 周':'3',
            '二 周':'6',
            '三 周':'9',
            '一 月':'12',
            '二 月':'24'
        };

        //日常模式下的免签
        var avoid_map = {
            '一 周':'1',
            '二 周':'2',
            '三 周':'3',
            '一 月':'6',
            '二 月':'12'
        };
        // 提高收益 系数
        var coeff_time_map = {
            '尝 新':'1',
            '体 验':'0.4',
            '普 通':'1',
            '升 级':'1.35'
        };

        // 提高收益 金额加成
        var money_time_map = {
            '尝 新':'1',
            '体 验':'0.5',
            '普 通':'1',
            '升 级':'1.5'
        };

        var avoid_number_map = {
            '一 张':'1',
            '二 张':'2',
            '三 张':'3',
            '四 张':'4',
            '五 张':'5',
            '六 张':'6',
            '七 张':'7',
            '八 张':'8',
            '九 张':'9'
        };
        var mode_map = {
            '尝 新':'N',
            '体 验':'P',
            '普 通':'O',
            '升 级':'U'
        };

        // 判断是否处于自由模式
        function is_free_mode(){
            return $("#free-mode").hasClass("setting-mode__button-active");
        }
         // 修改总系数与押金值
        function updateTotal(){

            var coefficient = 0; //原系数
            var times = 0.0;
            var status = 1.0;    //提高收益 系数
            var money_time = 1;   //提高收益 金额
            var excess = 0;      //总底金 (多次)
            var deposit = 0;     //保证金(一次)
            var total = 0;       //总押金
            var all_coefficient = 1; //总系数
            var avoid = 1;        //免签数系数
            if(is_free_mode()) {
                //自由模式
                //计算总系数
                avoid = 0;
                coefficient = parseInt($("#free__base-coeff").html().trim());         //获取原系数
                times = parseFloat($("#free__distance-coeff-times").html().trim()); //目标距离 系数
                status = parseFloat($("#free__status-coeff-value").html().trim());   //提高收益 系数
                //计算总押金，押金 = 底金 + 保证金
                excess = parseInt($("#free__excess-value").html().trim());             //总底金 (多次)
                deposit = parseInt($("#free__deposit-value").html().trim());           //保证金(一次)
                total = excess + deposit;                                                  //总押金
                money_time=parseFloat($("#free__money_time").text().trim());            //金额 加成
                //自由模式 总系数
                all_coefficient = (coefficient * times * status).toFixed(2);

                //明细弹窗
                $(".detailed__distance_desc").text($("#free__distance-desc").text());
                $(".detailed__distance-coeff").text($("#free__distance-coeff-times").text());

            }
            else{
                //日常模式
                //计算总系数
                coefficient = parseInt($("#discipline__base-coeff").html().trim());

                times = parseFloat($("#discipline__distance-coeff-times").html().trim());
                status = parseFloat($("#discipline__status-coeff-value").html().trim());
                //计算总押金，押金 = 底金 + 保证金
                excess = parseInt($("#discipline__excess-value").html().trim());
                deposit = parseInt($("#discipline__deposit-value").html().trim());
                total = excess + deposit;
                money_time=parseFloat($("#discipline__money_time").text().trim());

                avoid=parseFloat($("#discipline__avoid-coeff-value").html().trim());  //免签数系数

                //明细弹窗
                $(".detailed__distance_desc").text($("#discipline__distance-desc").text());
                $(".detailed__distance-coeff").text($("#discipline__distance-coeff-times").text());

                //日常模式 总系数
                all_coefficient = ((coefficient-avoid) * times * status).toFixed(2);
            }

            //console.log(money_time);
            //console.log(total);
            $("#all-coefficient-value").text(all_coefficient);   // 计算后系数
            var paymoney = (total * money_time).toFixed(2);
            $("#guarantee-cash,#pay-count").html(paymoney);

            // 明细弹窗 数据  合计
            $(".detailed__info_depositTotals").html(deposit * money_time);
            $(".detailed__info_excessTotals").html(excess * money_time);
            $(".detailed__info_all_coefficient").html(all_coefficient);
            $(".detailed__info_base_coeff").html(coefficient);

        }

        // 修改周数系数基准值
        function updateBaseCoff(obj) {
            var option = obj;

            var moneyTimes = 1.0;      //金额加成
            var coefficientTimes=1;    //系数加成
            //如果是在自由模式下
            if(is_free_mode()){
                moneyTimes = money_time_map[$("#free__status-text").html().trim()];
                coefficientTimes = coeff_time_map[$("#free__status-text").html().trim()];
                $("#free__base-coeff,.detailed__info_base_coeff").html(free_coefficient_map[option]);                                      //自由模式 目标周数 原系数
                $("#free__excess-value").html((excess_map[option] * moneytimes_map[option]).toFixed(0));       //总底金
                $("#free__deposit-value").html(parseFloat((deposit_map[option])).toFixed(0));                    //保证金
            }
            //如果是在日常模式下
            else{
                moneyTimes = money_time_map[$("#discipline__status-text").html().trim()];
                coefficientTimes = coeff_time_map[$("#discipline__status-text").html().trim()];
                //获取免签系数
                var avoidcoefficient = Number($("#discipline__avoid-coeff-value").text());
                //console.log(avoidcoefficient);
                $("#discipline__base-coeff,.detailed__info_base_coeff").html(((day_map[option])));                      //系数
                $("#discipline__excess-value").html((excess_map[option] * moneytimes_map[option]).toFixed(0)); //总底金
                $("#discipline__deposit-value").html((deposit_map[option]));        //保证金

                //$("#discipline__avoid-value").html(avoid_map[option]);
            }

            // 明细弹窗 数据 周数
            $(".detailed__info_timeSet").text(option);
            $(".detailed__info_excess").html(excess_map[option]);
            $(".detailed__info_excess_number").html(moneytimes_map[option]);
            $(".detailed__info_deposit").text((deposit_map[option]));
            updateTotal()
        }

        //设置尝新 参数-----------------------------------------------
        function init_() {
            var option="尝 新";
            var bbb;
            if(is_free_mode()){
                bbb= $("#free__time-text").text();
            }else{
                bbb= $("#discipline__time-text").text();
            }

            $("#discipline__avoid-coeff-value").text(0);
            //console.log(bbb);
            if(bbb=="一 周"){
                //console.log(1);
                $(".detailed__info_timeSet").text("一 周");

                if(is_free_mode()){
                    $("#free__base-coeff,#free__distance-coeff-times").text(1);
                    $("#free__status-coeff-value,#free__money_time").text(1);
                    $("#free__excess-value,#free__deposit-value").text(0.5);

                }else{
                    $("#discipline__base-coeff,#discipline__distance-coeff-times").text(1);
                    $("#discipline__status-coeff-value,#discipline__money_time").text(1);
                    $("#discipline__excess-value,#discipline__deposit-value").text(0.5);
                }

                // 明细弹窗 提高收益 数据
                $(".detailed__info_base_coeff,.detailed__info_excess_number").text(1);
                $(".detailed__info_depositTotals,.detailed__info_excessTotals").text(0.5);
                $(".detailed__info_deposit,.detailed__info_excess").text(0.5); //保证金，底金 为0.5
                $("#all-coefficient-value,#guarantee-cash,.detailed__info_moneyUp_money,.detailed__info_moneyUp_coeff,.detailed__info_all_coefficient,#pay-count").text(1);
                $(".detailed__info_moneyUp").text(option);

            }else if(bbb=="二 周"){
                //console.log(2);
                $(".detailed__info_timeSet").text("二 周");

                if(is_free_mode()){
                    $("#free__base-coeff,#free__distance-coeff-times").text(1);
                    $("#free__status-coeff-value,#free__money_time").text(2);
                    $("#free__excess-value,#free__deposit-value").text(0.5);
                }else{
                    $("#discipline__base-coeff,#discipline__distance-coeff-times").text(1);
                    $("#discipline__status-coeff-value,#discipline__money_time").text(2);
                    $("#discipline__excess-value,#discipline__deposit-value").text(0.5);
                }

                // 明细弹窗 提高收益 数据
                $(".detailed__info_base_coeff,.detailed__info_excess_number").text(1);
                $(".detailed__info_depositTotals,.detailed__info_excessTotals").text(1);  // 保证金合计，底金合计 为1
                $(".detailed__info_deposit,.detailed__info_excess").text(0.5); //保证金，底金 为0.5
                $("#all-coefficient-value,#guarantee-cash,.detailed__info_moneyUp_money,.detailed__info_moneyUp_coeff,.detailed__info_all_coefficient,#pay-count").text(2);
                $(".detailed__info_moneyUp").text(option);
            }else if(bbb=="三 周"){
                //console.log(3);
                $(".detailed__info_timeSet").text("三 周");

                if(is_free_mode()){
                    $("#free__base-coeff,#free__distance-coeff-times").text(1);
                    $("#free__status-coeff-value,#free__money_time").text(3);
                    $("#free__excess-value,#free__deposit-value").text(0.5);
                }else{
                    $("#discipline__base-coeff,#discipline__distance-coeff-times").text(1);
                    $("#discipline__status-coeff-value,#discipline__money_time").text(3);
                    $("#discipline__excess-value,#discipline__deposit-value").text(0.5);
                }

                // 明细弹窗 提高收益 数据
                $(".detailed__info_base_coeff,.detailed__info_excess_number").text(1);
                $(".detailed__info_depositTotals,.detailed__info_excessTotals").text(1.5);
                $(".detailed__info_deposit,.detailed__info_excess").text(0.5); //保证金，底金 为0.5
                $("#all-coefficient-value,#guarantee-cash,.detailed__info_moneyUp_money,.detailed__info_moneyUp_coeff,.detailed__info_all_coefficient,#pay-count").text(3);
                $(".detailed__info_moneyUp").text(option);

            }
        }
        //-----------------------------------------------

        // 免签卡  初始化
        $(".avoidNumber").hide();
        $(".avoidNumber_1,.avoidNumber_2,.avoidNumber_3").show();

        // 尝新初始化
        $("#free__status-text").text("尝 新");
        $("#discipline__status-text").text("尝 新");

        //jq 加载
        $(function(){
            //尝新----------------------------------------------
            init_();
            //-----------------------------------------------
            // 选择模式
            $(".setting-mode__button").click(function () {
                // 将当前按钮设置为活动按钮
                var active_btn = $(".setting-mode__button-active");
                active_btn.removeClass("setting-mode__button-active");
                $(this).addClass("setting-mode__button-active");
                // 隐藏所有布局
                $(".panel-layout").hide(); //自由模式
                $(".gen-title-text").hide();

                // 根据选择的种类打开不同的类别
                //console.log(is_free_mode()); //自由模式 true ;日常模式 false
                if(is_free_mode()){
                    $("#free-explain").show();
                    $("#free-panel").show();
                    $("#free-gen-title").show();
                }
                else{
                    $("#discipline-explain").show();
                    $("#discipline-panel").show();
                    $("#discipline-gen-title").show();
                }

                //尝新----------------------------------------------
                $("#free__status-text").text("尝 新");
                $("#discipline__status-text").text("尝 新");

                if(is_free_mode()){
                    var ccc=$("#free__status-text").text();
                    if(ccc=="尝 新"){
                        init_();
                    }
                    return
                }else{
                    var ccc=$("#discipline__status-text").text();
                    if(ccc=="尝 新"){
                        init_();
                    }
                    return
                }
                //------------------------------------------------------

                //重新计算总系数与押金值
                updateTotal();
            });

            // 点击设置时间按钮 （设置目标天数）
            $(".dropdown-menu .timeSetMenu").click(function () {
                //console.log($(this));

                if(is_free_mode()) {
                    var free_time =$("#free__time-text");  //自由模式周数
                    // 更新自由模式下的进度条
                    var _timeMap = {
                        "一 周": 6,
                        "二 周": 12,
                        "三 周": 18,
                        "一 月": 25,
                        "二 月": 50
                    };
                    var min_dis = _timeMap[$(this).html().trim()];  //目标最小 距离
                    var max_dis = min_dis * 5;                      //目标最大 距离
                    $("#distance-min").html(min_dis);
                    $("#distance-max").html(max_dis);
                    $("#free__distance-desc").text(min_dis+"km");
                    $(".mdl-slider").val(0);
                    $("#free__distance-coeff-times").html(1);
                    free_time.text($(this).text());
                }
                else{
                    $("#discipline__time-text").text($(this).text());
                    var a=$(this).html().trim();
                    if(a=="一 周"){
                        $("#discipline__avoid-text").text("一 张");
                        $("#discipline__avoid-coeff-value").text("0");
                        $(".avoidNumber").hide();
                        $(".avoidNumber_1,.avoidNumber_2,.avoidNumber_3").show();
                    }else if (a=="二 周"){
                        $("#discipline__avoid-text").text("二 张");
                        $("#discipline__avoid-coeff-value").text("0");
                        $(".avoidNumber").hide();
                        $(".avoidNumber_2,.avoidNumber_3,.avoidNumber_4,.avoidNumber_5,.avoidNumber_6").show();
                    }else if (a=="三 周"){
                        $("#discipline__avoid-text").text("三 张");
                        $("#discipline__avoid-coeff-value").text("0");
                        $(".avoidNumber").hide();
                        $(".avoidNumber_3,.avoidNumber_4,.avoidNumber_5,.avoidNumber_6,.avoidNumber_7,.avoidNumber_8,.avoidNumber_9").show();
                    }
                }
                // 尝新----------------------------------------
                if(is_free_mode()){
                    var ccc=$("#free__status-text").text();
                    if(ccc=="尝 新"){
                        init_();
                        return
                    }
                }else{
                    var ccc=$("#discipline__status-text").text();
                    if(ccc=="尝 新"){
                        init_();
                        return
                    }
                }
                // 尝新----------------------------------------
                updateBaseCoff($(this).html().trim());
            });

            //点击目标距离
            $(".mdl-slider").change(function (){
                var min_dis = 1;
                var max_dis = 5;
                if(is_free_mode()){
                    min_dis = parseInt($("#distance-min").html().trim());
                    max_dis = min_dis * 5;
                }
                //以 0.5 为单位
                var delta = (max_dis - min_dis) / 8;
                var dis = delta * parseInt($(this).val()) + min_dis;
                var cofficient_value = (1 + 0.1 * $(this).val() ).toFixed(1);
                if(is_free_mode()) {
                    $("#free__distance-desc,.detailed__distance_desc").text(dis+'km');
                    $("#free__distance-coeff-times").html(cofficient_value);
                }
                else{
                    $("#discipline__distance-desc,.detailed__distance_desc").text(dis+'km/天');
                    $("#discipline__distance-coeff-times").html(cofficient_value);
                }

                $(".detailed__distance-coeff").text(cofficient_value);

                // 尝新----------------------------------------
                if(is_free_mode()){
                    var ccc=$("#free__status-text").text();
                    //console.log(ccc);
                    if(ccc=="尝 新"){
                        init_();
                        return
                    }
                }else{
                    var ccc=$("#discipline__status-text").text();
                    //console.log(ccc);
                    if(ccc=="尝 新"){
                        init_();
                        return
                    }

                }

                // 尝新----------------------------------------
                updateTotal();
            });

            // 点击提高收益
            $(".dropdown-menu .statusSetMenu").click(function () {
                //console.log($(this).html().trim()); //获取选择的东西
                var option=$(this).html().trim();

                //尝新----------------------------------------------
                if(option=="尝 新"){

                    if(is_free_mode()){
                        $("#free__status-text").text(option);
                    }else{
                        $("#discipline__status-text").text(option);

                    }

                    //console.log("尝新");

                    init_();
                    return
                }else{
                    var a= $("#discipline__time-text").text();
                    if(a=="一 周"){
                        $("#discipline__avoid-text").text("一 张");
                        $("#discipline__avoid-coeff-value").text("0");
                        $(".avoidNumber").hide();
                        $(".avoidNumber_1,.avoidNumber_2,.avoidNumber_3").show();
                    }else if (a=="二 周"){
                        $("#discipline__avoid-text").text("二 张");
                        $("#discipline__avoid-coeff-value").text("0");
                        $(".avoidNumber").hide();
                        $(".avoidNumber_2,.avoidNumber_3,.avoidNumber_4,.avoidNumber_5,.avoidNumber_6").show();
                    }else if (a=="三 周"){
                        $("#discipline__avoid-text").text("三 张");
                        $("#discipline__avoid-coeff-value").text("0");
                        $(".avoidNumber").hide();
                        $(".avoidNumber_3,.avoidNumber_4,.avoidNumber_5,.avoidNumber_6,.avoidNumber_7,.avoidNumber_8,.avoidNumber_9").show();
                    }

                    $(".mdl-slider").val(0);

                    $(".mdl-slider").attr("callback",0);

                    if(is_free_mode()){
                        $(".mdl-slider").val(0);
                        $("#free__distance-coeff-times").text(1);
                        var ll=$("#distance-min").text();
                        $("#free__distance-desc").text(ll+"km")
                    }else{
                        $("#discipline__distance-coeff-times").text(1);  //距离系数
                        $("#discipline__distance-desc").text("1km/天")
                    }


                    /*
                    var min_dis = 1;
                    var max_dis = 5;
                    if(is_free_mode()){
                        min_dis = parseInt($("#distance-min").html().trim());
                        max_dis = min_dis * 5;
                    }
                    //以 0.5 为单位
                    var delta = (max_dis - min_dis) / 8;
                    var dis = delta * 1 + min_dis;
                    var cofficient_value = (1 + 0.1 * 1 ).toFixed(1);
                    if(is_free_mode()) {
                        $("#free__distance-desc,.detailed__distance_desc").text(dis+'km');
                        $("#free__distance-coeff-times").html(cofficient_value);
                    }
                    else{
                        $("#discipline__distance-desc,.detailed__distance_desc").text(dis+'km/天');
                        $("#discipline__distance-coeff-times").html(cofficient_value);
                    }

                    $(".detailed__distance-coeff").text(cofficient_value);
 */

                }
                //尝新----------------------------------------------

                if(is_free_mode()){
                    $("#free__status-text").text($(this).text());
                    updateBaseCoff($("#free__time-text").text());
                    console.log(coeff_time_map[option]);
                    $("#free__status-coeff-value,.detailed__info_moneyUp_coeff").html(coeff_time_map[option]);
                    $("#free__money_time,.detailed__info_moneyUp_money").html(money_time_map[option]);
                }
                else{
                    $("#discipline__status-text").text($(this).text());
                    updateBaseCoff($("#discipline__time-text").text());
                    console.log(coeff_time_map[option]);
                    $("#discipline__status-coeff-value,.detailed__info_moneyUp_coeff").html(coeff_time_map[option]);
                    $("#discipline__money_time,.detailed__info_moneyUp_money").html(money_time_map[option]);
                }
                //updateBaseCoff($("#discipline__time-text").text());

                // 明细弹窗 提高收益 数据
                $(".detailed__info_moneyUp").text(option);
                //console.log(option);

                updateTotal()
            });

            // 点击添加免签卡
            $(".dropdown-menu .avoidSetButton").click(function () {
                //console.log($(this).html().trim()); //获取选择的东西
                var option=$(this).html().trim();
                $("#discipline__avoid-text").text(option);
                var avoid_number = parseFloat(avoid_number_map[option]);
                var a=$("#discipline__time-text").text();
                //console.log(a);
                //console.log(avoid_map[a]);
                //console.log(avoid_number);
                var b= parseFloat(avoid_map[a]);  //获取免费张数
                var c = avoid_number-b;              //获取 非免费 数量
                //console.log(c);
                if(c >= 0){
                    $("#discipline__avoid-coeff-value,.detailed__info_avoid_coeff").html(c*2)
                }

                // 尝新----------------------------------------
                if(is_free_mode()){
                    var ccc=$("#free__status-text").text();
                    //console.log(ccc);
                    if(ccc=="尝 新"){
                        init_();
                        return
                    }

                }else{
                    var ccc=$("#discipline__status-text").text();
                    //console.log(ccc);
                    if(ccc=="尝 新"){
                        init_();
                        return
                    }
                }
                //尝新----------------------------------------------
                updateTotal()
            });

            //添加QQ 群
            $("#qqGroupCode").click(function () {
                $(".qqGroupCode_box").css("opacity","1");
                $(".qqGroupCode_box").show();
                $(".mask_on").show();
            });



            // 活动规则说明 弹窗
            $(".rule_box_div").click(function () {
                $(".rule_box_text").show();
                $(".mask_on").show();
            });

            //明细弹窗
            $(".detailed_box_div").click(function () {
                if(is_free_mode()) {
                    //自由模式
                    $(".detailed__info_avoid_box").hide();
                    //$(".detailed__distance_desc").text($("#free__distance-desc").text());
                    //$(".detailed__distance-coeff").text($("#free__distance-coeff-times").text());

                }else{
                    $(".detailed__info_avoid_box").show();
                    //$(".detailed__distance_desc").text($("#discipline__distance-desc").text());
                    //$(".detailed__distance-coeff").text($("#discipline__distance-coeff-times").text())
                }

                $(".detailed_box_text").show();
                $(".mask_on").show();

            });
             //关闭弹窗
            $(".mask_on").click(function () {
                $(".rule_box_text").hide();
                $(".detailed_box_text").hide();
                $(".qqGroupCode_box").hide();
                $(this).hide();
            });
            $(".mask_on__1").click(function () {
                $(".qqGroupCode_box").hide();
                $(".qqGroupCode_box").css("opacity","1");
                $(this).hide();
            });




            // 点击 生成 目标
            $("#gen-btn").click(function () {
                $("#gen-popup").popup();
                $("body").addClass("popup-open");
                //$("#reality_price").text(parseFloat($("#pay-count").html().trim()).toFixed(2));
                var chk = document.getElementById('weuiAgree');

                var balance_price = "{{ balance }}";
                var deserve_price=parseFloat($("#pay-count").html().trim()).toFixed(2);
                var reality_price=deserve_price;

                if (chk.checked) {
                    //使用余额
                    balance_price = Number(balance_price);
                    if(deserve_price > balance_price){
                        reality_price = deserve_price-balance_price;
                    }else{
                        reality_price=0.01;
                    }

                } else {
                    //不使用余额
                    reality_price=deserve_price;
                }
                $("#reality_price").text(parseFloat(reality_price).toFixed(2));
            });

            $("#weuiAgree").click(function () {
                //console.log("点击");
                var chk = document.getElementById('weuiAgree');
                var balance_price = "{{ balance }}";
                var deserve_price=parseFloat($("#pay-count").html().trim()).toFixed(2);
                var reality_price=deserve_price;

                if (chk.checked) {
                    //使用余额
                    balance_price = Number(balance_price);
                    if(deserve_price > balance_price){
                        reality_price = deserve_price-balance_price;
                    }else{
                        reality_price=0.01;
                    }

                } else {
                    //不使用余额
                    reality_price=deserve_price;
                }
                $("#reality_price").text(parseFloat(reality_price).toFixed(2));

            });

            // 微信支付
            wx.ready(function() {
                $("#pay-btn").click(function () {
                    $.showLoading();

                    $(".weui-toast_content").text("提交中...");

                    var ccc="";
                    var ddd="";
                    if(is_free_mode()){
                        ccc=$("#free__status-text").html().trim();
                        ddd=$("#free__time-text").html().trim();
                    }else{
                        ccc=$("#discipline__status-text").html().trim();
                        ddd=$("#discipline__time-text").html().trim();
                    }
                    var down_num=moneytimes_map[ddd];

                    var moneyTimes = money_time_map[ccc];

                    if(ccc == "尝 新"){
                        //alert(ccc);
                        if(ddd == "一 周"){
                            moneyTimes=1;
                            down_num =1;
                        }else if (ddd == "二 周"){
                            moneyTimes=2;
                            down_num =2;
                        }else if (ddd == "三 周"){
                            moneyTimes=3;
                            down_num =3;
                        }
                    }else{

                    }


                    //alert("金钱系数："+moneyTimes);

                    // 底金
                    var excess = parseFloat($("#discipline__excess-value").html()) * moneyTimes;


                    // 保证金
                    var deposit = parseFloat($("#discipline__deposit-value").html()) * moneyTimes;


                    // 总系数
                    var coefficient = parseFloat($("#all-coefficient-value").html());

                    // 跑步类型
                    var runningtype = "DES";
                    // 目标天数
                    var goalday = day__map[$("#discipline__time-text").html().trim()];

                    // 模式
                    var mode = mode_map[$("#discipline__status-text").html().trim()];

                    // 目标距离
                    var distance = parseFloat($("#discipline__distance-desc").html());
                    // 免签卡
                    //var avoid = parseInt($("#discipline__avoid-value").html());
                    var option_docum = $("#discipline__avoid-text").html().trim();
                    var avoid = parseInt(avoid_number_map[option_docum]);

                    var price=parseInt($("#guarantee-cash").html());

                    //实付金额 （扣除之后）
                    var reality_price=parseFloat($("#pay-count").html());

                    //应付金额 （）
                    var deserve_price=parseFloat(reality_price);


                    if(is_free_mode()){
                        excess = parseFloat($("#free__excess-value").html())* moneyTimes;
                        deposit = parseFloat($("#free__deposit-value").html())* moneyTimes;
                        runningtype = "FREE";
                        goalday = day__map[$("#free__time-text").html().trim()];
                        mode = mode_map[$("#free__status-text").html().trim()];
                        distance = parseFloat($("#free__distance-desc").html());
                        avoid=0;
                    }


                    var chk = document.getElementById('weuiAgree');

                    var balance_price = "{{ balance }}";
                    var rem = 1;
                    if (chk.checked) {
                        //使用余额
                        rem = 1;
                        balance_price = parseFloat(Number(balance_price));
                        if(deserve_price > balance_price){
                            reality_price = parseFloat(Number(deserve_price*100-balance_price*100)/100);
                        }else{
                            reality_price=parseFloat(0.01);
                        }
                        //console.log("使用余额");
                    } else {
                        //不使用余额
                        rem = 0;
                        reality_price = deserve_price;
                        //console.log("不使用余额");
                    }



                    //alert("底金次数"+down_num);

                    console.log("保证金");
                    console.log(deposit);

                    //alert("保证金"+deposit);

                    console.log("底金");
                    console.log(excess);
                    //alert("底金"+excess);


                    console.log("总系数");
                    console.log(coefficient);

                    console.log("目标天数");
                    console.log(goalday);
                    //alert(goalday);

                    console.log("模式");
                    console.log(mode);

                    console.log("距离");
                    console.log(distance);
                    //alert(distance);

                    //实付金额 （扣除之后）
                    console.log("实付金额 （扣除之后）");
                    console.log(reality_price);

                    //应付金额 （）
                    console.log("应付金额");
                    console.log(deserve_price);

                    console.log($("#activity-get__id").html().trim());
                    //$.hideLoading();
                    console.log(avoid);
                    //alert("免签数量："+avoid);

                    //alert("实付金额 （扣除之后）："+reality_price);
                    //alert("应付金额："+deserve_price);
                    //alert("底金："+excess);
                    //alert("保证金："+deposit);

                    $.ajax({
                        type: "post",
                        url: "/api/create_goal",
                        data:{
                            activity : $("#activity-get__id").html().trim(),
                            goal_type: runningtype,
                            down_payment: excess,
                            guaranty: deposit,
                            coefficient: coefficient,
                            mode: mode,
                            goal_day: goalday,
                            distance: distance,
                            nosign: avoid,
                            reality:reality_price,
                            deserve:deserve_price,
                            down_num:down_num
                        },
                        success: function (reponse) {
                            //alert(reponse.rem);
                            $.hideLoading();
                            if(reponse.rem== "0"){
                                $.toast("已参加活动！", "forbidden", function() {
                                  //do something
                                    //window.location.reload();
                                    window.location.href = "/activity/index"
                                });
                                return
                            }
                            //console.log(reponse)
                            //alert(reponse);
                            //alert("实付金额 （扣除之后）"+reality_price);
                            //alert("rem:"+rem);
                            $.post('/wechatpay', {
                                'goal': reponse['goal'],
                                'reality':reality_price,
                                'deserve':deserve_price,
                                'rem':rem
                            },function (response) {
                                {% if DEBUG %}
                                // 唤起微信支付接口
                                    $.post('/payback', {
                                        'goal':reponse['goal']
                                    },function (res) {
                                            // 重定向到分享页面
                                        //alert("3");
                                        //alert(reponse);
                                        window.location.href = "/goal/share/" + reponse['goal'];
                                    });
                                {% else %}
                                wx.chooseWXPay({
                                    timestamp: response['timeStamp'], // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符
                                    nonceStr: response['nonceStr'], // 支付签名随机串，不长于 32 位
                                    package: response['package'], // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\*\*\*）
                                    signType: response['signType'], // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'
                                    paySign: response['paySign'], // 支付签名
                                    success: function (res) {
                                        // 重定向到分享页面
                                        window.location.href = "/goal/share/" + reponse['goal'];
                                    }
                                });
                                {% endif %}
                            })
                        },
                        error:function(reponse){
                            //alert("错误");
                            //alert(reponse);

                            $.hideLoading();
                            //console.log(reponse)
                        }
                    })
                });
            });

            // // 微信支付

            /* 跳转页面 */
            $("#backup-btn").click(function () {
                window.location.href = "index";
            });

        });


	</script>
        <!-- 获取擂主押金 -->
    <script>
         //指定10秒刷新一次
         //search_deposit();
        function search_deposit() {
            //console.log("获取擂主押金");
            setTimeout('search_deposit()',100000);
            $.ajax({
                type: "GET",
                url: "/api/search_deposit",
                data:{
                },
                success: function (res) {
                    $.hideLoading();
                    $(".challenger_deposit").hide();
                    //console.log("成功");
                    //console.log(res);
                    if(res.status == "200"){
                        var data=String(parseInt(res.winner));
                        var wwww=Number({{ app.bonus_all|floatformat:"0" }});
                        //console.log(wwww);
                        var uuuuu=Number(res.winner)+wwww-10000;
                        //console.log(uuuuu);
                        //$("#app_bonus_all").text(uuuuu);

                        //console.log(data);
                        var winner=data.split("");
                        //console.log(winner.length);
                        var l=winner.length-1;
                        //console.log(l);
                        for (var i=l;i>=0;i--) {
                            //console.log("i"+i);

                            $(".challenger_deposit_"+i).parent().show();
                            $(".challenger_deposit_"+i).text(winner[i]);
                        }
                    }else if (res.status == "403"){
                        $(".challenger_deposit_"+1).parent().show();
                        $(".challenger_deposit_"+1).text(0);
                    }else{
                        $(".challenger_deposit_").parent().hide();
                    }

                    //console.log(res.winner.toString(0));
                },
                error:function(res){
                    $.hideLoading();
                    //console.log("错误");
                    //console.log(res);
                    $(".challenger_deposit_").parent().hide();
                }
            })
        }



    </script>


</body>

</html>