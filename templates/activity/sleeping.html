<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
	<meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0 minimum-scale=0.5, user-scalable=no" />
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
	<title>作息</title>
	<link rel="stylesheet" href="/static/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="/static/css/weui.min.css" />
	<link rel="stylesheet" href="/static/css/material.min.css">
	<link rel="stylesheet" href="/static/css/jquery-weui.min.css">
{#	<link rel="stylesheet" href="/static/css/goal.css" />#}
	<link rel="stylesheet" href="/static/css/activity.css" />
{#	<link rel="stylesheet" href="/static/css/sleeping.css" />#}
    <link rel="stylesheet" href="//at.alicdn.com/t/font_591099_seftw34bkl04quxr.css"/>
    <link rel="stylesheet" href="/static/css/public.css">

    <!-- 样式重置 -->
    <style>
        .setting-item{
            margin-right: 0;
        }
        .dropdown-menu{
            min-width: 60px;
        }
        .block-panel{
            overflow: initial;
        }
        .setting-mode__background{
            width: 50vw;
            height: 1.8rem;
            position: relative;
            background-color: rgba(0,0,0,0);
            border:1px solid rgba(31,162,255,1);
        }
        #getUpEarly-mode{
            position: absolute;
            right: 0vw;
        }
        #sleeping-mode{
            position: absolute;
            left: 0vw;
            text-align: center;
            padding: 0 15px;
        }
        .setting-mode__button-active{
            z-index: 2;
        }
        .setting-mode__button{
            width: 55%;
            height: 1.7rem;
        }
        .mdl-card{
            min-height: 165px;
        }
        .header-mask{
            height: 165px;
        }
        .block-panel,.setting-list,.setting-item{
            margin-top:0;
            padding-top: 5px;
        }
        .image-header{
            background: url(/static/images/sleeping/sleeping_banner@2x.png) center / cover;
        }
        .header-mask{
            height: 90px;
            position: absolute;
            bottom: 0;
            width: 100%;
            {#background-color: rgba(0,0,0,1);#}
            background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.9));
        }

        #sleeping__timeSetButton, #getUpEarly__timeSetButton {
            padding: 0 0.5rem;
            color: #1fa2ff;
            background: #ffffff;
            margin-right: 0;
            border: 1px solid #f5f6f9;
            width: 80px;
            height: 32px;
            margin-top: 0;
        }
        .dropdown{
            margin-right: 15px;
            width: 75px;
        }
        .dropdown-menu{
            width: 80px;
            min-width: 80px;
        }

        .dropdown-menu>li>a{
            color: #1fa2ff;
        }
         #sleeping-panel .p_1,#getUpEarly-panel .p_1{
            text-align: center;
            color: rgba(31,162,255,1);
            font-size: 12px;
            line-height: 20px;
            margin:5px 10px  auto;
        }
         .detailed_box_div{
            margin:10px 20px;height: 30px;line-height: 30px;border-radius:16px; -webkit-appearance:none;overflow: hidden;
        }

         .detailed_box_div .active{
             background-color:rgba(31,162,255,1);
             color: white;
             {#border: 1px solid rgba(255, 255, 255, 1);#}
             position: relative;
         }


        .detailed_box_div .weui-flex__item{
            line-height: 30px;
            height: 30px;
            text-align: center;
            {#border-radius: 15px;#}
        }
        .show_box{
            font-size: 12px;
            margin: 20px;
            line-height: 40px;
            height: 70px;
            border-radius: 5px;
            position: relative;
            color: white;
        }

    </style>
    <style>

        .mask_on{
            position: fixed;
            z-index: 1000;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,.6);
        }

        .mask_on_1,.mask_on_2{
            position: fixed;
            z-index: 1000;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,.6);
        }
        .mask_on__1{
            position: fixed;
            z-index: 99999;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,.0);
        }
        .activityDescription_box,.qqGroupCode_box{
            position: fixed;
            z-index: 5000;
            width: 80%;
            max-width: 300px;
            max-height: 80%;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%,-50%);
            transform: translate(-50%,-50%);
            background-color: #fff;
            text-align: left;
            padding: 25px;
            font-size: 10px;
            border-radius: 10px;
            color:rgba(0,0,0,0.5)
        }
        .activityDescription_box{
            overflow-y: scroll;
            width: 80%;
            padding: 10px;
        }

        .activityDescription_box .content_box{
            overflow-y: scroll;
            height: initial;
            width: 100%;
            padding: 10px;
        }

        .qqGroupCode_box{
            overflow: hidden;
        }
        .show_box {

        }
        .bg__1{
            background: url("/static/images/sleeping/a_bg_1@2x.png") no-repeat;
            background-size: cover;
        }
        .triangle_1,.triangle_2{
            position: absolute;
            top: -20px;
            border-top: 10px solid rgba(0,131,215,0);
            border-bottom: 10px solid rgba(0,131,215,1);
            border-left: 10px solid rgba(0,131,215,0);
            border-right: 10px solid rgba(0,131,215,0);
            left: 85%;
        }
    </style>
    <!-- 样式重置 -->
    <style>
        .block-panel::after{
            border: none;
        }
        .block-panel{
            background-color: initial;
        }
        .down_payment_active,.coefficient_active{
            color: white;
            background-color:rgba(255,171,24,1)
        }
    </style>

</head>

<body ontouchstart>
	<!--页面上方的活动信息栏-->
	<div class="image-header mdl-card mdl-shadow--2dp" style="top: 0;z-index: 3;">
		<div class="header-title" style="display: none">作息</div>
		<div class="header-mask"></div>
		<div class="header-desc mdl-card__supporting-text">
			<!--跑步页首-->
			<div class="row-center between">
                <div class="coloum-space" style="width: 30%">
                    <div class="header_avatar-text">
                        {{ app.active_participants }}人参与
                    </div>
                    <div class="header__avatars">
                        {% for person in persons %}
                        <img class="img-circle" src="{{ person.headimgurl }}">
                        {% endfor %}
                    <!--

                    -->
                        <img class="img-circle" src="/static/fake/running_1.jpg">
                        <img class="img-circle" src="/static/fake/running_2.jpg">
                        <img class="img-circle" src="/static/fake/running_3.jpg">
                        <img class="img-circle" src="/static/fake/running_4.jpg">
                        <img class="img-circle" src="/static/fake/running_5.jpg">

				    </div>
                </div>
				<div class="coloum-space" style="position: absolute;left: 50%;transform: translate(-50%,0%);">
                    <div class="header_avatar-text center">总系数</div>
					<div class="header__text">
                        <span style="color: #1fa2ff; font-weight: 500;">{{ app.coefficient }}</span>
                    </div>
				</div>
				<div class="coloum-space">
                    <div class="header_avatar-text center">奖金池</div>
                    <div class="header__text">
                        <span style="color: #ff931f; font-weight: 500;" id="app_bonus_all">{{ app.bonus_all|floatformat:"0" }}</span>
                        <span>元</span>
                    </div>
				</div>
			</div>
		</div>



        <div id="qqGroupCode" style="position: absolute;right:20px;top: 20px;width: 30px;">
           <img src="/static/images/user/share@2x.png" style="width: 100%;">
        </div>

        <!-- 规则说明 -->
        <div id="activityDescription_but" class="rule_box_div" style="position: absolute;right:20px;top: 55px;width: 30px;">
            <img src="/static/images/user/doubt@2x.png" style="width: 100%;">
        </div>
	</div>
    <!-- 占位 -->
    <div class="hide" style="height: 165px;width: 100%"></div>

    <!-- 整体内容 -->
    <div style="display: block;">
        <div class="block-panel patternSelection">
            <ul class="setting-list">
                <li class="setting-item" style="justify-content: center;">
                    <div class="setting-mode__background">
                        <button id="sleeping-mode" class="setting-mode__button setting-mode__button-active">
                            睡眠模式
                        </button>
                        <button id="getUpEarly-mode" class="setting-mode__button">
                            早起模式
                        </button>
                    </div>
                </li>

                <!-- 睡眠模式 -->
                <div class="panel-layout" id="sleeping-panel">
                    <p class="p_1">需完成睡前与早起打卡</p>
                    <!-- 目标周数
                    border: 1px solid rgba(203, 206, 209,1);
                    -->
                    <div class="" style="margin: 10px;border-radius: 5px;font-size: 16px;">
                        <div style="display: block;width: 100%;height:auto;">
                            <p style="text-align: center;display: block;margin-top: 10px;font-size: 18px;">
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                     width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                                <path fill="#bc6eff" d="M27.692,5H25V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H13V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H8.308
                                    C5.381,5,3,7.9,3,10.857V26.13C3,29.087,5.381,31,8.308,31h19.385C30.619,31,33,29.087,33,26.13V10.857C33,7.9,30.619,5,27.692,5z
                                     M8.308,7H11v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h10v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h2.692
                                    C29.517,7,31,9.002,31,10.857v0.789C30.851,11.558,30.686,11,30.5,11h-25c-0.186,0-0.351,0.558-0.5,0.647v-0.789
                                    C5,9.002,6.483,7,8.308,7z M27.692,29H8.308C6.483,29,5,27.985,5,26.13V13.34C5.149,13.429,5.314,13,5.5,13h25
                                    c0.186,0,0.351,0.429,0.5,0.34v12.79C31,27.985,29.517,29,27.692,29z"/>
                                </svg>
                                目标周数
                            </p>
                        </div>


                        <div class="weui-flex detailed_box_div border_T">
                            <div class="weui-flex__item sleeping_chenge_click border_T_R" sta="1" coefficient="12" deposit="10" style="text-align: center">
                                1周
                            </div>
                            <div class="weui-flex__item sleeping_chenge_click border_T_R" sta="2" coefficient="18" deposit="20" style="text-align: center">
                                2周
                            </div>
                            <div class="weui-flex__item sleeping_chenge_click border_T_R" sta="3" coefficient="24" deposit="30" style="text-align: center">
                                3周
                            </div>
                            <div class="weui-flex__item sleeping_chenge_click sleeping_chenge_click_4 active"  sta="4" coefficient="24" deposit="50" style="text-align: center">
                                无限
                            </div>

                        </div>

                        <div class="show_box  bg__1" style="">
                            <div class="triangle_1" style="">

                            </div>
                            <div class="weui-flex" style="height: 70px;">
                                <div class="weui-flex__item" style="text-align: center">
                                    <div style="display: block;width: 20px;height: 20px;margin: auto;margin-top: 10px">
                                        <img src="/static/images/sleeping/a_i_1@2x.png" style="width: 100%;display: block">
                                    </div>
                                    <div>
                                        系数：<span class="sleeping_coefficient" style="display: none">24</span><span class="sleeping_coefficient_4">24+1.2/天（最高60）</span>
                                    </div>

                                </div>
                                <div class="weui-flex__item" style="text-align: center;-webkit-flex: 1;flex:1">
                                    <div style="display: block;width: 20px;height: 20px;margin: auto;margin-top: 10px">
                                        <img src="/static/images/sleeping/a_i_2@2x.png" style="width: 100%;display: block">
                                    </div>
                                    <div>
                                        保证金：<span class="sleeping_deposit">50</span>元
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- 目标周数 -->

                    <li class="setting-item" style="border-bottom: 1px solid rgba(203, 206, 209,1);display: none">
                        <div>
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                 width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                            <path fill="#bc6eff" d="M27.692,5H25V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H13V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H8.308
                                C5.381,5,3,7.9,3,10.857V26.13C3,29.087,5.381,31,8.308,31h19.385C30.619,31,33,29.087,33,26.13V10.857C33,7.9,30.619,5,27.692,5z
                                 M8.308,7H11v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h10v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h2.692
                                C29.517,7,31,9.002,31,10.857v0.789C30.851,11.558,30.686,11,30.5,11h-25c-0.186,0-0.351,0.558-0.5,0.647v-0.789
                                C5,9.002,6.483,7,8.308,7z M27.692,29H8.308C6.483,29,5,27.985,5,26.13V13.34C5.149,13.429,5.314,13,5.5,13h25
                                c0.186,0,0.351,0.429,0.5,0.34v12.79C31,27.985,29.517,29,27.692,29z"/>
                            </svg>
                        </div>
                        <div style="flex: 8;">
                            <div class="setting-title">目标周数</div>
                            <p class="setting-desc">
                                <!-- -->
                                原系数: <span id="discipline__base-coeff">12</span>&nbsp;
                                保证金: <span id="discipline__deposit-value">20</span>元&nbsp;
                        </div>
                        <div class="setting-item__right position-right">
                            <div class="dropdown">
                                <button class="btn btn-default dropdown-toggle" type="button" id="sleeping__timeSetButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    <span id="sleeping__time-text">无 限</span>
                                    <span>
                                        <i class="iconfont icon-xiaozhuanhuan-" style="font-size: 0.4rem;"></i>
                                    </span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="sleeping__timeSetButton">
                                    <li><a class="timeSetMenu" href="#">一 周</a></li>
                                    <li><a class="timeSetMenu" href="#">二 周</a></li>
                                    <li><a class="timeSetMenu" href="#">三 周</a></li>
                                    <li><a class="timeSetMenu" href="#">无 限</a></li>

                                </ul>
                            </div>
                        </div>
                    </li>

                </div>


                <!-- 早起模式 -->
                <div class="panel-layout" id="getUpEarly-panel" style="display: none;">
                    <p class="p_1">仅需完成早起打卡</p>
                    <!-- 目标周数 -->
                    <div class="" style="margin: 10px;border-radius: 5px;font-size: 16px;">
                        <div style="display: block;width: 100%;height:auto;">
                            <p style="text-align: center;display: block;margin-top: 10px;font-size: 18px;">
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                     width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                                <path fill="#bc6eff" d="M27.692,5H25V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H13V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H8.308
                                    C5.381,5,3,7.9,3,10.857V26.13C3,29.087,5.381,31,8.308,31h19.385C30.619,31,33,29.087,33,26.13V10.857C33,7.9,30.619,5,27.692,5z
                                     M8.308,7H11v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h10v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h2.692
                                    C29.517,7,31,9.002,31,10.857v0.789C30.851,11.558,30.686,11,30.5,11h-25c-0.186,0-0.351,0.558-0.5,0.647v-0.789
                                    C5,9.002,6.483,7,8.308,7z M27.692,29H8.308C6.483,29,5,27.985,5,26.13V13.34C5.149,13.429,5.314,13,5.5,13h25
                                    c0.186,0,0.351,0.429,0.5,0.34v12.79C31,27.985,29.517,29,27.692,29z"/>
                                </svg>
                                目标周数
                            </p>
                        </div>

                        <div class="weui-flex detailed_box_div border_T">
                            <div class="weui-flex__item getUpEarly_chenge_click border_T_R" sta="1" coefficient="10" deposit="10" style="text-align: center">
                                1周
                            </div>
                            <div class="weui-flex__item getUpEarly_chenge_click border_T_R" sta="2" coefficient="15" deposit="20" style="text-align: center">
                                2周
                            </div>
                            <div class="weui-flex__item getUpEarly_chenge_click border_T_R" sta="3" coefficient="20" deposit="30" style="text-align: center">
                                3周
                            </div>
                            <div class="weui-flex__item getUpEarly_chenge_click getUpEarly_chenge_click_4 active"  sta="4" coefficient="20" deposit="50" style="text-align: center">
                                无限
                            </div>
                        </div>

                        <div  class="show_box bg__1"  style="">
                            <div class="triangle_2" style="">

                            </div>
                            <div class="weui-flex" style="height: 40px;">
                                <div class="weui-flex__item" style="text-align: center">
                                    <div style="display: block;width: 20px;height: 20px;margin: auto;margin-top: 10px">
                                        <img src="/static/images/sleeping/a_i_1@2x.png" style="width: 100%;display: block">
                                    </div>
                                    <div>
                                        系数：<span class="getUpEarly_coefficient" style="display: none">20</span><span class="getUpEarly_coefficient_4">20+1/天（最高50）</span>
                                    </div>

                                </div>
                                <div class="weui-flex__item" style="text-align: center;-webkit-flex: 1;flex:1;">
                                    <div style="display: block;width: 20px;height: 20px;margin: auto;margin-top: 10px">
                                        <img src="/static/images/sleeping/a_i_2@2x.png" style="width: 100%;display: block">
                                    </div>
                                    <div>
                                        保证金：<span class="getUpEarly_deposit">30</span>元
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div class="weui-flex detailed_box_div" style="display: none">
                            <div class="weui-flex__item" style="text-align: center">
                                <p>目标时长</p>
                                <p>标准系数</p>
                                <p>保&nbsp;证&nbsp;金</p>
                                <p>选&#12288;&#12288;择</p>
                            </div>
                            <div class="weui-flex__item getUpEarly_chenge_click" sta="1">
                                <p>1周</p>
                                <p>1</p>
                                <p><span class="deposit">30</span>元</p>
                                <p class="getUpEarly_chenge getUpEarly_chenge_1" style="opacity: 0">&radic;</p>
                            </div>
                            <div class="weui-flex__item getUpEarly_chenge_click" sta="2">
                                <p>2周</p>
                                <p>2</p>
                                <p><span class="deposit">30</span>元</p>
                                <p class="getUpEarly_chenge getUpEarly_chenge_2" style="opacity: 0">&radic;</p>
                            </div>
                            <div class="weui-flex__item getUpEarly_chenge_click" sta="3">
                                <p>3周</p>
                                <p>3</p>
                                <p><span class="deposit">30</span>元</p>
                                <p class="getUpEarly_chenge getUpEarly_chenge_3" style="opacity: 0">&radic;</p>
                            </div>
                            <div class="weui-flex__item getUpEarly_chenge_click font_color_1" sta="4">
                                <p>无限</p>
                                <p>4</p>
                                <p><span class="deposit">30</span>元</p>
                                <p class="getUpEarly_chenge getUpEarly_chenge_4" style="opacity: 1">&radic;</p>
                            </div>

                        </div>

                    </div>

                    <!-- 目标周数 -->
                    <li class="setting-item" style="border-bottom: 1px solid rgba(182,193,200,0.3);display: none">
                        <div>
                             <!---->
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                 width="20px" height="20px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
                            <path fill="#bc6eff" d="M27.692,5H25V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H13V4.494c0-0.552-0.447-1-1-1s-1,0.448-1,1V5H8.308
                                C5.381,5,3,7.9,3,10.857V26.13C3,29.087,5.381,31,8.308,31h19.385C30.619,31,33,29.087,33,26.13V10.857C33,7.9,30.619,5,27.692,5z
                                 M8.308,7H11v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h10v1.494c0,0.552,0.447,1,1,1s1-0.448,1-1V7h2.692
                                C29.517,7,31,9.002,31,10.857v0.789C30.851,11.558,30.686,11,30.5,11h-25c-0.186,0-0.351,0.558-0.5,0.647v-0.789
                                C5,9.002,6.483,7,8.308,7z M27.692,29H8.308C6.483,29,5,27.985,5,26.13V13.34C5.149,13.429,5.314,13,5.5,13h25
                                c0.186,0,0.351,0.429,0.5,0.34v12.79C31,27.985,29.517,29,27.692,29z"/>
                            </svg>

                        </div>
                        <div>
                            <div class="setting-title" >目标周数</div>
                            <p class="setting-desc">
                                原系数: <span id="free__base-coeff">10</span>&nbsp;
                                保证金: <span id="free__deposit-value">20</span>元&nbsp;
                            </p>
                        </div>

                        <div class="setting-item__right position-right">
                            <div class="dropdown">
                                <button class="btn btn-default dropdown-toggle" type="button" id="getUpEarly__timeSetButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    <span id="getUpEarly__time-text">无 限</span>
                                    <span>
                                        <i class="iconfont icon-xiaozhuanhuan-" style="font-size: 0.4rem;"></i>
                                    </span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="getUpEarly__timeSetButton">
                                    <li><a class="timeSetMenu" href="#">一 周</a></li>
                                    <li><a class="timeSetMenu" href="#">二 周</a></li>
                                    <li><a class="timeSetMenu" href="#">三 周</a></li>
                                    <li><a class="timeSetMenu" href="#">无 限</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>

                </div>

                <!--进阶 -->
                <div>
                    <!-- 进阶按钮 -->
                    <div class="" style="margin-top:0px;height: 30px;line-height: 30px;">
                        <div class="moreSettings" style="display: block;float: right;height: 30px;line-height: 30px;color:#B6C1C8;background-color: rgba(255,255,255,0) ">
                            <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_default"  style=";color:#B6C1C8;background-color: rgba(255,255,255,0)">[+进阶设置]</a>
                        </div>
                    </div>

                    <!-- 进阶设置 -->
                    <div class="weui-cells moreSettings_box hide fadeInUp" style="font-size: inherit;margin-top: 0">

                        <!--  添加底金 -->
                        <!--
                        <div class="weui-cell down_payment_box" style="height: 40px;line-height: 23px;padding-bottom: 0">
                            <div class="weui-cell__hd font_size_5">
                                <i class="iconfont icon-zhangdanfeiyongmingxi font_orange_2" style="padding: 0 3px"></i>添加底金
                            </div>
                            <div class="weui-cell__bd font_size_5">
                                <div class="weui-flex border_orange_1 borderRadius_10" style="text-align: center;overflow: hidden;margin: 0 5px;">
                                    <div class="weui-flex__item down_payment_0 down_payment down_payment_active p_overflow" data-down_payment="0">
                                        无底金
                                    </div>
                                    <div class="weui-flex__item border_O_L_R down_payment p_overflow" data-down_payment="1">
                                        +1次（10元）
                                    </div>
                                    <div class="weui-flex__item  down_payment p_overflow" data-down_payment="2">
                                        +2次（20元）
                                    </div>
                                </div>
                            </div>
                            <div class="weui-cell__ft"></div>
                        </div>
                        <div class="weui-cell down_payment_explain" style="margin-top: 0;margin-bottom: 0;padding-top: 0;padding-bottom: 0;display: none">
                            <div class="weui-cell__hd" style="opacity: 0">
                                &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;
                            </div>
                            <div class="weui-cell__bd font_size_4">
                                扣除保证金后，依旧有<span class="font_orange_2 down_payment_Number">1次</span>机会完成目标
                            </div>
                        </div>

                        -->
                        <!--  系数翻倍 -->
                        <div class="weui-cell" style="height: 40px;line-height: 23px;padding-bottom: 0">
                            <div class="weui-cell__hd font_size_5">
                                <i class="iconfont icon-xitonggongju font_orange_2" style="padding: 0 3px"></i>系数翻倍
                            </div>
                            <div class="weui-cell__bd font_size_5">
                                <div class="weui-flex border_orange_1 borderRadius_15" style="text-align: center;overflow: hidden;margin: 0 5px;">
                                    <div class="weui-flex__item coefficient_0 coefficient coefficient_active" data-multiple="1">
                                        1倍
                                    </div>
                                    <div class="weui-flex__item border_O_L_R coefficient" data-multiple="2">
                                        2倍
                                    </div>
                                    <div class="weui-flex__item  coefficient" data-multiple="3">
                                        3倍
                                    </div>
                                </div>
                            </div>
                            <div class="weui-cell__ft"></div>
                        </div>
                        <div class="weui-cell coefficient_explain" style="margin-top: 0;margin-bottom: 0;padding-top: 0;padding-bottom: 0;display: none;">
                            <div class="weui-cell__hd" style="opacity: 0">
                                &#12288;&#12288;&#12288;&#12288;&#12288;&#12288;
                            </div>
                            <div class="weui-cell__bd font_size_4">
                                系数保证金翻倍<span class="font_orange_2 coefficient_multiple">2倍</span>（系数越高收益越高）
                            </div>
                        </div>


                        <!--  打卡提醒 -->
                        <div class="weui-cell weui-cell_switch" style="height: 40px;line-height: 25px;display: none">
                            <div class="weui-cell__hd font_size_5">
                                <i class="iconfont icon-daqia font_orange_2" style="padding: 0 3px"></i>打卡提醒
                            </div>
                            <div class="weui-cell__bd font_size_3 p_overflow">（注意：关闭后，将不再收到打卡提示）</div>
                            <div class="weui-cell__ft" style="height: 25px;">
                                <label for="switch_remind" class="weui-switch-cp">
                                    <input id="switch_remind" class="weui-switch-cp__input" type="checkbox"
                                           checked="checked"
                                    >
                                    <div class="weui-switch-cp__box"></div>
                                </label>
                            </div>
                        </div>

                        <!--  积分抵扣 -->
                        <div class="weui-cell weui-cell_switch" style="height: 40px;line-height:25px;display: none">
                            <div class="weui-cell__hd font_size_5">
                                <i class="iconfont icon-yezi font_orange_2" style="padding: 0 3px"></i>积分抵扣
                            </div>
                            <div class="weui-cell__bd font_size_3 p_overflow" ><span class="deduction_point_box" style="display: none">（使用<span class="deduction_point">100</span>积分抵扣<span class="deduction_guaranty">10</span>元押金）</span></div>
                            <div class="weui-cell__ft" style="height: 25px;">
                                <label for="switch_score" class="weui-switch-cp">
                                    <input id="switch_score" class="weui-switch-cp__input" type="checkbox">
                                    <div class="weui-switch-cp__box"></div>
                                </label>
                            </div>
                        </div>

                    </div>

                </div>

            </ul>
        </div>
    </div>


    <!-- 占位 -->
    <div style="height: 100px;width: 100%;opacity: 0;background-color: white;display: none"></div>


	<div class="" style="z-index: 1;">
		<div class="row-center" style="justify-content: space-between;margin-top: 10px;">
			<div class="fixed-text">
				系数:
				<span id="all-coefficient-value" class="fixed-text__bold" style="color: #565c66;">24</span>
			</div>
			<div class="fixed-text">
				押金:
				<span style="color: #ff931f;" id="guarantee-cash" class="fixed-text__bold">
					50
				</span>
				元
			</div>
		</div>
		<button class="weui-btn weui-btn_primary" id="gen-btn">
			生成目标
		</button>
	</div>


    <div class="hide_content">
                <!--分享弹出框-->
        <!--  上传3 张 图片-->

        <style>
             #upload-popup .modal-content{
                justify-content:initial;
                 padding-top:0px;
            }

            #upload-popup .weui-popup__modal {
                height: 360px;
                left: 50%;
                top: 50%;
                width: 80%;
                transform: translate(-50%, -50%);
                border-radius: 10px;
                box-shadow: 1px 1px 2px rgba(0,0,0,0.1);
                background: #ffffff;
            }
            #sourceNode{
                display: none;
            }
            .uploaderInput_box{
                width: 70px;
                height: 70px;
                position: relative;
            }

            .weui-uploader__input-box{
                width: 68px;
                height: 68px;
                margin-top: 9px;
            }

            .uploaderInput_box_{
                width: 31%;
                margin-left: 2%;
                height: 100px;
            }
            .news-item__content-img {
                width: 32%;

            }
        </style>

        <div id="upload-popup" class="weui-popup__container popup-bottom">
            <div class="weui-popup__overlay"></div>
                <div class="weui-popup__modal">
                    <div class="modal-content">

                        <div class="row-center center" id="" style="text-align: center;height: 40px;line-height:40px;overflow: hidden;margin-top: 10px;">
                            分享
                        </div>

                        <div style="overflow: hidden;border-bottom: 1px solid  #ededed;width: 80%;margin: 0 auto;height: 100px;">
                            <textarea class="weui-textarea" id="document_text" placeholder="写下此刻的感想与收获吧..." rows="3" style="margin: 10px auto;font-size: 13px;z-index: 99999"></textarea>
                        </div>

                        <div id="" style="height:auto;overflow: hidden;margin:10px auto;width: 80%;">
                            <div class="news-item__content" style="height: 120px;">

                                <div class="weui-uploader__bd">
                                    <ul class="weui-uploader__files" id="uploaderFiles">
                                        <li class="uploaderInput_box" id="sourceNode" style="float: left;width: 60px;height: 60px;background: url(/static/order/demo.png) center no-repeat;background-size: cover;">
                                            <div class="weui-cell__ft img_remove">
                                                <i class="iconfont icon-guanbi font_red_1" style="line-height: 20px;height: 20px;font-size: 20px"></i>
                                            </div>
                                            <img class="news-item__content-img uploaderInput_img_1 box_content pictureEnlarge"
                                                 src="/static/order/demo.png" style="width: 60px;height: 60px;display: block;margin: auto;opacity: 0">
                                        </li>
                                    </ul>
                                    <div class="weui-uploader__input-box uploaderInput_input" style="width: 60px;height: 60px;margin-left: 5px;">
                                        <input id="uploaderInput" class="weui-uploader__input" type="file" accept="image/*">
                                    </div>

                            </div>

                        </div>

                    </div>

                        <button class="weui-btn weui-btn_primary" id="read_comment_submit" style="    position: absolute;bottom: 0;height: 40px;line-height: 40px;overflow: hidden">
                            确认
                        </button>
                    </div>
                </div>

        </div>

    </div>


<!---------------动态----------------------------------------------->

    <style>
        .news-list {
            border-top: 1px solid #e5e5e5;
            margin-bottom: 0;
            list-style: none;
            background-color: white;
        }
        .news-list .news-item:last-child {
            margin-bottom: 0px;
        }
        .news-item:nth-child(1) {
            border-top: none;
        }
        .new-item__content {
            padding-top: 20px;
            padding-left: 10px;
            padding-right: 10px;
        }
        .news-item__header-img {
            width: 32px;
            height: 32px;
            box-sizing: border-box;
            border-radius: 50%;
            background-color: white;
        }
        .news-item__header-text {
            margin-left: 10px;
            font-size: 0.7rem;
        }
        .news-item__content {
            position: relative;
            max-height: 100px;
            height: auto;
            overflow: hidden;
        }

        .reply_data {
            margin-top: 10px;
        }
        .news-item__horzon {
            width: 100%;
            margin-top: 10px;
            margin-bottom: 10px;
            background: #B6C1C8;
        }
        .news-item__bottom {
            margin-bottom: 10px;
        }
         /*
        点赞，举报，回复
         */
        .button_sty{
            margin-left: 5px;
            min-width: 50px;
            max-width: 120px;
            padding: 1px 5px;
            height: 22px;
            line-height: 18px;
            color: rgba(31,162,255,1);
            background-color: rgba(0,0,0,0);
            /*
            border: 1px #1fa2ff solid;
            */
            border: none;
        }

        .button_sty_yes{
            margin-left: 5px;
            min-width: 50px;
            max-width: 120px;
            padding: 1px 5px;
            height: 22px;
            line-height: 18px;
            color: rgba(182, 193, 200,1);
            background-color: rgba(0,0,0,0);
            border: none;
        }
        .button_sty_yes > span{
            color: rgba(182, 193, 200,1);
        }

        .icon-dianzan{
            font-size: 14px;
        }
        .modalTextarea_box {
            width: 96%;
            height: 150px;
            font-size: 17px;
            border: 1px #f6f1f1 solid;
            padding: 2%;
        }
        .modalTextarea{
            {#border: #e7e7e7 solid 1px;#}
            height: 150px;
            font-size: 17px;
            border: none;
            text-indent: 2em;
            width: 100%;
            {#border-top: 1px #f6f1f1 solid;#}
            {#border-bottom: 1px #f6f1f1 solid;;#}
        }
        input,button,select,textarea{outline:none}
        textarea{resize:none}


        .rank_change_active,.load_comments_active{
            border-bottom: 2px solid  rgba(255,171,24,1);
        }
        .rank_box{
            display: none;
        }

        .rank_1{
            display: block;
        }

        .height_22{
            line-height: 2.2rem;
            height: 2.2rem;
        }
        .rank_border_bottom {
            border-bottom: 1px solid rgba(204,204,204,0.5);
        }
        .rank_border_bottom .rank_img{
            border-radius:5px;
            float: left;
            width: 1.4rem;
            height: 1.4rem;
            display:block;
            overflow:hidden;
            background: url('/static/avatar/100445.jpg') no-repeat;
            background-size: cover;
            margin-top: 0.4rem;
        }
        .rank_border_bottom .rank_name{
            display:block;float: left;border-radius: 5px;margin: 0 10px
        }
        .rank_ranking img{
            width: 1.2rem;height: 1.2rem;
        }
        #tab2 .news-item__header-text{
            color: #5b6a92;
        }

    </style>

    <!-- 动态 -->
    <div class="bg_white" style="">
        <div class="weui-tab" style="z-index: 3;width: 100%">
            <div class="weui-navbar bg_white" id="fixed_TOP">
                <a class="weui-navbar__item" href="#tab1">
                    排行榜
                </a>

                <a class="weui-navbar__item  weui-bar__item--on" href="#tab2">
                    动态
                </a>
            </div>

            <div class="weui-tab__bd">
                <div id="tab1" class="weui-tab__bd-item">

                    <div class="weui-flex font_size_6" style="margin-top: 10px;height: 30px;line-height: 30px;margin-left:30px;margin-right: 30px">
                        <div class="weui-flex__item rank_change text_center rank_change_active" data-sta="1">
                            早起榜
                        </div>
                        <div class="weui-flex__item rank_change text_center" data-sta="2">
                            点赞榜
                        </div>
                        <div class="weui-flex__item rank_change text_center" data-sta="3">
                            坚持榜
                        </div>
                        <div class="weui-flex__item rank_change text_center" data-sta="4">
                            收益榜
                        </div>
                    </div>

                    <!--  早起榜 -->
                    <div class="rank_box fadeInLeft_1 rank_1" style="margin: 00px 20px;">
                        <!-- 前三排行-->
                        <div  class="weui-flex rank_border_bottom" style="margin-top: 30px;display: none">
                            <div class="weui-flex__item">
                                <div style="width: 100%;height: 100%;margin-top: 20px">
                                    <div style="position: relative">
                                        <img class="ranking_2_headimgurl" src="/static/avatar/100000.jpg" style="border-radius: 50%;width: 50%;display: block;margin: auto;border: 2px solid black;">
                                        <div style="position: absolute;top: -10px;width: 20%;right:55%;margin: auto;">
                                            <img src="/static/images/aprilFool/2@2x.png" style="width: 100%">
                                        </div>
                                        <div style="position: absolute;bottom: 10px;right:0;margin: auto;width: 40%; ">
                                            <img src="/static/images/aprilFool/2_1@2x.png" style="width: 65%;">
                                        </div>
                                    </div>
                                    <p class="ranking_2_nickname" style="text-align: center;">小明</p>
                                </div>
                            </div>
                            <div class="weui-flex__item">
                                <div style="width: 100%;height: 100%;">
                                    <div style="position: relative">
                                        <img class="ranking_1_headimgurl" src="/static/avatar/100000.jpg" style="border-radius: 50%;width: 70%;display: block;margin: auto;border: 2px solid black;">
                                        <div style="position: absolute;top: -15px;width: 25%;right:55%;margin: auto;">
                                            <img src="/static/images/aprilFool/1@2x.png" style="width: 100%">
                                        </div>
                                        <div style="position: absolute;bottom: 15px;right:-10px;margin: auto;width: 40%; ">
                                            <img src="/static/images/aprilFool/1_1@2x.png"  style="width: 65%;">
                                        </div>
                                    </div>
                                    <p class="ranking_1_nickname" style="text-align: center;">小王</p>
                                </div>
                            </div>
                            <div class="weui-flex__item">
                                <div style="width: 100%;height: 100%;margin-top: 20px">
                                    <div style="position: relative">
                                        <img class="ranking_3_headimgurl" src="/static/avatar/100259.jpg" style="border-radius: 50%;width: 50%;display: block;margin: auto;border: 2px solid black;">
                                        <div style="position: absolute;top: -10px;width: 20%;right:55%;margin: auto;">
                                            <img src="/static/images/aprilFool/3@2x.png" style="width: 100%">
                                        </div>
                                        <div style="position: absolute;bottom: 10px;right:0;margin: auto;width: 40%; ">
                                            <img src="/static/images/aprilFool/3_1@2x.png"  style="width: 65%;">
                                        </div>
                                    </div>
                                    <p class="ranking_3_nickname" style="text-align: center;">校长</p>
                                </div>
                            </div>
                        </div>
                        <!-- 前三排行 以外-->

                        <!-- 自己-->
                         <div class="weui-row weui-no-gutter rank_border_bottom height_22" style="margin-top: 0">
                             <div class="weui-col-15 text_center font_size_4" style="opacity: 0">
                                 我
                             </div>

                             <div class="weui-col-55 text_center">
                                 <div class="rank_img crruent_user_headimgurl" style="">
                                     <img class="" src="/static/avatar/100445.jpg" style="width: 100%;opacity: 0">
                                 </div>
                                 <div class="rank_name text_left">
                                     <p class="p_overflow font_size_5 crruent_user_name" style="line-height: 0.8rem;height: 0.8rem;margin-top: 0.4rem;">小娃娃</p>
                                     <p class="p_overflow font_size_5 crruent_user_rank" style="line-height: 0.8rem;height: 0.8rem;">第20+名</p>
                                 </div>
                             </div>

                             <div class="weui-col-30 text_center height_22 text_right">
                                 <p class="p_overflow height_22 crruent_user_rank_time padding_R_10">05:00:00</p>
                             </div>

                        </div>
                        <!-- 自己 end-->

                        <!-- 排行-->
                        <div class="rank_1_box">
                            <!-- 暂无人上榜 -->
                            <div class="weui-row weui-no-gutter rank_border_bottom height_22 nodata" style="display: none">
                                <div class="weui-col-20 text_center font_size_6 height_22 position_relative rank_ranking">

                                 </div>

                                <div class="weui-col-60 text_center">
                                    暂无人上榜
                                 </div>

                                <div class="weui-col-20 text_center height_22 text_right">

                                 </div>
                            </div>



                        </div>
                    </div>

                    <!-- 点赞榜 -->
                    <div class="rank_box fadeInLeft_1 rank_2" style="margin: 00px 10px;">

                        <!-- 自己-->
                         <div class="weui-row weui-no-gutter rank_border_bottom height_22">
                             <div class="weui-col-15 text_center font_size_5" style="opacity: 0">
                                 我
                             </div>

                             <div class="weui-col-55 text_center">
                                 <div class="rank_img crruent_user_headimgurl" style="">
                                     <img class="" src="/static/avatar/100445.jpg" style="width: 100%;opacity: 0">
                                 </div>
                                 <div class="rank_name text_left">
                                     <p class="p_overflow font_size_5 crruent_user_name" style="line-height: 0.8rem;height: 0.8rem;margin-top: 0.4rem;">小娃娃</p>
                                     <p class="p_overflow font_size_5 crruent_user_rank" style="line-height: 0.8rem;height: 0.8rem;">第20+名</p>
                                 </div>
                             </div>

                             <div class="weui-col-30 text_center height_22 text_right">
                                 <p class="p_overflow height_22 crruent_user_rank_time padding_R_10"></p>
                             </div>

                        </div>

                        <!-- 排行-->
                        <div class="rank_2_box">
                            <!-- 暂无人上榜 -->
                            <div class="weui-row weui-no-gutter rank_border_bottom height_22 nodata" style="display: none">
                                <div class="weui-col-20 text_center font_size_6 height_22 position_relative rank_ranking">

                                 </div>

                                <div class="weui-col-60 text_center">
                                    暂无人上榜
                                 </div>

                                <div class="weui-col-20 text_center height_22 text_right">

                                 </div>
                            </div>



                        </div>
                    </div>

                    <!-- 坚持榜 -->
                    <div class="rank_box fadeInLeft_1 rank_3" style="margin: 00px 10px;">
                        <!-- 自己-->
                         <div class="weui-row weui-no-gutter rank_border_bottom height_22">
                             <div class="weui-col-15 text_center font_size_5"  style="opacity: 0">
                                 我
                             </div>

                             <div class="weui-col-55 text_center">
                                 <div class="rank_img crruent_user_headimgurl" style="">
                                     <img class="" src="/static/avatar/100445.jpg" style="width: 100%;opacity: 0">
                                 </div>
                                 <div class="rank_name text_left">
                                     <p class="p_overflow font_size_5 crruent_user_name" style="line-height: 0.8rem;height: 0.8rem;margin-top: 0.4rem;">小娃娃</p>
                                     <p class="p_overflow font_size_5 crruent_user_rank" style="line-height: 0.8rem;height: 0.8rem;">第10+名</p>
                                 </div>
                             </div>

                             <div class="weui-col-30 text_center height_22 text_right">
                                 <p class="p_overflow height_22 crruent_user_rank_time padding_R_10"></p>
                             </div>

                        </div>

                        <!-- 排行-->
                        <div class="rank_3_box">
                            <!-- 暂无人上榜 -->
                            <div class="weui-row weui-no-gutter rank_border_bottom height_22 nodata" style="display: none">
                                <div class="weui-col-20 text_center font_size_6 height_22 position_relative rank_ranking">

                                 </div>

                                <div class="weui-col-60 text_center">
                                    暂无人上榜
                                 </div>

                                <div class="weui-col-20 text_center height_22 text_right">

                                 </div>
                            </div>

                        </div>
                    </div>

                    <!-- 收益榜 -->
                    <div class="rank_box fadeInLeft_1 rank_4" style="margin: 00px 10px;">
                        <!-- 自己-->
                         <div class="weui-row weui-no-gutter rank_border_bottom height_22">
                             <div class="weui-col-15 text_center font_size_5"  style="opacity: 0">
                                 我
                             </div>

                             <div class="weui-col-55 text_center">
                                 <div class="rank_img crruent_user_headimgurl" style="">
                                     <img class="" src="/static/avatar/100445.jpg" style="width: 100%;opacity: 0">
                                 </div>
                                 <div class="rank_name text_left">
                                     <p class="p_overflow font_size_5 crruent_user_name" style="line-height: 0.8rem;height: 0.8rem;margin-top: 0.4rem;">小娃娃</p>
                                     <p class="p_overflow font_size_5 crruent_user_rank" style="line-height: 0.8rem;height: 0.8rem;">第10+名</p>
                                 </div>
                             </div>

                             <div class="weui-col-30 text_center height_22 text_right">
                                 <p class="p_overflow height_22 crruent_user_rank_time padding_R_10">05:00:00</p>
                             </div>

                        </div>

                        <!-- 排行-->
                        <div class="rank_4_box">
                            <!-- 暂无人上榜 -->
                            <div class="weui-row weui-no-gutter rank_border_bottom height_22 nodata" style="display: none">
                                <div class="weui-col-20 text_center font_size_6 height_22 position_relative rank_ranking">

                                 </div>

                                <div class="weui-col-60 text_center">
                                    暂无人上榜
                                 </div>

                                <div class="weui-col-20 text_center height_22 text_right">

                                 </div>
                            </div>

                        </div>
                    </div>

                </div>

                <div id="tab2" class="weui-tab__bd-item infinite weui-tab__bd-item--active">
                    <!-- 动态 切换 tab-->
                    <div class="weui-flex font_size_6" style="margin-top: 10px;height: 30px;line-height: 30px;margin-left:60px;margin-right: 60px">
                        <div class="weui-flex__item load_comments text_center load_comments_active" data-sta="1">
                            所有
                        </div>
                        <div class="weui-flex__item load_comments text_center" data-sta="2">
                            个人
                        </div>
                        <div class="weui-flex__item load_comments text_center hide" data-sta="3">
                            知识
                        </div>
                        <div class="weui-flex__item load_comments text_center" data-sta="4">
                            平台
                        </div>
                    </div>


                    <!-- 所有 动态 -->
                    <div class="bd fadeInLeft_1 load_comments_1 load_comments_box" style="z-index: 0">
                        <div class="page__bd" style="z-index: 0">

                        <!-- 推荐 分享 -->
                            <div class="weui-cells content-padded" style="margin: 0;">


                                <div id="list" class="">

                                    {% for comm in datas %}
                                        {% if comm.is_delete == 0 %}
                                            {% if comm.user_id == goal.user_id or goal.user_id == 100259 or goal.user_id == 100267 or goal.user_id == 101077  or goal.user_id == 100274 %}
                                            <div class="weui-cell weui-cell_swiped hide" id="">
                                                <div class="weui-cell__bd">
                                                    <ul>
                                                        <li class="news-item" data-punch="{{ comm.id }}" style="overflow:hidden;">
                                                            <div class="new-item__content">
                                                                <div>
                                                                    <img src="{{ comm.headimgurl }}" class="news-item__header-img pictureEnlarge">
                                                                    <span class="news-item__header-text">{{ comm.nickname }}</span>

                                                                    <span style="color: #B6C1C8;display: inline-block;float: right">{{ comm.c_time }}</span>
                                                                </div>
                                                                <div style="margin-left: 46px;">
                                                                    <p>{{ comm.content|default:"" }}</p>
                                                                </div>
                                                                <div class="news-item__content" style="height: auto;margin-left: 36px;width: 100%">

                                                                    {% for foo in comm.voucher_ref %}
                                                                        <div class="uploaderInput_box_" style="margin-top: 10px;display: block;float: left;
                                                                        background: url({{ foo }}) center;
                                                                        background-size: cover;
                                                                        background-repeat: no-repeat;
                                                                        ">
                                                                            <img class="news-item__content-img box_left voucher_ref_img pictureEnlarge" style="position: absolute;opacity: 0" src="{{ foo }}">
                                                                        </div>
                                                                    {% endfor %}

                                                                </div>

                                                                <div class="reply_data clamp_5 reply_data_{{ comm.id }}">
                                                                    {% for fooooo in comm.reply_data %}
                                                                        <div style="margin-left: 46px;">
                                                                            <p class="word_break" style="color: #333333;">
                                                                                <span class="news-item__header-text" style="margin-left: 0;">{{ fooooo.nickname }}</span>：<span style="color: #4a4a4a;">{{ fooooo.content|default:"" }}</span></p>
                                                                        </div>
                                                                    {% endfor %}
                                                                </div>

                                                            </div>
                                                            <div class="news-item__horzon"></div>
                                                            <div class="weui-flex news-item__bottom" style="float: right;display: initial;">
                                                                <div class="weui-flex__item" style="padding-left: 50px;display: none">
                                                                    <span style="color: #B6C1C8;">{{ comm.c_time|date:"m-d H:i"  }}</span>
                                                                </div>
                                                                <div class="weui-flex__item weui-flex" style="flex: 2;">

                                                                        {% if comm.is_no_prise == 1 %}
                                                                            <button href="javascript:;" class="news-item__tail-btn weui-flex__item active weui-flex__item_1_2 button_sty_yes" disabled="disabled"  style="border: 0px;">
                                                                                <i class="iconfont icon-dianzan"></i>
                                                                                <span class="news-item__tail-text">
                                                                                    <span class="praise">
                                                                                        {% if comm.prise == 0 %}
                                                                                        {% else %}
                                                                                            {{ comm.prise }}
                                                                                        {% endif %}
                                                                                    </span>
                                                                                </span>
                                                                            </button>
                                                                        {% else %}
                                                                            <button href="javascript:;" class="news-item__tail-btn weui-flex__item parise-btn weui-flex__item_1_2 button_sty" punch_id="{{ comm.id }}" sta="{{ comm.prise }}" style="border: 0px;">
                                                                                <i class="iconfont icon-dianzan"></i>
                                                                                <span class="news-item__tail-text">
                                                                                    <span class="praise">
                                                                                        {% if comm.prise == 0 %}
                                                                                        {% else %}
                                                                                            {{ comm.prise }}
                                                                                        {% endif %}
                                                                                    </span>
                                                                                </span>
                                                                            </button>
                                                                        {% endif %}

                                                                <!--
                                                                        {% if comm.is_no_report == 1 %}
                                                                            <button href="javascript:;" class="news-item__tail-btn weui-flex__item active button_sty_yes" style="color: rgba(182, 193, 200,1);">
                                                                                <i class="iconfont icon-jubao"></i>
                                                                                <span class="news-item__tail-text">已举报</span>
                                                                            </button>
                                                                        {% else %}
                                                                            <button href="javascript:;" class="news-item__tail-btn weui-flex__item report-btn button_sty" punch_id="{{ comm.id }}" style="color: rgba(31,162,255,1);">
                                                                                <i class="iconfont icon-jubao"></i>
                                                                                <span class="news-item__tail-text">举报</span>
                                                                            </button>
                                                                        {% endif %}
                                                                    -->

                                                                        <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" punch_id="{{ comm.id }}" style="">
                                                                            <i class="iconfont icon-pinglun font_color_1"></i>
                                                                            <span class="news-item__tail-text">回复</span>
                                                                        </button>
                                                                </div>
                                                            </div>


                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="weui-cell__ft" style="display: inline-table">
                                                    <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout bg_red_1" punch_id="{{ comm.id }}" style="display: table-cell;vertical-align: middle;" href="javascript:">删除</a>
                                                </div>
                                            </div>
                                            {% else %}
                                            <ul class="news-list">
                                                <li class="news-item" data-punch="{{ comm.id }}" style="overflow: hidden">
                                                    <div class="new-item__content">
                                                        <div>
                                                            <img src="{{ comm.headimgurl }}" class="news-item__header-img pictureEnlarge">
                                                            <span class="news-item__header-text">{{ comm.nickname }}</span>
                                                            <span style="color: #B6C1C8;display: inline-block;float: right">{{ comm.c_time }}</span>
                                                        </div>
                                                        <div style="margin-left: 46px;">
                                                            <p style="">{{ comm.content|default:"" }}</p>
                                                        </div>

                                                        <div class="news-item__content weui-flex" style="width: 100%">

                                                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 100%">
                                                                {% for foo in comm.voucher_ref %}
                                                                    <div class="uploaderInput_box_" style="margin-top: 10px;display: block;float: left;
                                                                        background: url({{ foo }}) center;
                                                                        background-size: cover;
                                                                        background-repeat: no-repeat;
                                                                        ">
                                                                            <img class="news-item__content-img box_left voucher_ref_img pictureEnlarge" style="position: absolute;opacity: 0" src="{{ foo }}">
                                                                    </div>
                                                                {% endfor %}
                                                            </div>

                                                        </div>
                                                        <div class="reply_data clamp_5 reply_data_{{ comm.id }}">
                                                            {% for fooooo in comm.reply_data %}
                                                                <div style="margin-left: 46px;">
                                                                    <p class="word_break" style="color: #333333;"><span class="news-item__header-text" style="margin-left: 0;color: #0c3654">{{ fooooo.nickname }}</span> ：<span style="color: #4a4a4a;">{{ fooooo.content|default:"" }}</span></p>
                                                                </div>
                                                            {% endfor %}
                                                        </div>

                                                    </div>
                                                    <div class="news-item__horzon"></div>
                                                    <div class="weui-flex news-item__bottom" style="float: right;display: initial;">
                                                        <div class="weui-flex__item" style="padding-left: 50px;display: none">
                                                            <span style="color: #B6C1C8;">{{ comm.c_time|date:"m-d H:i"  }}</span>
                                                        </div>
                                                        <div class="weui-flex__item weui-flex" style="flex: 2;">

                                                            {% if comm.is_no_prise == 1 %}
                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item active weui-flex__item_1_2 button_sty_yes" disabled="disabled"  style="color: rgba(182, 193, 200,1);border: 0px;">
                                                                    <i class="iconfont icon-dianzan"></i>
                                                                    <span class="news-item__tail-text">
                                                                        <span class="praise">
                                                                            {% if comm.prise == 0 %}
                                                                            {% else %}
                                                                                {{ comm.prise }}
                                                                            {% endif %}
                                                                        </span>
                                                                    </span>
                                                                </button>
                                                            {% else %}
                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item parise-btn weui-flex__item_1_2 button_sty" punch_id="{{ comm.id }}" sta="{{ comm.prise }}" style="border: 0px;">
                                                                    <i class="iconfont icon-dianzan"></i>
                                                                    <span class="news-item__tail-text">
                                                                        <span class="praise">
                                                                            {% if comm.prise == 0 %}
                                                                            {% else %}
                                                                                {{ comm.prise }}
                                                                            {% endif %}
                                                                        </span>
                                                                    </span>
                                                                </button>
                                                            {% endif %}

                                                        <!--
                                                            {% if comm.is_no_report == 1 %}
                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item active button_sty_yes" style="">
                                                                    <i class="iconfont icon-jubao"></i>
                                                                    <span class="news-item__tail-text">已举报</span>
                                                                </button>
                                                            {% else %}
                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item report-btn button_sty" punch_id="{{ comm.id }}" style="">
                                                                    <i class="iconfont icon-jubao"></i>
                                                                    <span class="news-item__tail-text">举报</span>
                                                                </button>
                                                            {% endif %}
                                                            -->


                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" punch_id="{{ comm.id }}" style="">
                                                                    <i class="iconfont icon-pinglun font_color_1"></i>
                                                                    <span class="news-item__tail-text">回复</span>
                                                                </button>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                            {% endif %}

                                        {% else %}

                                        {% endif %}

                                    {% endfor %}


                                </div>

                                <div class="weui-loadmore">
                                    <i class="weui-loading"></i>
                                    <span class="weui-loadmore__tips">正在加载</span>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- 个人 动态 -->
                    <div class="bd fadeInLeft_1 load_comments_2 load_comments_box" style="z-index: 0;display: none">
                        <div class="page__bd" style="z-index: 0">

                        <!-- 推荐 分享 -->
                            <div class="weui-cells content-padded" style="margin: 0;">

                                <div id="my_list">
                                    <div class="weui-col-60 text_center nodata" style="display: none;margin:20px auto">
                                        暂无人记录
                                    </div>

                                </div>

                                <!--
                                <div class="weui-loadmore hide" >
                                    <i class="weui-loading"></i>
                                    <span class="weui-loadmore__tips">正在加载</span>
                                </div>
                                -->


                            </div>

                        </div>
                    </div>

                    <!-- (知识) 动态 -->
                    <div class="bd fadeInLeft_1 load_comments_3 load_comments_box" style="z-index: 0;display: none">
                        <div class="page__bd" style="z-index: 0">

                        <!-- 推荐 分享 -->
                            <div class="weui-cells content-padded" style="margin: 0;">

                                <div id="knowledge_list">
                                    <div class="weui-col-60 text_center nodata hide" style="display: none;margin:20px auto">
                                        暂无人记录
                                    </div>
                                    <div style="padding: 20px">
                                        <p class="font_color_1">跑步动作</p>
                                        <div style="">
                                            <p class="font_size_6">&#12288;&#12288;跑步是一门学问，最科学的锻炼方法才能达到最好的效果。</p>
                                            <p class="font_size_7">1、头和肩</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——保持头与肩的稳定。头要正对前方，除非道路不平，不要前探，两眼注视前方。肩部适当放松，避免含胸。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力伸拉——耸肩。肩放松下垂，然后尽可能上耸，停留一下，还原后重复。</p>
                                            <br>
                                            <p class="font_size_7">2、臂与手</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领—摆臂应是以肩为轴的前后动作，左右动作幅度不超过身体正中线。手指、腕与臂应是放松的，肘关节角度约为90度。前摆时稍向内，后摆时稍向外。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力伸拉——抬肘摆臂。两臂一前一后成预备起跑姿势，后摆臂肘关节尽量抬高，然后放松前摆。随着动作加快时越抬越高。</p>
                                            <br>
                                            <p class="font_size_7">3、躯干与髋</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——从颈到腹保持直立，而非前倾（除非加速或上坡）或后仰，这样有利于呼吸、保持平衡和步幅。
                                                躯干不要左右摇晃或上下起伏太大。腿前摆时积极送髋，跑步时要注意髋部的转动和放松。
                                            <p class="font_size_5">&#12288;&#12288;动力伸拉——弓步压腿。两腿前后开立，与肩同宽，身体中心缓慢下压至肌肉紧张，然后放松还原。躯干始终保持直立。</p>
                                            <br>
                                            <p class="font_size_7">4、腰</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——腰部保持自然直立，不宜过于挺直。肌肉稍微紧张，维持躯干姿势，同时注意缓冲脚着地的冲击。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力伸拉——体前屈伸。自然站立，两脚开立，与肩同宽。躯干缓慢前屈至两手下垂至脚尖，保持一会儿，然后复原。</p>
                                            <br>
                                            <p class="font_size_7">5、大腿与膝</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——大腿和膝用力前摆，而不是上抬。腿的任何侧向动作都是多余的，而且容易引起膝关节受伤，因此大腿的前摆要正。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力拉伸——前弓身．两脚站距同髋宽．双手放在头后．从髋关节屈体向前．保持腰背挺直，直到股二头肌感到紧张。</p>
                                            <br>
                                            <p class="font_size_7">6、小腿与跟腱</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——脚应落在身体前约一尺的位置，靠近正中线。小腿不宜跨得太远，避免跟腱因受力过大而劳损。同时要注意小腿肌肉和跟腱在着地时的缓冲，落地时小腿应积极向后扒地，使身体积极向前。
                                                另外，小腿前摆方向要正，脚应该尽量朝前，不要外翻或后翻，否则膝关节和踝关节容易受伤。可在沙滩上跑步时检查脚印以作参考。</p>
                                            <p  class="font_size_6">&#12288;&#12288;动力伸拉——撑壁提踵。面向墙壁约1米左右站立，两臂前伸与肩同宽，手撑壁。提踵，再放下，感觉小腿和跟腱紧张。</p>
                                            <br>
                                            <p class="font_size_7">7、脚跟与脚趾</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——如果步幅过大，小腿前伸过远，会以脚跟着地，产生制动刹车反作用力，对骨和关节损伤很大。正确的落地时用脚的中部着地，并让冲击力迅速分散到全脚掌。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力伸拉——坐式伸踝．跪在地上，臀部靠近脚跟，上体保持直立．慢慢向下给踝关节压力直到趾伸肌与脚前掌感到足够拉力．然后抬臀后重复．动作要有节奏，缓慢。</p>
                                            <br>
                                        </div>
                                        <p class="font_color_1">运动技巧</p>
                                        <div style="">
                                            <p class="font_size_7">1、落地缓冲</p>
                                            <p class="font_size_6 text_indent">
                                                如果你有仔细观察过他人跑步，你会发现，很多人都是全脚掌着地，落地时的声音也比较大。正确的动作是在跑步时，腾空脚落地时要中位脚先着地，脚掌就不要着地。这是对于脚踝、膝盖的一种保护，防止骨膜炎的发生。
                                            </p>
                                            <br>
                                            <p class="font_size_7">2、摆臂</p>
                                            <p class="font_size_6 text_indent">
                                                摆臂是在跑步过程当中，保持身体的平衡性和协调性，使身体更自然的摆动，更符合人体运动的韵律。摆臂时，只要记住前不露肘，后不露手，自然的随着脚步而摆动。
                                            </p>
                                            <br>
                                            <p class="font_size_7">3、抬头挺胸</p>
                                            <p class="font_size_6 text_indent">
                                                跑步是保持抬头挺胸有助于改善人体的呼吸循环系统以及建立正常的记住状态。因为你在跑步过程中，人体在不断的消耗能量，易出现疲劳状况，这时如果你能用你的意志挺起你的脊梁，那么你要改善驼背状况其实就很简单了。
                                            </p>
                                            <br>
                                            <p class="font_size_7">4、呼吸</p>
                                            <p class="font_size_6 text_indent">
                                                跑步时的呼吸是深远而悠长的，一般采用鼻吸嘴呼，体力下降较为严重时可以采用嘴吸嘴呼方式。
                                            </p>
                                            <br>
                                            <p class="font_size_7">5、心率</p>
                                            <p class="font_size_6 text_indent">
                                                慢跑作为一种养生的有氧运动，就要和快速跑区分开来。一般来说，最适合身体锻炼的心率律动次数是：(220-年龄)×60%左右。大家跑步的时候可以适当的测量以下。
                                            </p>
                                            <br>
                                            <p class="font_size_7">6、头与肩</p>
                                            <p class="font_size_6 text_indent">
                                                头与肩都要保持稳定。头要目视前方，下颚微收但不要低头。跑步时，肩先放松下垂，然后尽可能上耸，停留一下，恢复原来的姿势再重复。
                                            </p>
                                            <br>
                                            <p class="font_size_7">7、臂和手</p>
                                            <p class="font_size_6 text_indent">
                                                手要微微握住，大小臂屈成约90度，前后自然摆动。要注意向前的手臂不要露肘，向后的手臂不要露出手来。
                                            </p>
                                            <br>
                                            <p class="font_size_7">8、腿</p>
                                            <p class="font_size_6 text_indent">
                                                用大腿带动小腿，膝关节要朝向脚尖方向，抬到合理的高度后放下再重复。
                                            </p>
                                            <br>
                                            <p class="font_size_7">9、双脚</p>
                                            <p class="font_size_6 text_indent">
                                                双脚要放松，不要紧缩脚趾，脚抬高到离地10厘米就可放下重复。脚掌落地时前脚掌不要太用力蹬地，以免造成小腿肌肉发达。
                                            </p>
                                            <br>

                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>

                    <!-- 平台(知识) 动态 -->
                    <div class="bd fadeInLeft_1 load_comments_4 load_comments_box" style="z-index: 0;display: none">
                        <div class="page__bd" style="z-index: 0">

                            <div class="weui-cells infinite content-padded" style="margin: 0;">

                                <div id="">
                                    <div class="weui-col-60 text_center nodata" style="margin:20px auto">
                                        待开放
                                    </div>

                                </div>

                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

<!---------------动态 end ----------------------------------------------->


    <!-- 支付弹窗 -->
	<div id="gen-popup" class="weui-popup__container popup-bottom">
		<div class="weui-popup__overlay"></div>
		<div class="weui-popup__modal">
			<div class="modal-content">
				<div class="gen-title">
					<div class="title-line"></div>
					<span class="title-text">
						<span style="font-weight: 600;">作息</span>
						<span id="getUpEarly-gen-title" class="gen-title-text" style="display: none;">早起模式</span>
                        <span id="sleeping-gen-title" class="gen-title-text" >睡眠模式</span>
					</span>
				</div>
				<div class="weui-cell">
                    <div class="weui-cell__bd">
                    <span class="gen_title">保证金</span>
                    </div>
                    <div class="weui-cell__ft" style="margin-right: 20px;">
                        <span id="pay-count" style="color: #565c66;font-size: 1.4rem;font-weight: 600;">
                            50
                        </span>
                        元
                    </div>
                </div>
				<div class="weui-cell no-before">
                    <div class="weui-cell__hd">
                        <span class="gen_title">使用余额</span>
                    </div>
                    <div class="weui-cells_checkbox weui-cell__bd">
                        <label class="weui-cell weui-check__label" for="weuiAgree">
                            <div class="weui-cell__bd">
                                <p>{{ balance }} 元</p>
                            </div>
                            <div class="weui-cell__hd">
                                <input type="checkbox" id="weuiAgree" class="weui-check" name="checkbox1" checked="checked">
                                <i class="weui-icon-checked"></i>
                            </div>
                      </label>
                    </div>
                </div>

                <div class="weui-cell">
                    <div class="weui-cell__bd">
                    <span class="gen_title">应付</span>
                    </div>
                    <div class="weui-cell__ft" style="margin-right: 20px;">
                        <span id="reality_price" style="color: #565c66;font-size: 1.4rem;font-weight: 600;">
                            50.00
                        </span>
                        元
                    </div>
                </div>

				<button class="weui-btn weui-btn_primary" id="pay-btn"
                        coefficient="24"
                        deposit="50"
                        goalday="9999"
                        goal_type="1"
                        sleep_type="0"
                        data-multiple="1"
                        data-deduction_guaranty="0"
                        data-deduction_point="0"
                        data-is_no_use_point="0"
                        data-punch_attention="0"
                        data-use_point="0"
                >
                    <i class="iconfont icon-ai-weixin"></i>
					微信支付
				</button>
                <p class="user-agreement__text">进入下一步即代表同意<a  href="/user/userAgreement" class="font_color_1">用户协议</a></p>
			</div>
		</div>
	</div>
    <div id="activity-get__id" hidden>{{ app.activity_id }}</div>


    <div class="hide_content">
        <div class="mask_on" style="display: none"></div>
        <div class="mask_on__1" ></div>


        <!-- 活动说明-->
        <div class="activityDescription_box" style="display: none">
            <div style="margin-bottom: 10px;">
                <div style="padding: 0 10px;display: none">

                    <p style="text-align: center;font-size: 14px">#活动规则#</p>
                    1. 设置个人目标，支付押金报名参加。<br>
                    2. 完成自己所设置的目标，并以打卡等方式进行记录。<br>
                    3. 在活动进行期间,未完成时则扣除<u>全部保证金</u>纳入当日活动瓜分池。并根据<u>系数</u>瓜分给当日参与此活动的<u>所有用户</u>。被扣除的保证金在被瓜分前会扣除1%的服务费，并取整瓜分。（预学金另外计算。）（押金、系数等更多平台元素说明，<a href="https://mp.weixin.qq.com/s/e7LQzUe6DjaN9Zc9rjafFQ" style="color:rgba(31, 162, 255, 0.8)">请点击此处</a> 。）<br>
                    4. 支付完保证金后，在活动结束前不可退出。完成目标天数或保证金为0的情况下，即活动结束，并可退回累计的瓜分的奖励。<br>

                </div>

                <img src="/static/images/sleeping/sleep_notice.jpg" style="width: 100%">
            </div>
        </div>

        <!-- 二维码 -->
        <div class="qqGroupCode_box" style="opacity: 0;">
            <div class="container_on_share_run">
                <div class="swiper-container_on_share_run" data-space-between='10' data-pagination='.swiper-pagination' data-autoplay="1000">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="/static/images/on_share/on_share_sleep_1.jpg" class="fadeInLeft_1" style="width: 100%;" >
                        </div>
                        <!--
                        <div class="swiper-slide">
                            <img src="/static/images/on_share/on_share_run_2.jpg" class="fadeInLeft_1" style="width: 100%;" >
                        </div>
                        -->

                    </div>
                </div>
            </div>
        </div>
    </div>


    <input id="nickname" style="display: none" value="{{ user.nickname }}">


    <script type="text/javascript" src="/static/js/jquery-2.1.4.js"></script>
    <script type="text/javascript" src="/static/js/public.js"></script>
	<script type="text/javascript" src="/static/js/fastclick.js"></script>
    <script type="text/javascript" src="/static/js/jquery-weui-2.1.4.js"></script>
    <script type='text/javascript' src='/static/js/swiper.min.js' charset='utf-8'></script>

	<script>
		// fast click binding
		$(function() {
			FastClick.attach(document.body);
			$(".mask_on__1").hide();
			$(".qqGroupCode_box").hide();
			$(".qqGroupCode_box").css("opacity","1");
		});
		$("iframe").detach();

		//设置 全局变量
        //是否打卡提醒，0不提醒，1提醒
        var _punch_attention_=0;

        //是否使用积分抵扣
        var _is_no_use_point_=0;

        //系数 倍数
        var coefficientTimes=1;

        // 获取 支付 按钮 节点
        var $pay_btn=$("#pay-btn");
	</script>

    <!----    ajax 请求数据---------------------------------------->
    <!-- 排行榜 api/goal_ranking_list  -->
    <script>
        rank();
        var u=0;
        function rank() {
            u=u+1;
            if(u>5){
                return
            }
            $.ajax({
                type: "GET",
                url: "/api/goal_ranking_list",
                //url:"http://119.29.191.32/",
                data:{
                   "activity_type":0
                },
                success: function (res) {
                    //alert(res);
                    $.hideLoading();
                    //console.log(res);
                    var sleep_list_morning=res.sleep_list.morning;
                    var sleep_list_lasting =res.sleep_list.lasting;
                    var sleep_list_watch_lists=res.sleep_list.watch_lists;
                    var sleep_list_bonus_rank=res.sleep_list.bonus_rank;
                    //console.log(sleep_list_morning);
                    //console.log(sleep_list_morning);
                    setTimeout(function () {
                        fun_sleep_list_morning(sleep_list_morning);
                    }, 50);

                    setTimeout(function () {
                        fun_sleep_list_lasting(sleep_list_lasting);
                    }, 100);

                    setTimeout(function () {
                        fun_sleep_list_watch_lists(sleep_list_watch_lists);
                    }, 300);

                    setTimeout(function () {
                        fun_sleep_bonus_rank(sleep_list_bonus_rank)
                    }, 500);
                },
                error:function(res){
                    //console.log(res);
                    $.hideLoading();
                    setTimeout(function () {
                        //rank()
                    }, 100);
                },
                complete: function(XMLHttpRequest, textStatus) {
                    //console.log("ajax 公用");
                }
            });
        }

        // 早起榜
        function fun_sleep_list_morning(morning) {
            //console.log("早起榜");
            //console.log(morning);
            //console.log(morning.crruent_user);
            var current_user=morning.current_user;
            var datas=morning.datas;
            var current_user_rangking=Number(current_user.ranking);
            //console.log(current_user_rangking);
            $(".rank_1 .crruent_user_name").text(current_user.nickname);
            var current_user_get_up_time =current_user.get_up_time.substring(11,19);
            //console.log(current_user_get_up_time);
            if(current_user_get_up_time==''){
                $(".rank_1 .crruent_user_rank_time").text("未打卡");
            }else{
                $(".rank_1 .crruent_user_rank_time").text(current_user_get_up_time);
            }


            var current_user_img='background-size: cover; background: url('+current_user.headimgurl+')  center;background-size: cover;background-repeat: no-repeat;';
            $(".rank_1 .crruent_user_headimgurl").attr("style",current_user_img);
            if(current_user_rangking == 0 || current_user_rangking==null || current_user_rangking == '' || current_user_rangking > 10  ){
                $(".rank_1 .crruent_user_rank").text("第10+名");
            }else{
                $(".rank_1 .crruent_user_rank").text("第"+current_user_rangking+"名");
            }

            //console.log(datas.length);
            if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
                $(".rank_1 .nodata").show();
            } else {
                $(".rank_1 .nodata").hide();

                for (var i = 0; i < datas.length; i++) {
                    //console.log(datas[i]);
                    var rank_ranking=i+1;
                    if(i == 0){
                        //console.log(datas[0]);
                        rank_ranking='<img src="/static/images/rank/1@2x.png"  class="box_content" style="">';
                    }else if(i == 1){
                        rank_ranking='<img src="/static/images/rank/2@2x.png"  class="box_content" style="">';
                    }else if(i == 2){
                        rank_ranking='<img src="/static/images/rank/3@2x.png"  class="box_content" style="">';
                    }else if(i>9){
                        return
                    }else{

                    }
                    var bg='background-size: cover; background: url('+datas[i].headimgurl+')  center;background-size: cover;background-repeat: no-repeat;'

                    var h=' <div class="weui-row weui-no-gutter rank_border_bottom height_22 ">\n' +
                        '       <div class="weui-col-15 text_center font_size_6 height_22 position_relative rank_ranking">\n' +
                        '        '+rank_ranking+'\n' +
                        '    </div>\n' +
                        '\n' +
                        '   <div class="weui-col-55 text_center">\n' +
                        '      <div class="rank_img" style="'+bg+'">\n' +
                        '           <img src="'+datas[i].headimgurl+'" style="width: 100%;opacity: 0;height: 100%;">\n' +
                        '       </div>\n' +
                        '       <div class="rank_name text_left">\n' +
                        '          <p class="p_overflow height_22 rank_name_">'+datas[i].nickname+'</p>\n' +
                        '      </div>\n' +
                        '    </div>\n' +
                        '\n' +
                        '    <div class="weui-col-30 text_center height_22 text_right">\n' +
                        '         <p class="p_overflow height_22 padding_R_10">'+datas[i].get_up_time.substring(11,19)+'</p>\n' +
                        '     </div>\n' +
                        ' </div>';
                    $(".rank_1_box").append(h);
                }
            }
        }

        // 点赞榜
        function fun_sleep_list_watch_lists(watch_lists) {
            //console.log("点赞榜");
            //console.log(watch_lists);
            //console.log(morning);
            //console.log(morning.crruent_user);
            var current_user=watch_lists.current_user;
            var datas=watch_lists.datas;
            var current_user_rangking=Number(current_user.ranking);
            //console.log(current_user_rangking);
            $(".rank_2 .crruent_user_name").text(current_user.nickname);
            $(".rank_2 .crruent_user_rank_time").text(current_user.sum_prise);

            if(current_user_rangking==0 || current_user_rangking==null || current_user_rangking==''|| current_user_rangking > 10  ){
                $(".rank_2 .crruent_user_rank").text("第10+名");
            }else{
                $(".rank_2 .crruent_user_rank").text("第"+current_user_rangking+"名");
            }

            var current_user_img='background-size: cover; background: url('+current_user.headimgurl+')  center;background-size: cover;background-repeat: no-repeat;';
            $(".rank_2 .crruent_user_headimgurl").attr("style",current_user_img);

            //console.log(datas.length);
            if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
                $(".rank_2 .nodata").show();
            } else {
                $(".rank_2 .nodata").hide();

                for (var i = 0; i < datas.length; i++) {
                    //console.log(datas[i]);
                    var rank_ranking=i+1;
                    if(i == 0){
                        //console.log(datas[0]);
                        rank_ranking='<img src="/static/images/rank/1@2x.png"  class="box_content" style="">';
                    }else if(i == 1){
                        rank_ranking='<img src="/static/images/rank/2@2x.png"  class="box_content" style="">';
                    }else if(i == 2){
                        rank_ranking='<img src="/static/images/rank/3@2x.png"  class="box_content" style="">';
                    }else if(i>9){
                        return
                    }else{

                    }
                    var bg='background-size: cover; background: url('+datas[i].headimgurl+')  center;background-size: cover;background-repeat: no-repeat;'

                    var h=' <div class="weui-row weui-no-gutter rank_border_bottom height_22 ">\n' +
                        '       <div class="weui-col-15 text_center font_size_6 height_22 position_relative rank_ranking">\n' +
                        '        '+rank_ranking+'\n' +
                        '    </div>\n' +
                        '\n' +
                        '   <div class="weui-col-55 text_center">\n' +
                        '      <div class="rank_img" style="'+bg+'">\n' +
                        '           <img src="'+datas[i].headimgurl+'" style="width: 100%;opacity: 0">\n' +
                        '       </div>\n' +
                        '       <div class="rank_name text_left">\n' +
                        '          <p class="p_overflow height_22 rank_name_">'+datas[i].nickname+'</p>\n' +
                        '      </div>\n' +
                        '    </div>\n' +
                        '\n' +
                        '    <div class="weui-col-30 text_center height_22 text_right">\n' +
                        '         <p class="p_overflow height_22 padding_R_10">'+datas[i].sum_prise+'</p>\n' +
                        '     </div>\n' +
                        ' </div>';
                    $(".rank_2_box").append(h);
                }
            }
        }

        // 坚持榜
        function fun_sleep_list_lasting(lasting) {
            //console.log("坚持榜");
            //console.log(lasting);
            //console.log(morning);
            //console.log(morning.crruent_user);
            var current_user=lasting.current_user;
            var datas=lasting.datas;
            var current_user_rangking=Number(current_user.ranking);
            //console.log(current_user_rangking);
            $(".rank_3 .crruent_user_name").text(current_user.nickname);
            $(".rank_3 .crruent_user_rank_time").text(current_user.punch_day+" 天");

            if(current_user_rangking==0 || current_user_rangking==null || current_user_rangking==''|| current_user_rangking > 10  ){
                $(".rank_3 .crruent_user_rank").text("第10+名");
            }else{
                $(".rank_3 .crruent_user_rank").text("第"+current_user_rangking+"名");
            }


            var current_user_img='background-size: cover; background: url('+current_user.headimgurl+')  center;background-size: cover;background-repeat: no-repeat;';
            $(".rank_3 .crruent_user_headimgurl").attr("style",current_user_img);

            //console.log(datas.length);
            if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
                $(".rank_3 .nodata").show();
            } else {
                $(".rank_3 .nodata").hide();

                for (var i = 0; i < datas.length; i++) {
                    //console.log(datas[i]);
                    var rank_ranking=i+1;
                    if(i == 0){
                        //console.log(datas[0]);
                        rank_ranking='<img src="/static/images/rank/1@2x.png"  class="box_content" style="">';
                    }else if(i == 1){
                        rank_ranking='<img src="/static/images/rank/2@2x.png"  class="box_content" style="">';
                    }else if(i == 2){
                        rank_ranking='<img src="/static/images/rank/3@2x.png"  class="box_content" style="">';
                    }else if(i>9){
                        return
                    }else{

                    }
                    var bg='background-size: cover; background: url('+datas[i].headimgurl+')  center;background-size: cover;background-repeat: no-repeat;'

                    var h=' <div class="weui-row weui-no-gutter rank_border_bottom height_22 ">\n' +
                        '       <div class="weui-col-15 text_center font_size_6 height_22 position_relative rank_ranking">\n' +
                        '        '+rank_ranking+'\n' +
                        '    </div>\n' +
                        '\n' +
                        '   <div class="weui-col-55 text_center">\n' +
                        '      <div class="rank_img" style="'+bg+'">\n' +
                        '           <img src="'+datas[i].headimgurl+'" style="width: 100%;opacity: 0">\n' +
                        '       </div>\n' +
                        '       <div class="rank_name text_left">\n' +
                        '          <p class="p_overflow height_22 rank_name_">'+datas[i].nickname+'</p>\n' +
                        '      </div>\n' +
                        '    </div>\n' +
                        '\n' +
                        '    <div class="weui-col-30 text_center height_22 text_right">\n' +
                        '         <p class="p_overflow height_22 padding_R_10">'+datas[i].punch_day+' 天</p>\n' +
                        '     </div>\n' +
                        ' </div>';
                    $(".rank_3_box").append(h);
                }
            }
        }

        // 收益榜
        function fun_sleep_bonus_rank(bonus_rank) {
            //console.log("收益榜");
            //console.log(bonus_rank);
            //console.log(morning);
            //console.log(morning.crruent_user);
            var current_user=bonus_rank.current_user;
            var datas=bonus_rank.datas;
            var current_user_rangking=Number(current_user.ranking);
            //console.log(current_user_rangking);
            $(".rank_4 .crruent_user_name").text(current_user.nickname);
            $(".rank_4 .crruent_user_rank_time").text(current_user.bonus+" 元");

            if(current_user_rangking==0 || current_user_rangking==null || current_user_rangking=='' || current_user_rangking > 10 ){
                $(".rank_4 .crruent_user_rank").text("第10+名");
            }else{
                $(".rank_4 .crruent_user_rank").text("第"+current_user_rangking+"名");
            }


            var current_user_img='background-size: cover; background: url('+current_user.headimgurl+')  center;background-size: cover;background-repeat: no-repeat;';
            $(".rank_4 .crruent_user_headimgurl").attr("style",current_user_img);

            //console.log(datas.length);
            if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
                $(".rank_4 .nodata").show();
            } else {
                $(".rank_4 .nodata").hide();
                for (var i = 0; i < datas.length; i++) {
                    //console.log(datas[i]);
                    var rank_ranking=i+1;
                    if(i == 0){
                        //console.log(datas[0]);
                        rank_ranking='<img src="/static/images/rank/1@2x.png"  class="box_content" style="">';
                    }else if(i == 1){
                        rank_ranking='<img src="/static/images/rank/2@2x.png"  class="box_content" style="">';
                    }else if(i == 2){
                        rank_ranking='<img src="/static/images/rank/3@2x.png"  class="box_content" style="">';
                    }else if(i>9){
                        return
                    }else{

                    }
                    var bg='background-size: cover; background: url('+datas[i].headimgurl+')  center;background-size: cover;background-repeat: no-repeat;'

                    var h=' <div class="weui-row weui-no-gutter rank_border_bottom height_22 ">\n' +
                        '       <div class="weui-col-15 text_center font_size_6 height_22 position_relative rank_ranking">\n' +
                        '        '+rank_ranking+'\n' +
                        '    </div>\n' +
                        '\n' +
                        '   <div class="weui-col-55 text_center">\n' +
                        '      <div class="rank_img" style="'+bg+'">\n' +
                        '           <img src="'+datas[i].headimgurl+'" style="width: 100%;opacity: 0">\n' +
                        '       </div>\n' +
                        '       <div class="rank_name text_left">\n' +
                        '          <p class="p_overflow height_22 rank_name_">'+datas[i].nickname+'</p>\n' +
                        '      </div>\n' +
                        '    </div>\n' +
                        '\n' +
                        '    <div class="weui-col-30 text_center height_22 text_right">\n' +
                        '         <p class="p_overflow height_22 padding_R_10">'+datas[i].bonus+' 元</p>\n' +
                        '     </div>\n' +
                        ' </div>';
                    $(".rank_4_box").append(h);
                }
            }
        }

        // 排行榜 却换
        $(".rank_change").click(function () {
            $(".rank_change").removeClass("rank_change_active");
            $(this).addClass("rank_change_active");
            var sta =Number($(this).attr("data-sta"));
            $(".rank_box").hide();
            $(".rank_"+sta).show();
        });

        //动态切换
        $(".load_comments").click(function () {
            $(".load_comments").removeClass("load_comments_active");
            $(this).addClass("load_comments_active");
            var sta =Number($(this).attr("data-sta"));
            $(".load_comments_box").hide();
            $(".load_comments_"+sta).show();
        })

    </script>

    <!-- 滚动 加载 -->
    <script>
        var has_next=0;
        var c_num=0;
        var loading = false;
        var my_id="{{ goal.user_id }}";
        //调用 所有动态 获取ajax 方法
        ajax_api_load_comments(0);

        //调用 个人动态 获取ajax 方法
        ajax_api_load_mine();


        //所有动态 ajax 请求
        function ajax_api_load_comments(num) {
            console.log(num);
            $.ajax({
                type: "POST",
                url: "/api/load_comments",
                data:{
                    "activate_type":0,
                    "c_num":num
                },
                success: function (res) {
                    $.hideLoading();
                    //alert(res);
                    //console.log("--------------------------评论包---------------------------");
                    //console.log(res);
                    //console.log("--------------------------评论包---------------------------");
                    var finish=res.finish;
                    var datas=res.cont;
                    has_next=res.has_next;
                    //console.log(has_next);
                    if(has_next==1){

                    }else{
                        $(".weui-loadmore").hide();
                    }
                    c_num=finish;

                    if(datas==null || datas=="" || datas=="[]"){
                        $("#list .nodata").show();
                    }else{
                        $("#list .nodata").hide();
                        list_show(datas);
                    }
                },
                error:function(res){
                    //console.log("报错");
                    console.log(res);
                    $.hideLoading();

                },
                complete: function(XMLHttpRequest, textStatus) {
                    //console.log("ajax 公用");
                }
            });
        }

        //所有动态 ajax 数据 展示
        function list_show(a) {
            //console.log(typeof(a));
            //console.log("评论数据包");
            //console.log(a.isArray());
            var datas=JSON.parse(a);
            //var datas=JSON.stringify(a);
            //var datas = a;
            console.log(datas);

             if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
             } else {

                 for (var i = 0; i < datas.length; i++) {
                     var data = datas[i];
                     //console.log("-----------------------------");
                     //console.log(data);
                     //console.log("-----------------------------");
                     var h;

                     var punch_id = String(data.id).replace(/-/g, "");
                     //console.log(punch_id);
                     var c_time = data.c_time.substring(5, 16).replace("-", "月").replace(" ", "日 ");
                     var header_img = data.headimgurl;
                     var nickname = data.nickname;
                     var user_id = data.user_id;
                     var content = data.content;


                     var replyComments = 'onclick=replyComments("' + punch_id + '")';

                     var praise_box = '';
                     var is_no_prise = data.is_no_prise;
                     var praise = data.prise;
                     //console.log(praise);
                     if (is_no_prise == 0) {
                         var cccc = '';
                         if (praise == 0) {
                             cccc = ''
                         } else {
                             cccc = praise;
                         }
                         praise_box = praise_box + '<button href="javascript:;" class="news-item__tail-btn weui-flex__item parise-btn weui-flex__item_1_2 button_sty"\n' +
                             'punch_id="' + punch_id + '" sta="' + praise + '" style="border: 0px;">\n' +
                             '<i class="iconfont icon-dianzan"></i>\n' +
                             '<span class="news-item__tail-text">\n' +
                             '<span class="praise">\n' +
                             cccc +
                             '</span>\n' +
                             '</span>\n' +
                             '</button>\n';
                     } else {
                         praise_box = praise_box + '<button href="javascript:;" class="news-item__tail-btn weui-flex__item active weui-flex__item_1_2 button_sty_yes" disabled="disabled" style="border: 0px;">\n' +
                             '    <i class="iconfont icon-dianzan"></i>\n' +
                             '    <span class="news-item__tail-text">\n' +
                             '      <span class="praise">\n' +
                             praise +
                             '      </span>\n' +
                             '    </span>\n' +
                             '</button>\n'
                     }


                     var voucher_ref = data.voucher_ref;
                     var voucher_ref_img_box = '';
                     if (voucher_ref.length == "0" || voucher_ref.length == 0) {

                     } else {
                         for (var j = 0; j < voucher_ref.length; j++) {
                             var voucher_ref_img = voucher_ref[j];
                             //console.log(voucher_ref_img);
                             voucher_ref_img_box = voucher_ref_img_box + ' <div class="uploaderInput_box_" style="margin-top: 10px;display: block;float: left;\n' +
                                 '     background: url(' + voucher_ref_img + ') center;\n' +
                                 '     background-size: cover;\n' +
                                 '     background-repeat: no-repeat;">\n' +
                                 '         <img class="news-item__content-img box_left voucher_ref_img pictureEnlarge" style="position: absolute;opacity: 0;height:100%;" src="' + voucher_ref_img + '">\n' +
                                 '   </div>\n';
                         }

                     }


                     var reply_data_box = '';
                     var reply_data_ = data.reply_data;
                     //console.log(reply_data_);

                     if (reply_data_.length == "0" || reply_data_.length == 0) {

                     } else {
                         for (var l = 0; l < reply_data_.length; l++) {
                             var reply_data__ = reply_data_[l];
                             //console.log(reply_data__);
                             //console.log("--------------------------------------------------------------");
                             reply_data_box = reply_data_box + '<p class="word_break" style="color: #333333;"><span class="news-item__header-text" style="margin-left: 0;">' + reply_data__.nickname + '</span>：<span style="color: #4a4a4a;">' + reply_data__.content + '</span></p>';
                         }

                     }
                     // 可以左滑加载（逻辑删除）
                     if (my_id == user_id || my_id==100259 || my_id==100101) {
                         h = '<div class="weui-cell weui-cell_swiped">\n' +
                             '            <div class="weui-cell__bd" style="transform: translate3d(0px, 0px, 0px);">\n' +
                             '                <ul>\n' +
                             '                    <li class="news-item" data-punch="' + punch_id + '" style="overflow:hidden;">\n' +
                             '                        <div class="new-item__content">\n' +
                             '                            <div>\n' +
                             '                                <img src="' + header_img + '" class="news-item__header-img pictureEnlarge">\n' +
                             '                                <span class="news-item__header-text">' + nickname + '</span>\n' +
                             '                                <span style="color: #B6C1C8;display: inline-block;float: right">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div style="margin-left: 46px;">\n' +
                             '                                <p>' + content + '</p>\n' +
                             '                            </div>\n' +
                             '                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 90%">\n' +
                             voucher_ref_img_box +
                             '                            </div>\n' +
                             '                            <div class="reply_data clamp_5 reply_data_' + punch_id + '">\n' +
                             '                                <div style="margin-left: 46px;">\n' +
                             reply_data_box +
                             '                                </div>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                        <div class="news-item__horzon"></div>\n' +
                             '                        <div class="weui-flex news-item__bottom" style="float: right;display: initial;">\n' +
                             '                            <div class="weui-flex__item" style="padding-left: 50px;display: none">\n' +
                             '                                <span style="color: #B6C1C8;">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div class="weui-flex__item weui-flex" style="flex: 2;">\n' +
                             praise_box +
                             '                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" ' + replyComments + ' punch_id="' + punch_id + '" style="">\n' +
                             '                                    <i class="iconfont icon-pinglun font_color_1"></i>\n' +
                             //'                                    <span class="news-item__tail-text">回复</span>\n' +
                             '                                </button>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                    </li>\n' +
                             '                </ul>\n' +
                             '            </div>\n' +
                             '            <div class="weui-cell__ft" style="display: inline-table">\n' +
                             '                <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout bg_red_1" punch_id="' + punch_id + '" style="display: table-cell;vertical-align: middle;" href="javascript:">删除</a>\n' +
                             '            </div>\n' +
                             '        </div>';
                     }else{
                         // 不可以左滑加载（逻辑删除）
                         h = '                <ul class="news-list">\n' +
                             '                    <li class="news-item" data-punch="' + punch_id + '" style="overflow:hidden;">\n' +
                             '                        <div class="new-item__content">\n' +
                             '                            <div>\n' +
                             '                                <img src="' + header_img + '" class="news-item__header-img pictureEnlarge">\n' +
                             '                                <span class="news-item__header-text">' + nickname + '</span>\n' +
                             '                                <span style="color: #B6C1C8;display: inline-block;float: right">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div style="margin-left: 46px;">\n' +
                             '                                <p>' + content + '</p>\n' +
                             '                            </div>\n' +
                             '                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 90%">\n' +
                             voucher_ref_img_box +
                             '                            </div>\n' +
                             '                            <div class="reply_data clamp_5 reply_data_' + punch_id + '">\n' +
                             '                                <div style="margin-left: 46px;">\n' +
                             reply_data_box +
                             '                                </div>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                        <div class="news-item__horzon"></div>\n' +
                             '                        <div class="weui-flex news-item__bottom" style="float: right;display: initial;">\n' +
                             '                            <div class="weui-flex__item" style="padding-left: 50px;display: none">\n' +
                             '                                <span style="color: #B6C1C8;">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div class="weui-flex__item weui-flex" style="flex: 2;">\n' +
                             praise_box +
                             '                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" ' + replyComments + ' punch_id="' + punch_id + '" style="">\n' +
                             '                                    <i class="iconfont icon-pinglun font_color_1"></i>\n' +
                             //'                                    <span class="news-item__tail-text">回复</span>\n' +
                             '                                </button>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                    </li>\n' +
                             '                </ul>\n'

                     }
                     $("#list").append(h);

                 }
                 //----- for 循环 end---------------------------------------------------
                 $.hideLoading();
                 loading = false;
                 setTimeout(function () {
                     $('.weui-cell_swiped').swipeout();
                 }, 1000);
             }
        }


        //个人动态 ajax 请求
        function ajax_api_load_mine() {
            console.log("个人动态");
            $.ajax({
                type: "POST",
                url: "/api/load_mine",
                data:{
                    "activity_type":0,
                   // "c_num":num
                },
                success: function (res) {
                    $.hideLoading();
                    //alert(res);
                    //console.log("--------------------------评论包---------------------------");
                    console.log(res);
                    //console.log("--------------------------评论包---------------------------");
                    //var finish=res.finish;
                    var datas=res.mine;
                    //has_next=res.has_next;
                    //console.log(has_next);
                    //c_num=finish;
                    if(datas==null || datas=="" || datas=="[]"){
                        $("#my_list .nodata").show();
                    }else{
                        $("#my_list .nodata").hide();
                        my_list_show(datas);
                    }
                },
                error:function(res){
                    //console.log("报错");
                    console.log(res);
                    $.hideLoading();

                },
                complete: function(XMLHttpRequest, textStatus) {
                    //console.log("ajax 公用");
                }
            });
        }

        //个人动态 ajax 数据 展示
        function my_list_show(a) {
            //console.log(typeof(a));
            //console.log("评论数据包");
            //console.log(a.isArray());
            var datas=JSON.parse(a);
            //var datas=JSON.stringify(a);
            //var datas = a;
            console.log(datas);

             if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
             } else {

                 for (var i = 0; i < datas.length; i++) {
                     var data = datas[i];
                     //console.log("-----------------------------");
                     //console.log(data);
                     //console.log("-----------------------------");
                     var h;

                     var punch_id = String(data.id).replace(/-/g, "");
                     //console.log(punch_id);
                     var c_time = data.c_time.substring(5, 16).replace("-", "月").replace(" ", "日 ");
                     var header_img = data.headimgurl;
                     var nickname = data.nickname;
                     var user_id = data.user_id;
                     var content = data.content;


                     var replyComments = 'onclick=replyComments("' + punch_id + '")';

                     var praise_box = '';
                     var is_no_prise = data.is_no_prise;
                     var praise = data.prise;
                     //console.log(praise);
                     if (is_no_prise == 0) {
                         var cccc = '';
                         if (praise == 0) {
                             cccc = ''
                         } else {
                             cccc = praise;
                         }
                         praise_box = praise_box + '<button href="javascript:;" class="news-item__tail-btn weui-flex__item parise-btn weui-flex__item_1_2 button_sty"\n' +
                             'punch_id="' + punch_id + '" sta="' + praise + '" style="border: 0px;">\n' +
                             '<i class="iconfont icon-dianzan"></i>\n' +
                             '<span class="news-item__tail-text">\n' +
                             '<span class="praise">\n' +
                             cccc +
                             '</span>\n' +
                             '</span>\n' +
                             '</button>\n';
                     } else {
                         praise_box = praise_box + '<button href="javascript:;" class="news-item__tail-btn weui-flex__item active weui-flex__item_1_2 button_sty_yes" disabled="disabled" style="border: 0px;">\n' +
                             '    <i class="iconfont icon-dianzan"></i>\n' +
                             '    <span class="news-item__tail-text">\n' +
                             '      <span class="praise">\n' +
                             praise +
                             '      </span>\n' +
                             '    </span>\n' +
                             '</button>\n'
                     }


                     var voucher_ref = data.voucher_ref;
                     var voucher_ref_img_box = '';
                     if (voucher_ref.length == "0" || voucher_ref.length == 0) {

                     } else {
                         for (var j = 0; j < voucher_ref.length; j++) {
                             var voucher_ref_img = voucher_ref[j];
                             //console.log(voucher_ref_img);
                             voucher_ref_img_box = voucher_ref_img_box + ' <div class="uploaderInput_box_" style="margin-top: 10px;display: block;float: left;\n' +
                                 '     background: url(' + voucher_ref_img + ') center;\n' +
                                 '     background-size: cover;\n' +
                                 '     background-repeat: no-repeat;">\n' +
                                 '         <img class="news-item__content-img box_left voucher_ref_img pictureEnlarge" style="position: absolute;opacity: 0;height:100%;" src="' + voucher_ref_img + '">\n' +
                                 '   </div>\n';
                         }

                     }


                     var reply_data_box = '';
                     var reply_data_ = data.reply_data;
                     //console.log(reply_data_);

                     if (reply_data_.length == "0" || reply_data_.length == 0) {

                     } else {
                         for (var l = 0; l < reply_data_.length; l++) {
                             var reply_data__ = reply_data_[l];
                             //console.log(reply_data__);
                             //console.log("--------------------------------------------------------------");
                             reply_data_box = reply_data_box + '<p class="word_break" style="color: #333333;"><span class="news-item__header-text" style="margin-left: 0;">' + reply_data__.nickname + '</span>：<span style="color: #4a4a4a;">' + reply_data__.content + '</span></p>';
                         }

                     }
                     // 可以左滑加载（逻辑删除）
                     if (my_id == user_id || my_id==100259 || my_id==100101) {
                         h = '<div class="weui-cell weui-cell_swiped">\n' +
                             '            <div class="weui-cell__bd" style="transform: translate3d(0px, 0px, 0px);">\n' +
                             '                <ul>\n' +
                             '                    <li class="news-item" data-punch="' + punch_id + '" style="overflow:hidden;">\n' +
                             '                        <div class="new-item__content">\n' +
                             '                            <div>\n' +
                             '                                <img src="' + header_img + '" class="news-item__header-img pictureEnlarge">\n' +
                             '                                <span class="news-item__header-text">' + nickname + '</span>\n' +
                             '                                <span style="color: #B6C1C8;display: inline-block;float: right">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div style="margin-left: 46px;">\n' +
                             '                                <p>' + content + '</p>\n' +
                             '                            </div>\n' +
                             '                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 90%">\n' +
                             voucher_ref_img_box +
                             '                            </div>\n' +
                             '                            <div class="reply_data clamp_5 reply_data_' + punch_id + '">\n' +
                             '                                <div style="margin-left: 46px;">\n' +
                             reply_data_box +
                             '                                </div>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                        <div class="news-item__horzon"></div>\n' +
                             '                        <div class="weui-flex news-item__bottom" style="float: right;display: initial;">\n' +
                             '                            <div class="weui-flex__item" style="padding-left: 50px;display: none">\n' +
                             '                                <span style="color: #B6C1C8;">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div class="weui-flex__item weui-flex" style="flex: 2;">\n' +
                             praise_box +
                             '                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" ' + replyComments + ' punch_id="' + punch_id + '" style="">\n' +
                             '                                    <i class="iconfont icon-pinglun font_color_1"></i>\n' +
                             //'                                    <span class="news-item__tail-text">回复</span>\n' +
                             '                                </button>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                    </li>\n' +
                             '                </ul>\n' +
                             '            </div>\n' +
                             '            <div class="weui-cell__ft" style="display: inline-table">\n' +
                             '                <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout bg_red_1" punch_id="' + punch_id + '" style="display: table-cell;vertical-align: middle;" href="javascript:">删除</a>\n' +
                             '            </div>\n' +
                             '        </div>';

                     }else{
                         // 不可以左滑加载（逻辑删除）
                         h = '                <ul class="news-list">\n' +
                             '                    <li class="news-item" data-punch="' + punch_id + '" style="overflow:hidden;">\n' +
                             '                        <div class="new-item__content">\n' +
                             '                            <div>\n' +
                             '                                <img src="' + header_img + '" class="news-item__header-img pictureEnlarge">\n' +
                             '                                <span class="news-item__header-text">' + nickname + '</span>\n' +
                             '                                <span style="color: #B6C1C8;display: inline-block;float: right">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div style="margin-left: 46px;">\n' +
                             '                                <p>' + content + '</p>\n' +
                             '                            </div>\n' +
                             '                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 90%">\n' +
                             voucher_ref_img_box +
                             '                            </div>\n' +
                             '                            <div class="reply_data clamp_5 reply_data_' + punch_id + '">\n' +
                             '                                <div style="margin-left: 46px;">\n' +
                             reply_data_box +
                             '                                </div>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                        <div class="news-item__horzon"></div>\n' +
                             '                        <div class="weui-flex news-item__bottom" style="float: right;display: initial;">\n' +
                             '                            <div class="weui-flex__item" style="padding-left: 50px;display: none">\n' +
                             '                                <span style="color: #B6C1C8;">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div class="weui-flex__item weui-flex" style="flex: 2;">\n' +
                             praise_box +
                             '                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" ' + replyComments + ' punch_id="' + punch_id + '" style="">\n' +
                             '                                    <i class="iconfont icon-pinglun font_color_1"></i>\n' +
                            // '                                    <span class="news-item__tail-text">回复</span>\n' +
                             '                                </button>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                    </li>\n' +
                             '                </ul>\n'

                     }
                     $("#my_list").append(h);

                 }
                 //----- for 循环 end---------------------------------------------------
                 $.hideLoading();
                 loading = false;
                 setTimeout(function () {
                     $('.weui-cell_swiped').swipeout();
                 }, 1000);
             }
        }

        //回复分享
        function replyComments(punch_id) {
            console.log(String(punch_id));
            var replyComments_other_id=punch_id;
            //console.log(replyComments_other_id);


            $.toast("你还未参加活动","cancel", function() {
                console.log("cancel");
            });

            return
            $.modal({
                title: "回复分享",
                text: '<div class="modalTextarea_box"><textarea class="modalTextarea" id="weui-prompt-input" rows="2"></textarea></div>',
                buttons: [
                    {
                        text: "取消",
                        className: "default"
                    },
                    {
                        text: "发送",
                        onClick: function (e) {
                            //console.log(e);
                            //var name=String('{{ nickname }}');
                            //console.log(name);
                            var text = $(".modalTextarea").val();
                            //$.alert(text);
                            //console.log(text);
                            var len=text.length;
                            //console.log(len);
                            if (text == "" || text == null) {
                                $.toptip('请输入回复内容！', 'error');
                                return
                            }
                            if (text.length >100) {
                                $.hideLoading();
                                $.toptip("不能超过100字", "error");
                                $("#document_text").focus();
                                return
                            }
                            replyComments_ajax(replyComments_other_id,text);
                        }
                    }
                ]
            })
        }

        //滚动 加载 （核心）
        $(document.body).infinite().on("infinite", function() {
            if(loading) return;
            loading = true;
            if(has_next==1){
                //console.log("继续");
                $(".weui-loadmore").show();
                ajax_api_load_comments(c_num);
            }else{
                loading = false;
                $(".weui-loadmore").hide();
            }
        });

        $(document).ready(function(){
            //获取要定位元素距离浏览器顶部的距离
            var navH = $("#fixed_TOP").offset().top;
            //滚动条事件
            $(window).scroll(function(){
                //获取滚动条的滑动距离
                var scroH = $(this).scrollTop();
                //console.log(scroH);
                //滚动条的滑动距离大于等于定位元素距离浏览器顶部的距离，就固定，反之就不固定
                if(scroH>=navH){
                    $("#fixed_TOP").addClass("position_f_T_0");

                }else if(scroH<navH){
                    $("#fixed_TOP").removeClass("position_f_T_0");
                }
                //console.log(navH_2);
            });
          });
    </script>

<!--     ajax 请求数据 end------------------------------------->


	<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>

    <script>
        $(".swiper-container_on_share_run").swiper({
            loop: true,
            autoplay:true
        });

        //<!-- 配置CSRF保护  -->
        $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}' }
        });

        //<!--注入Config信息-->
	    {{ WechatJSConfig|safe}}

        var qrcode_url = "http://wechat.onmytarget.cn/static/images/logo/logo.png";
        //var qrcode_url="http://wechat.onmytarget.cn/static/images/on_logo.jpeg";
        var title="{{ user.nickname }}  邀请你参加作息活动";
        var share_desc="On蜕变 一个好玩的平台";
        wx.ready(function() {
            //wx.hideAllNonBaseMenuItem();
            //wx.hideOptionMenu();
            wx.showMenuItems({
                menuList: ['onMenuShareAppMessage',
                           'onMenuShareTimeline'] // 要显示的菜单项，所有menu项见附录3
            });

            //分享到朋友圈
            wx.onMenuShareTimeline({
                title:title, // 分享标题
                desc: share_desc,
                link: 'http://wechat.onmytarget.cn/activity/a5a0206fb2aa4e8995263c7ab0afa1b5?usid={{ user_id|default:100259 }}', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                imgUrl:qrcode_url, // 分享图标
                success: function () {
                    $.toast("分享成功");
                    // 用户确认分享后执行的回调函数
                },
                cancel: function () {
                }
             });

            //分享到朋友
            wx.onMenuShareAppMessage({
                title: title, // 分享标题
                desc: share_desc, // 分享描述
                link: 'http://wechat.onmytarget.cn/activity/a5a0206fb2aa4e8995263c7ab0afa1b5?usid={{ user_id|default:100259 }}', // 分享链接
                imgUrl: qrcode_url, // 分享图标
                type: '', // 分享类型,music、video或link，不填默认为link
                dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                success: function () {
                    $.toast("分享成功");
                    // 用户确认分享后执行的回调函数
                },
                cancel: function () {
                }
            });
        })
	</script>

    <script>
        //jq 加载
        // 判断是否处于  睡眠模式
        function is_sleeping_mode(){
            return $("#sleeping-mode").hasClass("setting-mode__button-active");
        }

        $(function(){
            // 选择模式
            $(".setting-mode__button").click(function () {
                // 将当前按钮设置为活动按钮
                var active_btn = $(".setting-mode__button-active");
                active_btn.removeClass("setting-mode__button-active");
                $(this).addClass("setting-mode__button-active");
                // 隐藏所有布局
                $(".panel-layout").hide();


                //重置 系数 倍数
                $(".coefficient").removeClass("coefficient_active");
                $(".coefficient_0").addClass("coefficient_active");
                $(".coefficient_explain").hide();
                coefficientTimes=1;
                $pay_btn.attr("data-multiple",1);


                //重置 积分 抵扣 保证金
                $("#switch_score").removeAttr("checked");
                _is_no_use_point_=0;


                //重置 总押金
                $("#guarantee-cash").text(50);


                if(is_sleeping_mode()){
                    $("#sleeping-panel").show();
                    //var a='background: url(/static/images/sleeping/sleeping_1_bg@2x.png) center / cover;position: fixed;top: 0;z-index: 2;';
                    //$(".image-header").attr("style",a);
                    $(".gen-title-text").hide();
                    $("#sleeping-gen-title").show();
                    $(".triangle_1").css("left","85%");
                    $("#pay-btn").attr("sleep_type","0");
                    $(".sleeping_chenge_click").removeClass("active");
                    $(".sleeping_chenge_click_4").addClass("active");
                    $("#pay-btn").attr("goalday",9999);
                    $("#pay-btn").attr("goal_type",1);

                    $(".sleeping_coefficient_4").show();
                    $(".sleeping_coefficient").hide();

                    var coefficient_4=$(".sleeping_chenge_click_4").attr("coefficient");
                    var deposit_4=$(".sleeping_chenge_click_4").attr("deposit");

                    $(".sleeping_coefficient").text(coefficient_4);
                    $("#pay-btn").attr("coefficient",coefficient_4);
                    $(".sleeping_deposit").text(deposit_4);
                    $("#pay-btn").attr("deposit",deposit_4);
                    $("#pay-count").text(deposit_4);
                    //重置 总系数
                    $("#all-coefficient-value").text(coefficient_4);

                }else{
                    $("#getUpEarly-panel").show();
                    //var b='background: url(/static/images/sleeping//getUpEarly_1_bg@2x.png) center / cover;position: fixed;top: 0;z-index: 2;';
                    //$(".image-header").attr("style",b);
                    $(".gen-title-text").hide();
                    $("#getUpEarly-gen-title").show();
                    $(".triangle_2").css("left","85%");
                    $("#pay-btn").attr("sleep_type","1");
                    $(".getUpEarly_chenge_click").removeClass("active");
                    $(".getUpEarly_chenge_click_4").addClass("active");
                    $("#pay-btn").attr("goalday",9999);
                    $("#pay-btn").attr("goal_type",1);

                    $(".getUpEarly_coefficient_4").show();
                    $(".getUpEarly_coefficient").hide();

                    var coefficient_4=$(".getUpEarly_chenge_click_4").attr("coefficient");
                    var deposit_4=$(".getUpEarly_chenge_click_4").attr("deposit");

                    $(".getUpEarly_coefficient").text(coefficient_4);
                    $("#pay-btn").attr("coefficient",coefficient_4);
                    $(".getUpEarly_deposit").text(deposit_4);
                    $("#pay-btn").attr("deposit",deposit_4);
                    $("#pay-count").text(deposit_4);
                    //重置 总系数
                    $("#all-coefficient-value").text(coefficient_4);
                }
            });

            // 模式切换
            $(".dropdown-menu .timeSetMenu").click(function () {
                console.log("点击选择");
                if(is_sleeping_mode()){
                    $("#sleeping__time-text").text($(this).text());
                    //var a=$(this).html().trim();
                }else{
                    $("#getUpEarly__time-text").text($(this).text());
                    //var a=$(this).html().trim();
                }
            });
            
            // 选择 睡眠 7 14 21 无限
            $(".sleeping_chenge_click").click(function () {
                $(".sleeping_chenge_click").removeClass("active");
                $(this).addClass("active");
                var sta=$(this).attr("sta");
                $(".sleeping_coefficient_4").hide();
                $(".sleeping_coefficient").show();
                if(sta=="4"){
                    console.log("选择无限");
                    $("#pay-btn").attr("goalday",9999);
                    $("#pay-btn").attr("goal_type",1);
                    $(".sleeping_coefficient_4").show();
                    $(".sleeping_coefficient").hide();
                    $(".triangle_1").css("left","85%");
                }else if(sta=="1"){
                    console.log("7天");
                    $("#pay-btn").attr("goalday",7);
                    $("#pay-btn").attr("goal_type",0);
                    $(".triangle_1").css("left","10%");
                }else if(sta=="2"){
                    console.log("14天");
                    $("#pay-btn").attr("goalday",14);
                    $("#pay-btn").attr("goal_type",0);
                    $(".triangle_1").css("left","35%");
                }else if(sta=="3"){
                    console.log("21天");
                    $("#pay-btn").attr("goalday",21);
                    $("#pay-btn").attr("goal_type",0);
                    $(".triangle_1").css("left","60%");
                }
                var coefficient=$(this).attr("coefficient");
                var deposit=$(this).attr("deposit");
                $(".sleeping_coefficient").text(coefficient);
                $("#pay-btn").attr("coefficient",coefficient*coefficientTimes);
                $(".sleeping_deposit").text(deposit);
                $("#pay-btn").attr("deposit",deposit*coefficientTimes);
                $("#pay-count").text(deposit);
                is_no_use_point()

                //console.log(sta)
            });

            // 选择 早起 时间 7 14 21 无限
            $(".getUpEarly_chenge_click").click(function () {
                $(".getUpEarly_chenge_click").removeClass("active");
                $(this).addClass("active");
                var sta=$(this).attr("sta");
                $(".getUpEarly_coefficient").show();
                $(".getUpEarly_coefficient_4").hide();
                if(sta=="4"){
                    console.log("选择无限");
                    $("#pay-btn").attr("goalday",9999);
                    $("#pay-btn").attr("goal_type",1);
                    $(".getUpEarly_coefficient").hide();
                    $(".getUpEarly_coefficient_4").show();
                    $(".triangle_2").css("left","85%");
                }else if(sta=="1"){
                    console.log("7天");
                    $("#pay-btn").attr("goalday",7);
                    $("#pay-btn").attr("goal_type",0);
                    $(".triangle_2").css("left","10%");
                }else if(sta=="2"){
                    console.log("14天");
                    $("#pay-btn").attr("goalday",14);
                    $("#pay-btn").attr("goal_type",0);
                    $(".triangle_2").css("left","35%");
                }else if(sta=="3"){
                    console.log("21天");
                    $("#pay-btn").attr("goalday",21);
                    $("#pay-btn").attr("goal_type",0);
                    $(".triangle_2").css("left","60%");
                }
                var coefficient=$(this).attr("coefficient");
                var deposit=$(this).attr("deposit");
                $(".getUpEarly_coefficient").text(coefficient);
                $("#pay-btn").attr("coefficient",coefficient*coefficientTimes);
                $(".getUpEarly_deposit").text(deposit);
                $("#pay-btn").attr("deposit",deposit*coefficientTimes);
                $("#pay-count").text(deposit*coefficientTimes);
                is_no_use_point()

                //console.log(sta)
            });

            // 点击 生成 目标
            $("#gen-btn").click(function () {
                $("#gen-popup").popup();
                $("body").addClass("popup-open");
                //$("#reality_price").text(parseFloat($("#pay-count").html().trim()).toFixed(2));
                var chk = document.getElementById('weuiAgree');

                var balance_price = "{{ balance }}";
                var deserve_price=parseFloat($("#pay-count").html().trim()).toFixed(2);
                var reality_price=deserve_price;

                if (chk.checked) {
                    //使用余额
                    balance_price = Number(balance_price);
                    if(deserve_price > balance_price){
                        reality_price = deserve_price-balance_price;
                    }else{
                        reality_price=0.01;
                    }

                } else {
                    //不使用余额
                    reality_price=deserve_price;
                }
                $("#reality_price").text(parseFloat(reality_price).toFixed(2));
            });

            // 使用余额 切换
            $("#weuiAgree").click(function () {
                //console.log("点击");
                var chk = document.getElementById('weuiAgree');
                var balance_price = "{{ balance }}";
                var deserve_price=parseFloat($("#pay-count").html().trim()).toFixed(2);
                var reality_price=deserve_price;

                if (chk.checked) {
                    //使用余额
                    balance_price = Number(balance_price);
                    if(deserve_price > balance_price){
                        reality_price = deserve_price-balance_price;
                    }else{
                        reality_price=0.01;
                    }

                } else {
                    //不使用余额
                    reality_price=deserve_price;
                }
                $("#reality_price").text(parseFloat(reality_price).toFixed(2));

            });



            //添加系数 翻倍 切换
            $(".coefficient").click(function () {
                $(".coefficient").removeClass("coefficient_active");
                $(this).addClass("coefficient_active");
                coefficientTimes=$(this).attr("data-multiple");
                $pay_btn.attr("data-multiple",coefficientTimes);
                console.log(coefficientTimes);
                var coefficient=Number($(".sleeping_coefficient").text());
                var deposit=Number($(".sleeping_deposit").text());
                if(is_sleeping_mode()){
                    coefficient=Number($(".sleeping_coefficient").text());
                    deposit=Number($(".sleeping_deposit").text());
                }else{
                    coefficient=Number($(".getUpEarly_coefficient").text());
                    deposit=Number($(".getUpEarly_deposit").text());
                }

                $("#all-coefficient-value").text(coefficient*coefficientTimes);
                $("#pay-btn").attr("coefficient",coefficient*coefficientTimes);
                $("#guarantee-cash").text(deposit*coefficientTimes);
                $("#pay-btn").attr("deposit",deposit*coefficientTimes);
                $("#pay-count").text(deposit*coefficientTimes);

                is_no_use_point()
            });

            //进阶设置（更多设置）
            $(".moreSettings").click(function () {
                $(".moreSettings_box").toggleClass("hide");
                $(this).find("a").toggleClass("font_orange_2")
            });

            //切换 打卡 提醒
            $("#switch_remind").click(function () {
                //console.log("切换 打卡 提醒");
                var switch_remind = document.getElementById('switch_remind');
                console.log(switch_remind.checked);
                if(switch_remind.checked){
                    console.log("使用 打卡 提醒");
                    //是否打卡提醒，0不提醒，1提醒
                    _punch_attention_=1;
                    $pay_btn.attr("data-punch_attention",_punch_attention_);
                }else{
                    _punch_attention_=0;
                    $pay_btn.attr("data-punch_attention",_punch_attention_);
                }
                //console.log("使用 打卡 提醒:"+_punch_attention_)
            });

            //切换 积分 抵扣
            $("#switch_score").click(function () {
                //console.log("切换 积分 抵扣");
                var switch_score = document.getElementById('switch_score');
                console.log(switch_score.checked);
                if(switch_score.checked){
                    console.log("使用 积分 抵扣");
                    _is_no_use_point_=1;
                    $pay_btn.attr("data-is_no_use_point",_is_no_use_point_);
                }else{
                    _is_no_use_point_=0;
                    $pay_btn.attr("data-is_no_use_point",_is_no_use_point_);
                    $pay_btn.attr("data-deduction_point",0);
                    $pay_btn.attr("data-deduction_guaranty",0);
                    $(".deduction_point_box").hide();
                }
                is_no_use_point()
                //console.log("切换 积分 抵扣:"+_is_no_use_point_);
            });


            //积分 抵扣 方法
            function is_no_use_point() {
                console.log("抵扣:"+_is_no_use_point_);
                console.log("系数翻倍:"+coefficientTimes);
                _is_no_use_point_=$pay_btn.attr("data-is_no_use_point");
                //console.log(_is_no_use_point_);
                //coefficientTimes = $(".coefficient_active").attr("data-multiple");
                console.log("系数翻倍:"+coefficientTimes);

                test()
                //guaranty=guaranty-use_point*

            }
            
            function test() {
                console.log("设置");
                var deposit=$("#pay-btn").attr("deposit");
                var coefficient=$("#pay-btn").attr("coefficient");
                console.log("押金："+deposit);

                $("#all-coefficient-value").text(coefficient);
                $("#guarantee-cash").text(deposit);

            }


            //切换 打卡 提醒
            $("#switch_remind").click(function () {
                //console.log("切换 打卡 提醒");
                var switch_remind = document.getElementById('switch_remind');
                console.log(switch_remind.checked);
                if(switch_remind.checked){
                    console.log("使用 打卡 提醒");
                    //是否打卡提醒，0不提醒，1提醒
                    _punch_attention_=1;
                    $pay_btn.attr("data-punch_attention",_punch_attention_);
                }else{
                    _punch_attention_=0;
                    $pay_btn.attr("data-punch_attention",_punch_attention_);
                }
                //console.log("使用 打卡 提醒:"+_punch_attention_)
            });

            //切换 积分 抵扣
            $("#switch_score").click(function () {
                //console.log("切换 积分 抵扣");
                var switch_score = document.getElementById('switch_score');
                console.log(switch_score.checked);
                if(switch_score.checked){
                    console.log("使用 积分 抵扣");
                    _is_no_use_point_=1;
                    $pay_btn.attr("data-is_no_use_point",_is_no_use_point_);
                }else{
                    _is_no_use_point_=0;
                    $pay_btn.attr("data-is_no_use_point",_is_no_use_point_);
                    $pay_btn.attr("data-deduction_point",0);
                    $pay_btn.attr("data-deduction_guaranty",0);
                    $(".deduction_point_box").hide();
                }

                is_no_use_point()

                //console.log("切换 积分 抵扣:"+_is_no_use_point_);

            });

            // 微信支付 (创建订单)
            wx.ready(function() {
                $("#pay-btn").click(function () {
                    $.showLoading();

                    $(".weui-toast_content").text("提交中...");


                    // 保证金
                    var deposit = parseFloat($(this).attr("deposit"));

                    // 总系数
                    var coefficient = parseFloat($(this).attr("coefficient"));

                    // 目标天数
                    var goalday = Number($(this).attr("goalday"));

                    // 0代表标 1代表无线
                    var goal_type = Number($(this).attr("goal_type"));

                    //0:睡眠 1:早起
                    var sleep_type = Number($(this).attr("sleep_type"));

                    //是怎使用积分  0不使用
                    var is_no_use_point=0;

                    //是否使用提醒  0不提醒
                    var punch_attention=0;

                    //抵扣积分
                    var deduction_point=0;

                    //抵扣保证金
                    var deduction_guaranty=0;

                    //倍数
                    var multiple=$("#pay-btn").attr("data-multiple");
                    console.log(multiple);


                    //实付金额 （扣除之后）
                    var reality_price=parseFloat($("#pay-count").html());

                    //应付金额 （）
                    var deserve_price=parseFloat(reality_price);

                    var chk = document.getElementById('weuiAgree');

                    var balance_price = "{{ balance }}";
                    var rem = 1;
                    if (chk.checked) {
                        //使用余额
                        rem = 1;
                        balance_price = parseFloat(Number(balance_price));
                        if(deserve_price > balance_price){
                            reality_price = parseFloat(Number(deserve_price*100-balance_price*100)/100);
                        }else{
                            reality_price=parseFloat(0.01);
                        }
                        //console.log("使用余额");
                    } else {
                        //不使用余额
                        rem = 0;
                        reality_price = deserve_price;
                        //console.log("不使用余额");
                    }

                    console.log("实付金额 （扣除之后）："+reality_price);
                    console.log("应付金额："+deserve_price);
                    console.log("保证金："+deposit);
                    console.log("0:标准 1:无限-------"+goal_type);
                    console.log("0:睡眠 1:早起-------"+sleep_type);

                    /*
                    alert("实付金额 （扣除之后）："+reality_price);
                    alert("应付金额："+deserve_price);
                    alert("保证金："+deposit);
                    alert("0:标准 1:无限-------"+goal_type);
                    alert("0:睡眠 1:早起-------"+sleep_type);
                    */
                    //$.hideLoading();

                    //guaranty, coefficient, goal_day, sleep_type,reality_price, deserve_price
                    $.ajax({
                        type: "post",
                        url: "/api/create_sleep_goal",
                        data:{
                            "guaranty":deposit,
                            "coefficient":coefficient,
                            "goal_day":goalday,
                            "sleep_type":sleep_type,
                            "reality_price":reality_price,
                            "deserve_price":deserve_price,
                            "goal_type":goal_type,
                            "multiple":multiple,
                            "deduction_guaranty":deduction_guaranty,
                            "deduction_point":deduction_point,
                            "is_no_use_point":is_no_use_point,
                        },
                        success: function (reponse) {
                            //alert(reponse.rem);
                            console.log(reponse);
                            $.hideLoading();
                            if(reponse.status == 403){
                                $.toast("参加失败！", "forbidden", function() {
                                    //window.location.href = "/activity/index"
                                });
                                return
                            }else if(reponse.status == 200){

                            }else{

                            }
                            if(reponse.rem== "0"){
                                $.toast("已参加活动！", "forbidden", function() {
                                  //do something
                                    //window.location.reload();
                                    window.location.href = "/activity/index"
                                });
                                return
                            }
                            //console.log(reponse)
                            //alert(reponse);
                            //alert("实付金额 （扣除之后）"+reality_price);
                            //alert("rem:"+rem);
                            $.post('/wechatpay', {
                                'goal': reponse['goal'],
                                'reality':reality_price,
                                'deserve':deserve_price,
                                'rem':rem
                            },function (response) {
                                {% if DEBUG %}
                                // 唤起微信支付接口
                                    $.post('/payback', {
                                        'goal':reponse['goal']
                                    },function (res) {
                                            // 重定向到分享页面
                                        //alert("3");
                                        //alert(reponse);
                                        window.location.href = "/goal/share/" + reponse['goal'];
                                    });
                                {% else %}
                                wx.chooseWXPay({
                                    timestamp: response['timeStamp'], // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符
                                    nonceStr: response['nonceStr'], // 支付签名随机串，不长于 32 位
                                    package: response['package'], // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\*\*\*）
                                    signType: response['signType'], // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'
                                    paySign: response['paySign'], // 支付签名
                                    success: function (res) {
                                        // 重定向到分享页面
                                        window.location.href = "/goal/share/" + reponse['goal'];
                                    }
                                });
                                {% endif %}
                            })
                        },
                        error:function(reponse){
                            //alert("错误");
                            //alert(reponse);

                            $.hideLoading();
                            //console.log(reponse)
                        }
                    })
                });
            });  <!-- 微信 end-->


        })
    
	</script>
    <script>
         var swiper_1 = new Swiper('.swiper-container_1', {
            autoplay: false,
            loop: false,
            initialSlide: 100
        });
        //添加 微信 群
        $("#qqGroupCode").click(function () {
            $(".qqGroupCode_box").css("opacity", "1");
            $(".qqGroupCode_box").show();
            $(".mask_on").show();
            $("body").addClass("popup-open");
        });

        // 活动规则说明 弹窗
        $(".rule_box_div").click(function () {
            $(".activityDescription_box").show();
            $(".mask_on").show();
            $("body").addClass("popup-open");
        });
        //关闭弹窗
        $(".mask_on").click(function () {
            $(".activityDescription_box").hide();
            $(".detailed_box_text").hide();
            $(".qqGroupCode_box").hide();
            $(this).hide();
            $("body").removeClass("popup-open");
        });
        //关闭二维码弹窗
        $(".mask_on__1").click(function () {
            $(".qqGroupCode_box").hide();
            $(".qqGroupCode_box").css("opacity", "1");
            $(this).hide();
            $("body").removeClass("popup-open");
        });
       //图片放大
        $("body").on("click", ".pictureEnlarge", function () {
            var src_img = $(this).attr("sta_url");
            if(src_img==undefined || src_img=="" || src_img==null){
                //console.log("console.log(src_img);");
                //console.log(src_img);
                src_img = $(this).attr("src");
            }
            var ImageData_ = $.photoBrowser({
                items: [
                    {
                        image: src_img,
                        caption: ""
                    }
                ]
            });
            ImageData_.open();
        });

        //关闭 弹窗
		$(".weui-popup__overlay").click(function () {
			$("body").removeClass("popup-open");
			$(".reading_sign_in_prompt_box").hide();
		});
    </script>


    <!--   分享 操作 -->
    <script>
        //删除分享
        $('.weui-cell_swiped').swipeout();
        $("body").on("click", ".delete-swipeout", function () {
        //$('.delete-swipeout').click(function () {
            var punch_id =$(this).attr("punch_id");
            var that=$(this);
            console.log(punch_id);
            console.log("删除分享");
            $.confirm({
                title: '删除提示',
                text: '你确定要删除该分享吗？',
                onOK: function () {
                    //点击确认
                    $.post('/api/delete_sleep_comments',{
                        id:punch_id
                    },function (response) {
                        if(response['status'] == 200){
                            $.toast('删除成功！',function () {
                                that.parents('.weui-cell').remove();
                            });
                        }
                        else{
                            $.toast('删除失败<br/>请联系客服', 'cancel');
                        }
                    });
                },
                onCancel: function () {

                }
            });


        });

        //回复
        $(".replyComments").click(function () {
            var replyComments_other_id=$(this).attr("punch_id");
            console.log(replyComments_other_id);
            $.toast("你还未参加活动","cancel", function() {
              console.log("cancel");

            });

            return
            $.modal({
                title: "回复分享",
                text: '<div class="modalTextarea_box"><textarea class="modalTextarea" id="weui-prompt-input" rows="2"></textarea></div>',
                buttons: [
                    {
                        text: "取消",
                        className: "default"
                    },
                    {
                        text: "发送",
                        onClick: function (e) {
                            //console.log(e);
                            //var name=String('{{ nickname }}');
                            //console.log(name);
                            var text = $(".modalTextarea").val();
                            //$.alert(text);
                            //console.log(text);
                            var len=text.length;
                            //console.log(len);
                            if (text == "" || text == null) {
                                $.toptip('请输入回复内容！', 'error');
                                return
                            }
                            if (text.length >100) {
                                $.hideLoading();
                                $.toptip("不能超过100字", "error");
                                $("#document_text").focus();
                                return
                            }

                            replyComments_ajax(replyComments_other_id,text);
                        }
                    }
                ]
            });
        });
        // 回复 ajax

        var name=$("#nickname").val();
        console.log(name.length);
        function replyComments_ajax(other_id,text) {
            $.showLoading();
            $(".weui-toast_content").text("回复中...");
            console.log(other_id);
            console.log(text);
            $.ajax({
                type: "POST",
                url: "/api/sleep_reply",
                data:{
                    "other_id":other_id,
                    "r_content":text
                },
                success: function (res) {
                    //alert(res);
                    $.hideLoading();
                    console.log(res);
                    setTimeout(function () {
                        if(res.status=="403"){
                            $.toast("回复失败", "cancel");
                            return
                        }
                        var name=$("#nickname").val();
                        console.log(name.length);

                        console.log(name);
                        var a='<div style="margin-left: 46px;">' +
                            '<p class="word_break" style="color: #333333;"><span class="news-item__header-text" style="margin-left: 0;">'+name+'</span> ：<span style="color: #4a4a4a;">'+text+'</span></p>' +
                            '</div>';
                        $(".reply_data_"+other_id).append(a);
                        $.toast("回复成功",function () {

                        })
                    }, 500);
                },
                error:function(res){
                    console.log(res);
                    $.hideLoading();
                    setTimeout(function () {
                        $.toast("错误", "cancel");
                    }, 500);
                },
                complete: function(XMLHttpRequest, textStatus) {
                    console.log("ajax 公用");
                }
            });
        }

        $("body").on("click", ".reply_data", function () {
            //console.log("77777");
            $(this).toggleClass("clamp_5");
        });

        //点赞
        $("body").on("click", ".parise-btn", function () {
        //$(".parise-btn").click(function () {
                $(this).removeClass("button_sty");
                $(this).addClass("button_sty_yes");
                var sta =Number($(this).attr("sta"))+1;
                //alert(sta)
                var parise_btn=$(this);
                var punch_id=$(this).attr('punch_id');
                //alert(punch_id);
                $.post('/api/sleep_prise',{
                    id:punch_id
                },function (response) {
                    console.log(response);
                    parise_btn.find(".news-item__tail-text").css("color","#B6C1C8");
                    parise_btn.css("color","rgb(182, 193, 200)");
                    parise_btn.find(".news-item__tail-text").text(""+ sta);
                    //parise_btn.css("border","1px #B6C1C8 solid");
                    parise_btn.removeClass("report-btn");
                    parise_btn.attr("disabled","disabled");
                });
            });

            //举报
            $(".report-btn").click(function () {
                var report_btn = $(this);
                //console.log(report_btn.parents(".news-item").data('punch'));
                var punch_id=$(this).attr('punch_id');
                //alert(punch_id);
                $.confirm({
                    title: '举报',
                    text: '确认举报该用户分享吗？',
                    onOK: function () {
                        $.post('/api/sleep_report',{
                            id:punch_id
                        },function (response) {
                            if(response['status'] === 200){
                                $.toast("举报成功");
                                report_btn.find(".news-item__tail-text").css("color","#B6C1C8");
                                report_btn.find(".news-item__tail-text").text("已举报");
                                report_btn.css("color","rgb(182, 193, 200)");
                                report_btn.css("border","1px #B6C1C8 solid");
                                report_btn.removeClass("report-btn");
                                report_btn.attr("disabled","disabled");

                            }
                            else{
                                $.toast("举报失败<br/>请联系客服","cancel");
                            }
                        });
                    }
                });
            });


        $('.close-swipeout').click(function () {
            $(this).parents('.weui-cell').swipeout('close')
        });



        $("#weui-prompt-input").click(function () {
            $("#weui-prompt-input").focus();
        })
    </script>

    <!-- 图片上传 改用 base64 -->
    <script>

        var file_filepath='';
        var file_refpath='';
        var file_filepatharrayObject=[];
        var file_refpatharrayObject=[];

        var img_Number=0;
        //图片转成base64 方法
        $("#read_comment").click(function () {
            //img_Number=0;
            $(".mask_on__container").show();
            $("#upload-popup").popup();
            $("body").addClass("popup-open");
        });

        function ImgToBase64(file, maxLen, callBack) {
            var img = new Image();

            var reader = new FileReader();//读取客户端上的文件
            reader.onload = function () {
                var url = reader.result;//读取到的文件内容.这个属性只在读取操作完成之后才有效,并且数据的格式取决于读取操作是由哪个方法发起的.所以必须使用reader.onload，
                img.src = url;//reader读取的文件内容是base64,利用这个url就能实现上传前预览图片
            };
            img.onload = function () {
                //生成比例
                var width = img.width, height = img.height;
                //计算缩放比例
                var rate = 1;
                if (width >= height) {
                    if (width > maxLen) {
                        rate = maxLen / width;
                    }
                } else {
                    if (height > maxLen) {
                        rate = maxLen / height;
                    }
                };
                img.width = width * rate;
                img.height = height * rate;
                //生成canvas
                var canvas = document.createElement("canvas");
                var ctx = canvas.getContext("2d");
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0, img.width, img.height);
                var base64 = canvas.toDataURL('image/jpeg', 0.9);
                callBack(base64);
            };

            reader.readAsDataURL(file);
        }


        $(function () {
            //input 上传图片
        /* */
            var sourceNode = document.getElementById("sourceNode");

            function random_string(len) {
                len = len || 32;
                var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';
                var maxPos = chars.length;
                var pwd = '';
                for (i = 0; i < len; i++) {
                    pwd += chars.charAt(Math.floor(Math.random() * maxPos));
                }
                return pwd;
            }

           $("input[accept='image/*']").change(function () {
               $.showLoading();
               $(".weui-toast_content").text("图片获取中...");
                var file = $(this)[0].files[0];//获取input file控件选择的文件
                ImgToBase64(file, 1080, function (base64) {
                    console.log(base64);
                    //$("#result").attr("src",base64)
                    //预览页面上预留一个img元素，载入base64
                    //设定宽高，不然会自动按照压缩过的图片宽高设定，有可能超出预想的范围。
        　　　　　　　　　　　//直接利用ajax上传base64到服务器，完毕
                    setTimeout(function () {

                       $.ajax({
                               type: "post",
                               url: "/api/get_base",
                               data: {
                                   "activity":"sleeping/",
                                   "base64": base64
                               },
                               success: function (res) {
                                   console.log(res);
                                   if(res.status == 200){
                                       img_Number=img_Number+1;
                                       var file_filepath__=res.file_filepath;
                                       file_filepatharrayObject.push(file_filepath__);
                                       var file_refpath__ =res.file_refpath;
                                       file_refpatharrayObject.push(file_refpath__);
                                       var random_name=random_string(16);

                                        var clonedNode = sourceNode.cloneNode(true); // 克隆节点
                                        sourceNode.parentNode.appendChild(clonedNode); // 在父节点插入克隆的节点

                                        clonedNode.setAttribute("id", "clone_" + random_name); // 修改一下id 值，避免id 重复
                                        $targetNode = $('#clone_' + random_name);

                                        clonedNode.setAttribute("class","clone_remove uploaderInput_box img___" +random_name);
                                        var aa='float: left;width: 60px;height: 60px;background-size: cover; background: url('+file_refpath__+') center no-repeat;background-size: contain;margin-top: 20px;margin-right: 10px;';
                                        clonedNode.setAttribute("style",aa);

                                        $targetNode.css("backgroundImage","url("+file_refpath__+")");

                                        //$targetNode.css("backgroundImage",url(file_filepath__));


                                        $targetNode.find(".news-item__content-img ").attr("src",file_refpath__);
                                        var onck="case_img_remove('"+random_name+"','"+file_filepath__+"','"+file_refpath__+"')";
                                        $targetNode.find(".img_remove").attr("onclick", onck);

                                       //console.log(file_filepath);
                                       //console.log(file_filepatharrayObject);
                                       //console.log(file_refpath);
                                       //console.log(file_refpatharrayObject);



                                       newCaseSubmit();

                                       setTimeout(function () {
                                           $.hideLoading();
                                       }, 500);
                                   }else{
                                       $.hideLoading();
                                       $.toast("获取失败！请重试上传图片", "cancel",function () {

                                       });
                                   }
                               },
                               error:function(res){
                                   $.hideLoading();
                                   $.toast("请重试上传图片", "cancel",function () {

                                   });
                                   console.log(res)
                               }
                           });
                    }, 1000);
                });

           });

            //点击上传 结束
            //打卡
        });

        $("#read_comment_submit").click(function () {
            console.log("分享");
            var document_text=$("#document_text").val();
            if(document_text=="" || document_text==undefined || document_text==null){
                $.toptip('输入分享！', 'error');
                    $("#document_text").focus();
                    $.hideLoading();
                    return
            }
             /*  输入说明 控制长度 和 特殊字符 */
            if(document_text.length==0){

            }else{
                if (document_text.length > 200) {
                    $.hideLoading();
                    $.toptip("不能超过200字", "error");
                    $("#document_text").focus();
                    return
                }

                var pattern = /^[a-zA-Z-—=+。，!！￥$#、？：“”`~@%^&*(){}【】[ ;|；,.'‘’\d\u4E00-\u9FA5]+$/i;

                /*
                if (pattern.test(document_text)){
                } else{
                    $.toptip('含有符号，请重试！', 'error',function () {
                        $("#document_text").focus();
                    });

                    $.hideLoading();
                    return
                }

                */

            }
            read_comment_submit(document_text)
        });

        Array.prototype.indexOf = function(val) {
            for (var i = 0; i < this.length; i++) {
                if (this[i] == val) return i;
            }
            return -1;
        };

        Array.prototype.remove = function(val) {
            var index = this.indexOf(val);
            if (index > -1) {
                this.splice(index, 1);
            }
        };

        function newCaseSubmit() {
            console.log(file_refpatharrayObject.length);
            var len=file_refpatharrayObject.length;
            if (len < 3){
                $(".uploaderInput_input").css("display","block");
            }else{
                $(".uploaderInput_input").hide();
            }
            //console.log(file_refpatharrayObject);

            file_filepath = file_filepatharrayObject.join(",");
            file_refpath = file_refpatharrayObject.join(",");

            console.log(file_filepath);
            console.log(file_refpath);
            $.hideLoading();
        }


        //点击移除图片

        //移除 图片
        function case_img_remove(uid,file_filepath__,file_refpath__) {
            file_filepatharrayObject.remove(file_filepath__);
            file_refpatharrayObject.remove(file_refpath__);
            console.log(file_refpatharrayObject);
            console.log(file_filepatharrayObject);
            newCaseSubmit();
            $(".img___"+uid).detach();
        }

            function read_comment_submit(text) {
                console.log(text);
                console.log(file_filepath);
                console.log(file_refpath);
                var content =text;
                $.ajax({
                    type: "post",
                    url: "/api/comment_sleep",
                    async: true,
                    data: {
                        "content":content,
                        "voucher_store":"",
                        "voucher_ref":file_refpath
                    },
                    success: function (result) {
                        console.log(result);
                        if(result.status== 200){
                            $.toast("分享成功", function () {
                                $("body").removeClass("popup-open");
                                $(".mask_on__container").hide();
                                $.closePopup();
                                $("body").removeClass("popup-open");
                                window.location.reload();

                            });
                        }else if(result.status== 401){
                            $.toast("分享失败", "cancel");
                            window.location.reload();
                        }

                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                        console.log("ajax 出错");
                        //$("body").removeClass("popup-open");
                        $.hideLoading();
                        $.toast("分享失败", "cancel",function () {
                            $("body").removeClass("popup-open");
                            $(".mask_on__container").hide();
                            $.closePopup();
                            $("body").removeClass("popup-open");
                            window.location.reload();
                        });
                    },
                    complete: function(XMLHttpRequest, textStatus) {
                        console.log("ajax 公用");
                    }
                })

            }


            //图片放大
        $("body").on("click", ".pictureEnlarge", function () {
            var src_img = $(this).attr("sta_url");
            if(src_img==undefined || src_img=="" || src_img==null){
                //console.log("console.log(src_img);");
                //console.log(src_img);
                src_img = $(this).attr("src");
            }
            var ImageData_ = $.photoBrowser({
                items: [
                    {
                        image: src_img,
                        caption: ""
                    }
                ]
            });
            ImageData_.open();
        });
    </script>

</body>

</html>