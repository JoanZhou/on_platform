<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
	<meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0 minimum-scale=0.5, user-scalable=no" />
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
	<title>{% if goal.sleep_type == 0 %}睡眠模式{% else %}早起模式{% endif %}</title>
	<link rel="stylesheet" href="/static/css/material.min.css">
	<link rel="stylesheet" href="/static/css/weui.min.css" />
	<link rel="stylesheet" href="/static/css/jquery-weui.min.css">
	<link rel="stylesheet" href="/static/css/share.css" />
	<link rel="stylesheet" href="/static/css/goal.css" />
    <link rel="stylesheet" href="/static/css/public.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_591099_seftw34bkl04quxr.css" />
    <style>
        .image-header {
            /*
            {% if goal.sleep_type == 0 %}
                background: url(/static/images/sleeping/sleeping_1_bg@2x.png) no-repeat;
            {% else %}
                background: url(/static/images/sleeping/getUpEarly_1_bg@2x.png) no-repeat;
            {% endif %}
            */
            background: url(/static/images/sleeping/sleeping_banner@2x.png) no-repeat;
            background-size: cover;
        }
		#reading-confirm-btn{
			border-radius: 0;
		}
        .header-mask{
            height: 90px;
            position: absolute;
            bottom: 0;
            width: 100%;
            bottom: 0;
            {#background-color: rgba(0,0,0,1);#}
            background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,1));
        }
        .mdl-card{
            min-height: 0;
            max-height: 300px;
            height: 190px;
        }
        .header_avatar-text{
            margin-bottom: 5px;
        }
        .coloum-space {
            margin-top: 5px;
            margin-bottom: 5px;
        }
        #date-panel::after {
            border: none;
        }
        .news-item:nth-child(1){
            border-top:none;
        }
        .news-item{
            border-bottom:none;
            border-top:none;
        }

        .coloum-space{
            margin-top: 5px;
            margin-bottom: 5px;
        }
        .popup-open{
            overflow: hidden;
            position: fixed;
            top:0;
            left:0;
            width: 100%;
            height: 100%;
        }
        #upload-panel .getUpEarly_bg,#upload-panel .sleeping_bg{
            background: initial;
        }
        #upload-panel .getUpEarly_bg{
            background: url(/static/images/sleeping/getUpEarly_bg.png) no-repeat;
            background-size: 100% 100%;
        }
        #upload-panel .sleeping_bg{
            background: url(/static/images/sleeping/sleeping_bg.png) no-repeat;
            background-size: 100% 100%;
        }
        #upload-panel .getUpEarly_F_bg{
            background: url(/static/images/sleeping/getUpEarly_F_bg.png) no-repeat;
            background-size: 100% 100%;
        }
        #upload-panel .sleeping_F_bg{
            background: url(/static/images/sleeping/sleeping_F_bg.png) no-repeat;
            background-size: 100% 100%;
        }
        #upload-panel .panel__split{
            width: 0;
        }
        .upload-btn__style{
            width: 100%!important;
        }
        #upload-panel .upload-card{
            border-radius: 10px;
        }


	</style>
    <style>
        .header_date-text {
            margin-bottom: 0;
        }

        .header_date{
            margin-bottom: 0;
        }

        .header_date.active>span  {
            border-bottom: 2px solid  #1fa2ff;
        }
        .icon-weixiaozhuanhuan-{
            opacity: 0;
            color: #1fa2ff;
            display: block;
            line-height: 10px;
            font-size: 24px;
        }
        .header_date.active>i  {
            opacity: 0;
        }
        .header_date.active{
            color: #000000;
            {#background: #1fa2ff;#}
            background: inherit;

        }
        /*  完成 */
        .after-finish  >i{
            opacity: 1;
        }
        /*  没有完成 */
        .after-stop >i{
            opacity: 0;
        }
        .notouch >i{
            opacity: 0;
        }
        .header_date::after{
            width:0;
            height: 0;
        }

        .after-finish ,.after-stop ,.today,.firstDay{
            color: #000000;
        }
        .read_start_bg{
            position: relative;
            overflow: hidden;

        }
        .read_start_font{
           font-family:'FangSong'
        }
        .img_remove{
            position: absolute;
            right: -5px;
            top: -5px;
            width: 20px;
            height: 20px;
            z-index: 99999999;
        }

    </style>
    <style>
        .activityDescription_box,.detailed_box_text,.qqGroupCode_box{
            position: fixed;
            z-index: 5000;
            width: 80%;
            max-width: 300px;
            max-height: 80%;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%,-50%);
            transform: translate(-50%,-50%);
            background-color: #fff;
            text-align: left;
            padding: 25px;
            font-size: 10px;
            border-radius: 10px;
            color:rgba(0,0,0,0.5)
        }

        .weui-popup__container.weui-popup__container--visible{
            display: block !important;
        }

        #upload-popup_1 .two{
            background: rgba(250,255,250,1);
            backface-visibility: hidden;
            margin: auto;
            top: 0;
            bottom:10%;
            left: 0;
            right: 0;
            width: 80%;
            height:initial;
            {#z-index: 9999!important;#}
            overflow: hidden;
            border-radius: 15px;
            opacity: 0;
            display: none;
        }

        #upload-popup_1{
        }
        #upload-popup_1 .one{
            backface-visibility: hidden;
        }
        #upload-popup_1 .weui-popup__overlay{
            background-color: rgba(0,0,0,.0);
            display: none;
        }

        #upload-popup_1 .container{
            position: relative;
            transition:0.5s;
            transform-style: preserve-3d;
            height: inherit;
            background-color: rgba(0,0,0,0);
        }

        .mask_on_1{
            position: fixed;
            z-index:9;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,.6);
        }
        .mask_on__1{
            position: fixed;
            z-index: 99999;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,.0);
        }
        .mask_on{
            position: fixed;
            z-index: 1000;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,.6);
        }
        .qqGroupCode_box{
            overflow: hidden;
        }
        .detailed_box_text{
            overflow: hidden;
        }
        .activityDescription_box{
            overflow-y: scroll;
            width: 80%;
            padding: 10px;
        }
    </style>
<!---  重置样式     -->
    <style>
        #upload-panel .panel__bottom{
            font-size: 0.5rem;
            color: white;
        }
        #upload-panel .upload-card{
            padding: 5px;
            height: 100%;
        }
        #upload-panel .panel__split{
            height: 25%;
        }
        .day-index .right{
            display: none;
        }
        .day-index .left{
            display: none;
        }
    </style>
</head>

<body ontouchstart>
	<div class="image-header mdl-card mdl-shadow--2dp">
		<div class="header-title"></div>
		<div class="header-mask"></div>

		<div class="header-desc mdl-card__supporting-text">
			<!--阅读页首-->
			<div class="row-center between">

                <div class="coloum-space" style="width: 30%">
                    <div class="header_avatar-text">
                        {{ app.active_participants }}人参与
                    </div>
                    <div class="header__avatars">
                        {% for person in persons %}
                        <img class="img-circle" src="{{ person.headimgurl }}">
                        {% endfor %}
                    <!--

                    -->
                        <img class="img-circle" src="/static/fake/running_1.jpg">
                        <img class="img-circle" src="/static/fake/running_2.jpg">
                        <img class="img-circle" src="/static/fake/running_3.jpg">
                        <img class="img-circle" src="/static/fake/running_4.jpg">
                        <img class="img-circle" src="/static/fake/running_5.jpg">

				    </div>
                </div>
				<div class="coloum-space" style="position: absolute;left: 50%;transform: translate(-50%,0%);">
                    <div class="header_avatar-text center">总系数</div>
					<div class="header__text">
                        <span style="color: #1fa2ff; font-weight: 500;">{{ app.coefficient }}</span>
                    </div>
				</div>
				<div class="coloum-space">
                    <div class="header_avatar-text center cardCffect_click" >奖金池</div>
                    <div class="header__text">
                        <span style="color: #ff931f; font-weight: 500;" id="app_bonus_all">{{ app.bonus_all|floatformat:"0" }}</span>
                        <span>元</span>
                    </div>
				</div>
			</div>
		</div>

        <div id="qqGroupCode" style="position: absolute;right:20px;top: 20px;width: 30px;">
           <img src="/static/images/user/share@2x.png" style="width: 100%;">
        </div>

        <div id="activityDescription_but" style="position: absolute;right:20px;top: 55px;width: 30px;">
            <img src="/static/images/user/doubt@2x.png" style="width: 100%;">
        </div>

	</div>

	<div class="block-panel" id="profit-panel" style="padding: 5px 5px 0px 5px;">
		<div class="row-center">
			<div class="coloum-space" id="detailed_box_text_but">
				<div class="header_avatar-text goal-header-block" style="line-height: 20px;height: 20px;font-size: 0.7rem;text-align: center">保证金</div>
				<div class="header__text" style="line-height: 20px;height: 20px;">
					<span id="guaranty_down_payment" class="goal_guaranty" style="color: #565c66;font-weight: 600;">{{ goal.guaranty }}</span>
				</div>
			</div>
            <div class="coloum-space">
				<div class="header_avatar-text goal-header-block" style="line-height: 20px;height: 20px;font-size: 0.7rem;text-align: center">我的系数</div>
				<div class="header__text" style="line-height: 20px;height: 20px;">
                    <span class="goal_guaranty" style="color: #565c66;font-weight: 600;position: relative;">
                        <span id="guaranty_new_coeff">{{ default|default:'0' }}</span>
                        <span style="color: #eca285;font-size: 0.6rem;position: absolute;right:-40px;padding: 0 5px;top: 2px;">{{ extra_coeff|default:'' }}</span>
                    </span>
				</div>
			</div>

			<div class="coloum-space {% if goal.goal_type == 1 %}bonus_to_balance{% else %}{% endif %} ">
				<div class="header_avatar-text" style="color: #B6C1C8; font-size: 0.7rem;line-height: 20px;height: 20px;;text-align: center">我的收益</div>
				<div class="header__text" style="position: relative;">
					<span id="bonus_to_balance_num" style="color: #565c66;  font-weight: 600;">{{ goal.bonus|default:0.00 }}</span>
                    <div style="display: inline-block;margin-left: 5px;position: absolute;right: -30px;top: 2px;">
                        <p id="invite_num_plus_1" class="invite_num_plus" style="font-size: 0.4rem;color: #eca285;line-height: 0.4rem;text-align: center;"></p>
                        <p id="invite_num_plus_1_1"  class="invite_num_plus" style="font-size: 0.4rem;color: #eca285;line-height: 0.4rem;text-align: center;margin-top: 2px;"></p>
                    </div>

				</div>
			</div>
		</div>
	</div>

	<div class="block-panel" id="date-panel" style="margin-bottom: 0;padding-bottom: 0;padding-top: 0">
        <div class="row-center  row-center_1">
            <div class="coloum-space">
                <div class="header_date-text">一</div>
            </div>
            <div class="coloum-space">
                <div class="header_date-text">二</div>
            </div>
            <div class="coloum-space">
                <div class="header_date-text">三</div>
            </div>
            <div class="coloum-space">
                <div class="header_date-text">四</div>
            </div>
            <div class="coloum-space">
                <div class="header_date-text">五</div>
            </div>
            <div class="coloum-space">
                <div class="header_date-text">六</div>
            </div>
            <div class="coloum-space">
                <div class="header_date-text">日</div>
            </div>
        </div>

        <div class="swiper-container_1">
            <div class="swiper-wrapper">
                {% for day in datesinform %}
                    <div class="swiper-slide">
                        <div class="row-center" >
                        {% for dates in day %}
                            <div class="coloum-space">
                                <div num ="{{ dates.dayindex }}" class="header_date
                                {% if  dates.is_day_now|yesno:"1,0" == "1" %}
                               active today {% if dates.records == null %}{% else %}after-finish{% endif %}
                               {% else %}
                                   {% if dates.dayindex == "-1" %} notouch
                                   {% elif dates.dayindex == 1 %} firstDay
                                        {% if dates.records == null %}{% else %} after-finish{% endif %}
                                   {% elif dates.dayindex == 0 %} after-stop
                                   {% else %}
                                        {% if dates.records == null %} after-stop{% else %} after-finish{% endif %}
                                   {% endif %}
                               {% endif %} ">

                                    {% if dates.date == "0" %}

                                    {% else %}
                                        <span style="padding-bottom:5px;">{{ dates.date }}</span>
                                    {% endif %}

                                    <i class="iconfont icon-weixiaozhuanhuan-" style=""></i>
                                </div>
                            </div>

                        {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

	</div>


<!-- -->
	<div id="upload-panel">
    {% for day in datesinform %}
        {% for dates in day %}
            <!-- 判断 活动模式 -->
            {% if goal.sleep_type == 0 %}
                <!--0：睡眠 -->
                <div class="day-index dayindex_{{ dates.dayindex }}" {% if dates.is_day_now|yesno:"1,0" == "1" %}{% else %}style="display: none;"{% endif %} >
                    <span>第{{ dates.dayindex }}天</span>
                    <!-- 判断 是否是 准备 阶段 第0天  -->
                    {% if dates.dayindex == 0 %}
                        <!--是 准备 阶段 第0天  -->
                        <div class="panel__body">
                            <div class="upload-sidebar left"></div>
                            <div class="upload-card coloum-space center sleeping_F_bg" style="overflow:hidden;">
                                <div class="coloum-space center">
                                    <span  class="font_color_1" style="color: #B6C1C8;opacity: 0">睡眠</span>
                                    <p style="color:white">准备阶段</p>
                                </div>

                                <p class="panel__middle p_overflow" style="margin-bottom: -10px;font-size: 13px;color:white">{{ dates.saying }}</p>

                                {% if goal.goal_day == 9999 %}
                                    <p class="panel__bottom"  style="">每天睡前、早起连续打卡</p>
                                {% else %}
                                    <p class="panel__bottom" style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 睡前、早起打卡</p>
                                {% endif %}
                            </div>
                            <div class="upload-sidebar right"></div>
                        </div>
                        {% if dates.is_day_now|yesno:"1,0" == "1" %}

                        <div class="weui-flex" style="margin: 0 9%;">
                            <div class="weui-flex__item" style="flex: 3;">
                                <button class="weui-btn  upload-btn__style start continue-read-btn" disabled="disabled">
                                    非打卡时段
                                </button>
                            </div>

                            <div class="weui-flex__item" style="position: relative">
                                <div style="height: 48px;width: 48px;float: right">
                                    <img src="/static/images/sleeping/read_comment.png" id="read_comment" style="color: #ff5223;font-weight: 900;height: 48px;width: 48px;">
{#                                        <i class="iconfont icon-taiyang-copy" id="read_comment" style="padding: 0 5px;color: #ff5223;font-weight: 900;height: 48px;line-height: 48px;"></i>#}
                                </div>

{#                                    <button class="weui-btn weui-btn_primary upload-btn__style bg_color_1_" id="read_comment">#}
{#                                        分享#}
{#                                    </button>#}
                            </div>
                        </div>

                        {% else %}
                        {% endif %}
                    {% else %}
                        <!-- 不是 准备 阶段 第0天  -->

                        <!-- 判断 是否是今天 -->
                        {% if dates.is_day_now|yesno:"1,0" == "1" %}
                            <!-- 是今天 -->
                            <div class="panel__body">
                                <div class="upload-sidebar left"></div>
                                <!-- 判断 是否是21点 以后 -->
                                {% if dates.is_night|yesno:"1,0" == "1" %}
                                <!-- 是21点 以后 -->

                                    <!-- 判断 是否打卡 -->
                                    {% if dates.records == null %}
                                        <!-- 没有打卡 记录-->
                                        <div class="upload-card coloum-space center sleeping_F_bg" style="overflow:hidden;">
                                            <div class="coloum-space center">
                                                <span  class="font_color_1" style="color: #B6C1C8;opacity: 0">睡眠</span>
                                            </div>

                                            <p class="panel__middle p_overflow" style="margin-bottom: -10px;font-size: 13px;color: white;">{{ dates.saying }}</p>

                                            {% if goal.goal_day == 9999 %}
                                                <p class="panel__bottom"  style="">每天睡前、早起连续打卡</p>
                                            {% else %}
                                                <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 睡前、早起打卡</p>
                                            {% endif %}
                                        </div>
                                    {% else %}
                                        <!-- 有打卡 记录 -->
                                        <div class="upload-card row-center center nopadding sleeping_bg" style="color: #B6C1C8;">
                                            <div style="position: absolute;top:5px;left: 0;right: 0;">
                                                <p  class="font_color_1" style="font-size: 0.8rem;opacity: 0">睡眠</p>
                                                <!--
                                                {% if dates.records.today_bonus == null or dates.records.today_bonus == 0 %}
                                                    <p style="font-size: 0.4rem;">当天参与者都完成打卡了</p>
                                                {% else %}
                                                    <p style="font-size: 0.4rem;">今天收益 {{ dates.records.today_bonus }}</p>
                                                {% endif %}
                                                -->

                                            </div>

                                            <div class="coloum-space center">

                                                <p class="hide" style="color: #1fa2ff;font-size: 14px;"><i class="iconfont icon-iconset0454" style="padding: 0 5px"></i>睡觉</p>
                                                <p style="margin-top: 30px;color: white;font-size: 1rem;" >
                                                    {{ dates.records.sleep_time|date:"H:i"|default:"未打卡" }}
                                                </p>
                                            </div>

                                            <div class="panel__split"></div>
                                            <div class="coloum-space center">
                                                <p class="hide" style="color: #1fa2ff;font-size: 14px;"><i class="iconfont icon-taiyang-copy" style="padding: 0 5px"></i>早起</p>
                                                <p style="margin-top: 30px;color: white;font-size: 1rem;">
                                                    {{ dates.records.after_get_up_time|date:"H:i"|default:"未打卡" }}

                                                </p>
                                            </div>
                                            <div style="position: absolute;bottom:5px;left: 0;right: 0;">
                                                {% if goal.goal_day == 9999 %}
                                                    <p class="panel__bottom"  style="">每天连续完成作息打卡</p>
                                                {% else %}
                                                    <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 完成作息打卡</p>
                                                {% endif %}
                                            </div>
                                        </div>

                                    {% endif %}
                                    <!-- 判断 是否打卡 end-->

                                {% else %}
                                <!-- 不是21点 以后 -->

                                    <!-- 判断 是否打卡 -->
                                    {% if dates.records == null %}
                                        <!-- 没有打卡 记录-->
                                        <div class="upload-card coloum-space center sleeping_F_bg" style="overflow:hidden;">
                                            <div class="coloum-space center">
                                                <span  class="font_color_1" style="color: #B6C1C8;opacity: 0">睡眠</span>
                                            </div>

                                            <p class="panel__middle p_overflow" style="margin-bottom: -10px;font-size: 13px;color: white;">{{ dates.saying }}</p>

                                            {% if goal.goal_day == 9999 %}
                                                <p class="panel__bottom"  style="">每天睡前、早起连续打卡</p>
                                            {% else %}
                                                <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 睡前、早起打卡</p>
                                            {% endif %}
                                        </div>
                                    {% else %}
                                        <!-- 有打卡 记录 -->
                                        <div class="upload-card row-center center nopadding sleeping_bg" style="color: #B6C1C8;">
                                            <div style="position: absolute;top:5px;left: 0;right: 0;">
                                                <p  class="font_color_1" style="font-size: 0.8rem;opacity: 0">睡眠</p>
                                                {% if dates.records.today_bonus == null or dates.records.today_bonus == 0 %}
                                                    {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
{#                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天参与者都完成打卡</p>#}
                                                    {% else %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天额外收益 {{ dates.records.extra_earn }}元</p>
                                                    {% endif %}
                                                {% else %}
                                                    {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}元</p>
                                                    {% else %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}+ 额外收益{{ dates.records.extra_earn }}元</p>
                                                    {% endif %}
                                                {% endif %}

                                            </div>

                                            <div class="coloum-space center">
                                                <p class="hide" style="color: #1fa2ff;font-size: 14px;"><i class="iconfont icon-iconset0454" style="padding: 0 5px"></i>睡觉</p>
                                                <p style="margin-top: 30px;color: white;font-size: 1rem;">
                                                    {{ dates.records.before_sleep_time|date:"H:i"|default:"未打卡" }}
                                                </p>
                                            </div>


                                            <div class="panel__split"></div>
                                            <div class="coloum-space center">
                                                <p class="hide" style="color: #1fa2ff;font-size: 14px;"><i class="iconfont icon-taiyang-copy" style="padding: 0 5px"></i>早起</p>
                                                <p style="margin-top: 30px;color: white;font-size: 1rem;">
                                                    {{ dates.records.get_up_time|date:"H:i"|default:"未打卡" }}
                                                </p>
                                            </div>
                                            <div style="position: absolute;bottom:5px;left: 0;right: 0;">
                                                {% if goal.goal_day == 9999 %}
                                                    <p class="panel__bottom"  style="">每天连续完成作息打卡</p>
                                                {% else %}
                                                    <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 完成作息打卡</p>
                                                {% endif %}
                                            </div>
                                        </div>

                                    {% endif %}
                                    <!-- 判断 是否打卡 end-->

                                {% endif %}
                                <!-- 判断 是否是21点 以后 end-->

                                <div class="upload-sidebar right"></div>
                            </div>

                            <div class="weui-flex" style="margin: 0 9%;">
                                {% if dates.button == 0 %}
                                    {% if dates.is_night|yesno:"1,0" == "1" %}
                                        <div class="weui-flex__item" style="flex: 3;">
                                            <button class="weui-btn weui-btn_primary upload-btn__style start continue-read-btn bg_color_1_ SignIn" sleep_type="{{ goal.sleep_type }}" sta="0" id="">
{#                                                <i class="iconfont icon-iconset0454" style="padding: 0 5px;color: #ffe100;font-weight: 900;"></i>#}
                                                睡觉了
                                            </button>
                                        </div>
                                    {% elif dates.is_morning|yesno:"1,0" == "1" %}
                                        <div class="weui-flex__item" style="flex: 3;">
                                            <button class="weui-btn weui-btn_primary upload-btn__style start continue-read-btn bg_color_1_ SignIn" sleep_type="{{ goal.sleep_type }}" sta="0" id="">
{#                                                <i class="iconfont icon-tianqi_icon" style="padding: 0 5px;color: #ff5223;"></i>#}
                                                起床了
                                            </button>
                                        </div>
                                    {% else %}
                                        <div class="weui-flex__item" style="flex: 3;">
                                            <button class="weui-btn  upload-btn__style start continue-read-btn" disabled="disabled">
                                                非打卡时段
                                            </button>
                                        </div>

                                    {% endif %}
                                {% else %}
                                    {% if dates.is_morning|yesno:"1,0" == "1" or dates.is_night|yesno:"1,0" == "1" %}
                                        <div class="weui-flex__item" style="flex: 3;">
                                            <button class="weui-btn  upload-btn__style start continue-read-btn" disabled="disabled">
                                                已打卡
                                            </button>
                                        </div>
                                    {% else %}
                                        <div class="weui-flex__item" style="flex: 3;">
                                            <button class="weui-btn  upload-btn__style start continue-read-btn" disabled="disabled">
                                                非打卡时段
                                            </button>
                                        </div>

                                    {% endif %}
                                {% endif %}

                                <div class="weui-flex__item" style="position: relative">
                                    <div style="height: 48px;width: 48px;float: right">
                                        <img src="/static/images/sleeping/read_comment.png" id="read_comment" style="color: #ff5223;font-weight: 900;height: 48px;width: 48px;">
{#                                        <i class="iconfont icon-taiyang-copy" id="read_comment" style="padding: 0 5px;color: #ff5223;font-weight: 900;height: 48px;line-height: 48px;"></i>#}
                                    </div>

{#                                    <button class="weui-btn weui-btn_primary upload-btn__style bg_color_1_" id="read_comment">#}
{#                                        分享#}
{#                                    </button>#}
                                </div>
                            </div>

                        {% else %}
                            <!-- 不是今天 -->

                            <!-- 不是今天  判断 是否是21点 以后 -->
                            {% if dates.is_night|yesno:"1,0" == "1" %}
                            <!--不是今天 是21点 以后 -->
                                <div class="panel__body">

                                    <!-- 判断 21点后 是否打卡 -->
                                    {% if dates.records == null %}
                                        <!-- 没有打卡 记录-->
                                        <div class="upload-sidebar left"></div>
                                        <div class="upload-card coloum-space center sleeping_F_bg" style="overflow:hidden;">
                                            <div class="coloum-space center">
                                                <span  class="font_color_1" style="opacity: 0">睡眠</span>
                                            </div>

                                            <p class="panel__middle p_overflow" style="margin-bottom: -10px;font-size: 13px;color: white">{{ dates.saying }}</p>


                                            {% if goal.goal_day == 9999 %}
                                                <p class="panel__bottom"  style="">每天睡前、早起连续打卡</p>
                                            {% else %}
                                                <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 睡前、早起打卡</p>
                                            {% endif %}
                                        </div>
                                        <div class="upload-sidebar right"></div>
                                    {% else %}
                                        <!-- 有打卡 记录 -->
                                        <div class="upload-sidebar left"></div>
                                        <div class="upload-card row-center center nopadding sleeping_bg" style="color: #B6C1C8;">
                                            <div style="position: absolute;top:5px;left: 0;right: 0;">
                                                <p  class="font_color_1" style="font-size: 0.8rem;opacity: 0">睡眠</p>
                                                {% if dates.records.today_bonus == null or dates.records.today_bonus == 0 %}
                                                    {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
{#                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天参与者都完成打卡</p>#}
                                                    {% else %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天额外收益 {{ dates.records.extra_earn }}元</p>
                                                    {% endif %}
                                                {% else %}
                                                    {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}元</p>
                                                    {% else %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}+ 额外收益{{ dates.records.extra_earn }}元</p>
                                                    {% endif %}
                                                {% endif %}

                                            </div>

                                            <div class="coloum-space center">
                                                <p class="hide" style="color: #1fa2ff;font-size: 14px;"><i class="iconfont icon-iconset0454" style="padding: 0 5px"></i>睡觉</p>
                                                <p style="margin-top: 30px;color: white;font-size: 1rem;">
                                                    {% if dates.is_sleep_punch|yesno:"1,0" == "1" %}
                                                        {{ dates.records.sleep_time|date:"H:i"|default:"未打卡" }}
                                                    {% else %}
                                                        {{ dates.records.before_sleep_time|date:"H:i"|default:"未打卡" }}
                                                    {% endif %}
                                                </p>
                                            </div>

                                            <div class="panel__split"></div>
                                            <div class="coloum-space center">
                                                <p class="hide" style="color: #1fa2ff;font-size: 14px;"><i class="iconfont icon-taiyang-copy" style="padding: 0 5px"></i>早起</p>
                                                <p style="margin-top: 30px;color: white;font-size: 1rem;">
                                                    {{ dates.records.after_get_up_time|date:"H:i"|default:"未打卡" }}
                                                </p>
                                            </div>
                                            <div style="position: absolute;bottom:5px;left: 0;right: 0;">
                                                {% if goal.goal_day == 9999 %}
                                                    <p class="panel__bottom"  style="">每天连续完成作息打卡</p>
                                                {% else %}
                                                    <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 完成作息打卡</p>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="upload-sidebar right"></div>

                                    {% endif %}
                                    <!-- 判断 21点后 是否打卡 end-->

                                </div>

                            {% else %}
                                <!--不是今天 不是21点 以后 -->
                                <div class="panel__body">

                                    <!-- 判断 是否打卡 -->
                                    {% if dates.records == null %}
                                        <!-- 没有打卡 记录-->
                                        <div class="upload-sidebar left"></div>
                                        <div class="upload-card coloum-space center sleeping_F_bg" style="overflow:hidden;">
                                            <div class="coloum-space center">
                                                <span  class="font_color_1" style="opacity: 0">睡眠</span>
                                            </div>

                                            <p class="panel__middle p_overflow" style="margin-bottom: -10px;font-size: 13px;color: white;">{{ dates.saying }}</p>


                                            {% if goal.goal_day == 9999 %}
                                                <p class="panel__bottom"  style="">每天睡前、早起连续打卡</p>
                                            {% else %}
                                                <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 睡前、早起打卡</p>
                                            {% endif %}
                                        </div>
                                        <div class="upload-sidebar right"></div>
                                    {% else %}
                                        <!-- 有打卡 记录 -->
                                        <div class="upload-sidebar left"></div>
                                        <div class="upload-card row-center center nopadding sleeping_bg" style="color: #B6C1C8;">
                                            <div style="position: absolute;top:5px;left: 0;right: 0;">
                                                <p  class="font_color_1" style="font-size: 0.8rem;opacity: 0">睡眠</p>

                                                {% if dates.records.today_bonus == null or dates.records.today_bonus == 0 %}
                                                    {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
{#                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天参与者都完成打卡</p>#}
                                                    {% else %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天额外收益 {{ dates.records.extra_earn }}元</p>
                                                    {% endif %}
                                                {% else %}
                                                    {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}元</p>
                                                    {% else %}
                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}+ 额外收益{{ dates.records.extra_earn }}元</p>
                                                    {% endif %}
                                                {% endif %}

                                            </div>

                                            <div class="coloum-space center">
                                                <p class="hide" style="color: #1fa2ff;font-size: 14px;"><i class="iconfont icon-iconset0454" style="padding: 0 5px"></i>睡觉</p>
                                                <p style="margin-top: 30px;color: white;font-size: 1rem;">
                                                    {{ dates.records.before_sleep_time|date:"H:i"|default:"未打卡" }}
                                                </p>
                                            </div>


                                            <div class="panel__split"></div>
                                            <div class="coloum-space center">
                                                <p class="hide" style="color: #1fa2ff;font-size: 14px;"><i class="iconfont icon-taiyang-copy" style="padding: 0 5px"></i>早起</p>
                                                <p style="margin-top: 30px;color: white;font-size: 1rem;">
                                                    {{ dates.records.get_up_time|date:"H:i"|default:"未打卡" }}
                                                </p>
                                            </div>
                                            <div style="position: absolute;bottom:5px;left: 0;right: 0;">
                                                {% if goal.goal_day == 9999 %}
                                                    <p class="panel__bottom"  style="">每天连续完成作息打卡</p>
                                                {% else %}
                                                    <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 完成作息打卡</p>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="upload-sidebar right"></div>

                                    {% endif %}
                                    <!-- 判断 是否打卡 end-->

                                </div>

                            {% endif %}
                            <!-- 不是今天 判断 是否是21点 以后 end-->

                        {% endif %}
                        <!-- 判断 是否是今天 end-->
                    {% endif %}
                    <!-- 判断 是否是 准备 阶段 第0天 end -->

                </div>

            {% else %}

                <!-- 1：早起 -->
                <div class="day-index dayindex_{{ dates.dayindex }}" {% if dates.date == "0" %}style="display: none;" {% else %} {% if dates.is_day_now|yesno:"1,0" == "1" %}{% else %}style="display: none;"{% endif %}{% endif %} >
                    <span>第{{ dates.dayindex }}天</span>

                    <!-- 判断 是否是 准备 阶段 第0天  -->
                    {% if dates.dayindex == 0 %}
                        <!--是 准备 阶段 第0天  -->
                        <div class="panel__body">
                            <div class="upload-sidebar left"></div>
                            <div class="upload-card coloum-space center getUpEarly_F_bg" style="overflow:hidden;">
                                <div class="coloum-space center">
                                    <span class="font_color_1" style="opacity: 0;" >早起</span>
                                    <p style="color:white">准备阶段</p>
                                </div>

                                <p class="panel__middle p_overflow" style="margin-bottom: -10px;font-size: 13px;color:white">{{ dates.saying }}</p>

                                {% if goal.goal_day == 9999 %}
                                    <p class="panel__bottom"  style="">每天早起连续打卡</p>
                                {% else %}
                                    <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 早起打卡</p>
                                {% endif %}
                            </div>
                            <div class="upload-sidebar right"></div>
                        </div>
                        {% if dates.is_day_now|yesno:"1,0" == "1" %}

                            <div class="weui-flex" style="margin: 0 9%;">
                                <div class="weui-flex__item" style="flex: 3;">
                                    <button class="weui-btn  upload-btn__style start continue-read-btn" disabled="disabled">
                                        非打卡时段
                                    </button>
                                </div>

                                <div class="weui-flex__item" style="position: relative">
                                    <div style="height: 48px;width: 48px;float: right">
                                        <img src="/static/images/sleeping/read_comment.png" id="read_comment" style="color: #ff5223;font-weight: 900;height: 48px;width: 48px;">
{#                                        <i class="iconfont icon-taiyang-copy" id="read_comment" style="padding: 0 5px;color: #ff5223;font-weight: 900;height: 48px;line-height: 48px;"></i>#}
                                    </div>

{#                                    <button class="weui-btn weui-btn_primary upload-btn__style bg_color_1_" id="read_comment">#}
{#                                        分享#}
{#                                    </button>#}
                                </div>
                            </div>
                        {% else %}
                        {% endif %}
                    {% else %}
                        <!-- 不是 准备 阶段 第0天  -->

                        <!-- 判断 是否是今天 -->
                        {% if dates.is_day_now|yesno:"1,0" == "1" %}
                            <!-- 是今天 -->
                            <div class="panel__body">
                               <!-- 判断 是否打卡 -->
                                {% if dates.records == null %}
                                    <!-- 没有打卡 记录-->
                                    <div class="upload-sidebar left"></div>
                                    <div class="upload-card coloum-space center getUpEarly_F_bg" style="overflow:hidden;">
                                        <div class="coloum-space center">
                                            <span  class="font_color_1" style="opacity: 0">早起</span>
                                        </div>

                                        <p class="panel__middle p_overflow" style="margin-bottom: -10px;font-size: 13px;color: white">{{ dates.saying }}</p>

                                        {% if goal.goal_day == 9999 %}
                                            <p class="panel__bottom"  style="">每天早起连续打卡</p>
                                        {% else %}
                                            <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 早起打卡</p>
                                        {% endif %}
                                    </div>
                                    <div class="upload-sidebar right"></div>

                                {% else %}
                                    <!-- 有打卡 记录 -->
                                    <div class="upload-sidebar left"></div>
                                    <div class="upload-card row-center center nopadding getUpEarly_bg" style="color: #B6C1C8;">
                                        <div style="position: absolute;top:5px;left: 0;right: 0;">
                                            <p   class="font_color_1" style="font-size: 0.8rem;color: #1fa2ff;opacity: 0">早起</p>
{#                                            {% if dates.records.today_bonus == null or dates.records.today_bonus == 0 %}#}
{#                                                {% if dates.is_morning|yesno:"1,0" == "1" %}#}
{#                                                {% else %}#}
{#                                                    <p style="font-size: 0.5rem;margin-top: 10px;color: white">今天参与者都完成打卡</p>#}
{#                                                {% endif %}#}
{##}
{#                                            {% else %}#}
{#                                                <p style="font-size: 0.5rem;margin-top: 10px;color: white">今天收益 {{ dates.records.today_bonus|add:dates.records.extra_earn }}元</p>#}
{#                                            {% endif %}#}
                                            {% if dates.records.today_bonus == null or dates.records.today_bonus == 0 %}
                                                {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
{#                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天参与者都完成打卡</p>#}
                                                {% else %}
                                                    <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天额外收益 {{ dates.records.extra_earn }}元</p>
                                                {% endif %}
                                            {% else %}
                                                {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
                                                    <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}元</p>
                                                {% else %}
                                                    <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}+ 额外收益{{ dates.records.extra_earn }}元</p>
                                                {% endif %}
                                            {% endif %}

                                        </div>
                                        <p  style="margin-top: 30px;color: white;font-size: 1rem;">{{ dates.records.get_up_time|date:"H:i"|default:"未打卡" }}</p>

                                        <div class="coloum-space center " style="display: none">
                                            <p class="hide" style="color: #1fa2ff;font-size: 20px;"><i class="iconfont icon-taiyang-copy" style="padding: 0 5px"></i>起床</p>
                                        </div>
                                        <div class="panel__split"  style="display: none"></div>
                                        <div class="coloum-space center"  style="display: none">
                                            <p style="color: #1fa2ff;font-size: 20px;">{{ dates.records.get_up_time|date:"H:i"|default:"未打卡" }}</p>
                                        </div>

                                        <div style="position: absolute;bottom:5px;left: 0;right: 0;">
                                            {% if goal.goal_day == 9999 %}
                                                <p class="panel__bottom"  style="">每天早起连续打卡</p>
                                            {% else %}
                                                <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 早起打卡</p>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="upload-sidebar right"></div>
                                {% endif %}
                                <!-- 判断 是否打卡 end-->
                            </div>

                            <div class="weui-flex" style="margin: 0 9%;">

                                {% if dates.button == 0 %}
                                    {% if dates.is_morning|yesno:"1,0" == "1" %}
                                        <div class="weui-flex__item" style="flex: 3;">
                                            <button class="weui-btn weui-btn_primary upload-btn__style start continue-read-btn bg_color_1_ SignIn" sleep_type="{{ goal.sleep_type }}" sta="0" id="">
{#                                                <i class="iconfont icon-taiyang-copy" style="padding: 0 5px;color: #ff5223;font-weight: 900;"></i>#}
                                                起床了
                                            </button>
                                        </div>
                                    {% else %}
                                        {% if dates.records == null %}
                                            <div class="weui-flex__item" style="flex: 3;">
                                                <button class="weui-btn  upload-btn__style start continue-read-btn" disabled="disabled">
                                                    非打卡时段
                                                </button>
                                            </div>
                                        {% else %}
                                            <div class="weui-flex__item" style="flex: 3;">
                                                <button class="weui-btn  upload-btn__style start continue-read-btn" disabled="disabled">
                                                    已打卡
                                                </button>
                                            </div>
                                        {% endif %}
                                    {% endif %}
                                {% else %}
                                    <div class="weui-flex__item" style="flex: 3;">
                                        <button class="weui-btn  upload-btn__style start continue-read-btn" disabled="disabled">
                                            已打卡
                                        </button>
                                    </div>
                                {% endif %}

                                <div class="weui-flex__item" style="position: relative">
                                    <div style="height: 48px;width: 48px;float: right">
                                        <img src="/static/images/sleeping/read_comment.png" id="read_comment" style="color: #ff5223;font-weight: 900;height: 48px;width: 48px;">
{#                                        <i class="iconfont icon-taiyang-copy" id="read_comment" style="padding: 0 5px;color: #ff5223;font-weight: 900;height: 48px;line-height: 48px;"></i>#}
                                    </div>

{#                                    <button class="weui-btn weui-btn_primary upload-btn__style bg_color_1_" id="read_comment">#}
{#                                        分享#}
{#                                    </button>#}
                                </div>
                            </div>

                        {% else %}
                            <!-- 不是今天 -->
                            <div class="panel__body">

                                <!-- 判断 是否打卡 -->
                                {% if dates.records == null %}
                                    <!-- 没有打卡 记录-->
                                    <div class="upload-sidebar left"></div>
                                    <div class="upload-card coloum-space center getUpEarly_F_bg" style="overflow:hidden;">
                                        <div class="coloum-space center">
                                            <span style="color: #1fa2ff;">早起</span>
                                        </div>

                                        <p class="panel__middle p_overflow" style="margin-bottom: -10px;font-size: 13px;color: white">{{ dates.saying }}</p>

                                        {% if goal.goal_day == 9999 %}
                                            <p class="panel__bottom"  style="">每天早起连续打卡</p>
                                        {% else %}
                                            <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 早起打卡</p>
                                        {% endif %}
                                    </div>
                                    <div class="upload-sidebar right"></div>
                                {% else %}
                                    <!-- 有打卡 记录 -->
                                    <div class="upload-sidebar left"></div>
                                    <div class="upload-card row-center center nopadding getUpEarly_bg" style="color: #B6C1C8;">
                                        <div style="position: absolute;top:5px;left: 0;right: 0;">
                                            <p style="font-size: 0.6rem;color: #1fa2ff;opacity: 0">早起</p>

{#                                            {% if dates.records.today_bonus == null or dates.records.today_bonus == 0 %}#}
{#                                                {% if dates.is_morning|yesno:"1,0" == "1" %}#}
{#                                                {% else %}#}
{#                                                    {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}#}
{#                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天参与者都完成打卡</p>#}
{#                                                    {% else %}#}
{#                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天额外收益 {{ dates.records.extra_earn }}元</p>#}
{#                                                    {% endif %}#}
{#                                                {% endif %}#}
{#                                            {% else %}#}
{#                                                <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus|add:dates.records.extra_earn }}元</p>#}
{#                                            {% endif %}#}

                                            {% if dates.records.today_bonus == null or dates.records.today_bonus == 0 %}
                                                {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
{#                                                        <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天参与者都完成打卡</p>#}
                                                {% else %}
                                                    <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天额外收益 {{ dates.records.extra_earn }}元</p>
                                                {% endif %}
                                            {% else %}
                                                {% if dates.records.extra_earn == null or dates.records.extra_earn == 0 %}
                                                    <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}元</p>
                                                {% else %}
                                                    <p style="font-size: 0.5rem;margin-top: 10px;color: white">当天收益 {{ dates.records.today_bonus }}+ 额外收益{{ dates.records.extra_earn }}元</p>
                                                {% endif %}
                                            {% endif %}
                                        </div>

                                        <p style="margin-top: 30px;color: white;font-size: 1rem;">{{ dates.records.get_up_time|date:"H:i"|default:"未打卡" }}</p>

                                        <div class="coloum-space center" style="display: none;">
                                            <p class="hide" style="color: #1fa2ff;font-size: 20px;"><i class="iconfont icon-taiyang-copy" style="padding: 0 5px"></i>起床</p>
                                        </div>
                                        <div class="panel__split" style="display: none;"></div>
                                        <div class="coloum-space center" style="display: none;">
                                            <p style="color: #1fa2ff;font-size: 20px;">{{ dates.records.get_up_time|date:"H:i"|default:"未打卡" }}</p>
                                        </div>

                                        <div style="position: absolute;bottom:5px;left: 0;right: 0;">
                                            {% if goal.goal_day == 9999 %}
                                                <p class="panel__bottom"  style="">每天早起连续打卡</p>
                                            {% else %}
                                                <p class="panel__bottom"  style="">在 <span class="panel__bottom-focus">{{ goal.goal_day }}</span> 天内连续 <span class="panel__bottom-focus"></span> 早起打卡</p>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="upload-sidebar right"></div>

                                {% endif %}
                                <!-- 判断 是否打卡 end-->

                            </div>

                        {% endif %}
                        <!-- 判断 是否是今天 end-->
                    {% endif %}
                    <!-- 判断 是否是 准备 阶段 第0天 end -->
                </div>

            {% endif %}
            <!-- 判断 活动模式 end-->
        {% endfor %}
    {% endfor %}

    </div>

    <div class="hide_content">

        <div class="mask_on" style="display: none"></div>
        <div class="mask_on_1" style="display: none"></div>
        <div class="mask_on__1" style=""></div>
        <!-- 二维码 -->
        <div class="qqGroupCode_box" style="opacity: 0;">
            <div class="container_on_share_run">
                <div class="swiper-container_on_share_run" data-space-between='10' data-pagination='.swiper-pagination' data-autoplay="1000">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="/static/images/on_share/on_share_sleep_1.jpg" class="fadeInLeft_1" style="width: 100%;" >
                        </div>
                        <!--
                        <div class="swiper-slide">
                            <img src="/static/images/on_share/on_share_run_2.jpg" class="fadeInLeft_1" style="width: 100%;" >
                        </div>
                        -->

                    </div>
                </div>
            </div>
        </div>

        <!-- 活动说明-->
        <div class="activityDescription_box" style="display: none">
            <div style="margin-bottom: 10px;">
                <img src="/static/images/sleeping/sleep_notice.jpg" style="width: 100%">
                <!--
                <p style="text-align: center;font-size: 14px">#活动规则#</p>
                1. 设置个人目标，支付押金报名参加。<br>
                2. 完成自己所设置的目标，并以打卡等方式进行记录。<br>
                3. 在活动进行期间,未完成时则扣除<u>全部保证金</u>纳入当日活动瓜分池。并根据<u>系数</u>瓜分给当日参与此活动的<u>所有用户</u>。被扣除的保证金在被瓜分前会扣除1%的服务费，并取整瓜分。（预学金另外计算。）（押金、系数等更多平台元素说明，<a href="https://mp.weixin.qq.com/s/e7LQzUe6DjaN9Zc9rjafFQ" style="color:rgba(31, 162, 255, 0.8)">请点击此处</a> 。）<br>
                4. 支付完保证金后，在活动结束前不可退出。完成目标天数或保证金为0的情况下，即活动结束，并可退回累计的瓜分的奖励。<br>

                <br>
                <br>
                <p style="text-align: center;font-size: 14px">#打卡规则#</p>
                <span>早起模式</span><br>
                1. 用户在当天参与活动后活动天数数记为“第0天”，次日活动天数记为“第1天”即可开始在次日早上8点前打卡。<br>
                2. 系数加成算法（T为起床时间，k原系数）<br>
                    5:00≤T≤6:00，k=×1.2<br>
                    6:15＜T≤7:00，k=×1.1<br>
                    7:00＜T≤8:00，无加成<br>
                <br>
                3. 无限期方式系数为1，连续打卡，每天系数+1（最大为50）。<br>
                <span>睡眠模式</span><br>
                1. 用户在20:59:59前参与活动后即可开始，活动天数记为“第0天”。21点后可以打晚上睡眠卡，活动天数记为“第1天”，次日早上8点前打早卡。<br>
                2. 系数加成算法（t为睡觉时间，T为起床时间，k原系数）<br>
                    7小时≤t≤9小时，可加成<br>
                    6小时≤t＜7小时；t＞9小时，不可加成<br>
                    t小时＜6，或睡前不打卡，不可加成且k=×50%<br>

                    5:00≤T≤6:15，k=×1.2<br>
                    6:15＜T≤7:00，k=×1.1<br>
                    7:00＜T≤8:00，无加成<br>
                <br>
                3. 无限期方式系数为1.2，连续打卡，每天系数+1.2（最大为60）。<br>

            -->
            </div>
        </div>
    </div>

    <div class="hide_content">
        <!--分享弹出框-->
        <!--  上传3 张 图片-->

        <style>
             #upload-popup .modal-content{
                justify-content:initial;
                 padding-top:0px;
            }

            #upload-popup .weui-popup__modal {
                height: 360px;
                left: 50%;
                top: 50%;
                width: 80%;
                transform: translate(-50%, -50%);
                border-radius: 10px;
                box-shadow: 1px 1px 2px rgba(0,0,0,0.1);
                background: #ffffff;
            }
            #sourceNode{
                display: none;
            }
            .uploaderInput_box{
                width: 70px;
                height: 70px;
                position: relative;
            }

            .weui-uploader__input-box{
                width: 68px;
                height: 68px;
                margin-top: 9px;
            }

            .uploaderInput_box_{
                width: 28%;
                margin-left: 3%;
                height: 100px;
            }
            .news-item__content-img {
                width: 28%;

            }
        </style>

        <div id="upload-popup" class="weui-popup__container popup-bottom">
            <div class="weui-popup__overlay"></div>
                <div class="weui-popup__modal">
                    <div class="modal-content">

                        <div class="row-center center" id="" style="text-align: center;height: 40px;line-height:40px;overflow: hidden;margin-top: 10px;">
                            分享
                        </div>

                        <div style="overflow: hidden;border-bottom: 1px solid  #ededed;width: 80%;margin: 0 auto;height: 100px;">
                            <textarea class="weui-textarea" id="document_text" placeholder="写下此刻的感想与收获吧..." rows="3" style="margin: 10px auto;font-size: 13px;z-index: 99999"></textarea>
                        </div>

                        <div id="" style="height:auto;overflow: hidden;margin:10px auto;width: 80%;">
                            <div class="news-item__content" style="height: 120px;">

                                <div class="weui-uploader__bd">
                                    <ul class="weui-uploader__files" id="uploaderFiles">
                                        <li class="uploaderInput_box" id="sourceNode" style="float: left;width: 60px;height: 60px;background: url(/static/order/demo.png) center no-repeat;background-size: cover;">
                                            <div class="weui-cell__ft img_remove">
                                                <i class="iconfont icon-guanbi font_red_1" style="line-height: 20px;height: 20px;font-size: 20px"></i>
                                            </div>
                                            <img class="news-item__content-img uploaderInput_img_1 box_content pictureEnlarge"
                                                 src="/static/order/demo.png" style="width: 60px;height: 60px;display: block;margin: auto;opacity: 0">
                                        </li>
                                    </ul>
                                    <div class="weui-uploader__input-box uploaderInput_input" style="width: 60px;height: 60px;margin-left: 13px;display: block;margin-top: 20px;">
                                        <input id="uploaderInput" class="weui-uploader__input" type="file" accept="image/*">
                                    </div>

                            </div>

                        </div>

                    </div>

                        <button class="weui-btn weui-btn_primary" id="read_comment_submit" style="    position: absolute;bottom: 0;height: 40px;line-height: 40px;overflow: hidden">
                            确认
                        </button>
                    </div>
                </div>
            </div>

        <!--- 卡片 效果 -->
        <div id="upload-popup_1" class="weui-popup__container popup-bottom cardCffect_box">
            <div class="weui-popup__overlay"></div>

            <div class="container">
                <div class="weui-popup__modal one">

                </div>

                <div class="weui-popup__modal two cardCffect" style="height: 60%;width: 60%;border: 1px solid white;opacity: 0">
                    <div style="position: relative;background: rgba(250,255,250,0);">
                        <img id="goal_img" src="/static/images/goal/1@2x.jpg" style="width: 100%">
                        <div style="position: absolute;bottom: 30px;right: 10px;width: 100px">
                            <img src="/static/images/goal/5732@2x.png" style="width: 100%;">
                        </div>
                        <div style="position: absolute;bottom: 40px;right: 10px;width: 100px;text-align: center;color: white;">
                            <p class="now_d">28</p>
                            <p class="now_m">28</p>
                        </div>
                        <div style="position: absolute;bottom: 10px;right: 10px;width: 100px;text-align: center;color: white;">
                            <p class="now_y">2018</p>
                        </div>
                    </div>

                    <div style="background: url('/static/images/goal/572@2x.png') no-repeat center;background-size: contain;width: 150px;height: 40px;line-height: 40px;display: block;margin: auto;opacity: 0;">
                        <p style="text-align: center;height: 40px;line-height: 40px;font-size: 16px;">第 {{ punch_day|add:1 }} 天</p>
                    </div>

                    <div style="text-align: center;">
                        <p style="font-size: 10px;line-height: 20px;">{{ app.active_participants|default:0 }}正在参与</p>
                        <p style="font-size: 10px;line-height: 20px;">「作息活动」</p>
                    </div>
                    <div style="display: block;width: 20%;margin: 10px auto 0px;">
                        <img id="share_1" src="/static/images/share/789@2x.png" style="width: 100%">
                    </div>

                </div>
            </div>

            <div sta="0" class="click_col"  style="width: 30px;display: block;margin: auto;position: absolute;bottom:50px;left: 0;right: 0;z-index: 999999999999999;opacity: 0">
                <img src="/static/images/goal/col.png" style="width: 100%;display: block;margin: auto;">
            </div>

        </div>
    </div>

<!---------------动态----------------------------------------------->
    <style>
        .news-list {
            border-top: 1px solid #e5e5e5;
            margin-bottom: 0;
            list-style: none;
            background-color: white;
        }
        .news-list .news-item:last-child {
            margin-bottom: 0px;
        }
        .news-item:nth-child(1) {
            border-top: none;
        }
        .new-item__content {
            padding-top: 20px;
            padding-left: 10px;
            padding-right: 10px;
        }
        .news-item__header-img {
            width: 32px;
            height: 32px;
            box-sizing: border-box;
            border-radius: 50%;
            background-color: white;
        }
        .news-item__header-text {
            margin-left: 10px;
            font-size: 0.7rem;
        }
        .news-item__content {
            position: relative;
            max-height: 100px;
            height: auto;
            overflow: hidden;
        }

        .reply_data {
            margin-top: 10px;
        }
        .news-item__horzon {
            width: 100%;
            margin-top: 10px;
            margin-bottom: 10px;
            background: #B6C1C8;
        }
        .news-item__bottom {
            margin-bottom: 10px;
        }
         /*
        点赞，举报，回复
         */
        .button_sty{
            margin-left: 5px;
            min-width: 50px;
            max-width: 120px;
            padding: 1px 5px;
            height: 22px;
            line-height: 18px;
            color: rgba(31,162,255,1);
            background-color: rgba(0,0,0,0);
            /*
            border: 1px #1fa2ff solid;
            */
            border: none;
        }

        .button_sty_yes{
            margin-left: 5px;
            min-width: 50px;
            max-width: 120px;
            padding: 1px 5px;
            height: 22px;
            line-height: 18px;
            color: rgba(182, 193, 200,1);
            background-color: rgba(0,0,0,0);
            border: none;
        }
        .button_sty_yes > span{
            color: rgba(182, 193, 200,1);
        }

        .icon-dianzan{
            font-size: 14px;
        }
        .modalTextarea_box {
            width: 96%;
            height: 150px;
            font-size: 17px;
            border: 1px #f6f1f1 solid;
            padding: 2%;
        }
        .modalTextarea{
            {#border: #e7e7e7 solid 1px;#}
            height: 150px;
            font-size: 17px;
            border: none;
            text-indent: 2em;
            width: 100%;
            {#border-top: 1px #f6f1f1 solid;#}
            {#border-bottom: 1px #f6f1f1 solid;;#}
        }
        input,button,select,textarea{outline:none}
        textarea{resize:none}


        .rank_change_active,.load_comments_active{
            border-bottom: 2px solid  rgba(255,171,24,1);
        }
        .rank_box{
            display: none;
        }

        .rank_1{
            display: block;
        }

        .height_22{
            line-height: 2.2rem;
            height: 2.2rem;
        }
        .rank_border_bottom {
            border-bottom: 1px solid rgba(204,204,204,0.5);
        }
        .rank_border_bottom .rank_img{
            border-radius:5px;
            float: left;
            width: 1.4rem;
            height: 1.4rem;
            display:block;
            overflow:hidden;
            background: url('/static/avatar/100445.jpg') no-repeat;
            background-size: cover;
            margin-top: 0.4rem;
        }
        .rank_border_bottom .rank_name{
            display:block;float: left;border-radius: 5px;margin: 0 10px
        }
        .rank_ranking img{
            width: 1.2rem;height: 1.2rem;
        }

        #tab2 .news-item__header-text{
            color: #5b6a92;
        }


    </style>

    <!-- 动态 -->
    <div class="bg_white" style="">
        <div class="weui-tab" style="z-index: 3;width: 100%">
            <div class="weui-navbar bg_white" id="fixed_TOP">
                <a class="weui-navbar__item" href="#tab1">
                    排行榜
                </a>

                <a class="weui-navbar__item  weui-bar__item--on" href="#tab2">
                    动态
                </a>
            </div>

            <div class="weui-tab__bd">
                <div id="tab1" class="weui-tab__bd-item">

                    <div class="weui-flex font_size_6" style="margin-top: 10px;height: 30px;line-height: 30px;margin-left:30px;margin-right: 30px">
                        <div class="weui-flex__item rank_change text_center rank_change_active" data-sta="1">
                            早起榜
                        </div>
                        <div class="weui-flex__item rank_change text_center" data-sta="2">
                            点赞榜
                        </div>
                        <div class="weui-flex__item rank_change text_center" data-sta="3">
                            坚持榜
                        </div>
                        <div class="weui-flex__item rank_change text_center" data-sta="4">
                            收益榜
                        </div>
                    </div>

                    <!--  早起榜 -->
                    <div class="rank_box fadeInLeft_1 rank_1" style="margin: 00px 20px;">
                        <!-- 前三排行-->
                        <div  class="weui-flex rank_border_bottom" style="margin-top: 30px;display: none">
                            <div class="weui-flex__item">
                                <div style="width: 100%;height: 100%;margin-top: 20px">
                                    <div style="position: relative">
                                        <img class="ranking_2_headimgurl" src="/static/avatar/100000.jpg" style="border-radius: 50%;width: 50%;display: block;margin: auto;border: 2px solid black;">
                                        <div style="position: absolute;top: -10px;width: 20%;right:55%;margin: auto;">
                                            <img src="/static/images/aprilFool/2@2x.png" style="width: 100%">
                                        </div>
                                        <div style="position: absolute;bottom: 10px;right:0;margin: auto;width: 40%; ">
                                            <img src="/static/images/aprilFool/2_1@2x.png" style="width: 65%;">
                                        </div>
                                    </div>
                                    <p class="ranking_2_nickname" style="text-align: center;">小明</p>
                                </div>
                            </div>
                            <div class="weui-flex__item">
                                <div style="width: 100%;height: 100%;">
                                    <div style="position: relative">
                                        <img class="ranking_1_headimgurl" src="/static/avatar/100000.jpg" style="border-radius: 50%;width: 70%;display: block;margin: auto;border: 2px solid black;">
                                        <div style="position: absolute;top: -15px;width: 25%;right:55%;margin: auto;">
                                            <img src="/static/images/aprilFool/1@2x.png" style="width: 100%">
                                        </div>
                                        <div style="position: absolute;bottom: 15px;right:-10px;margin: auto;width: 40%; ">
                                            <img src="/static/images/aprilFool/1_1@2x.png"  style="width: 65%;">
                                        </div>
                                    </div>
                                    <p class="ranking_1_nickname" style="text-align: center;">小王</p>
                                </div>
                            </div>
                            <div class="weui-flex__item">
                                <div style="width: 100%;height: 100%;margin-top: 20px">
                                    <div style="position: relative">
                                        <img class="ranking_3_headimgurl" src="/static/avatar/100259.jpg" style="border-radius: 50%;width: 50%;display: block;margin: auto;border: 2px solid black;">
                                        <div style="position: absolute;top: -10px;width: 20%;right:55%;margin: auto;">
                                            <img src="/static/images/aprilFool/3@2x.png" style="width: 100%">
                                        </div>
                                        <div style="position: absolute;bottom: 10px;right:0;margin: auto;width: 40%; ">
                                            <img src="/static/images/aprilFool/3_1@2x.png"  style="width: 65%;">
                                        </div>
                                    </div>
                                    <p class="ranking_3_nickname" style="text-align: center;">校长</p>
                                </div>
                            </div>
                        </div>
                        <!-- 前三排行 以外-->

                        <!-- 自己-->
                         <div class="weui-row weui-no-gutter rank_border_bottom height_22" style="margin-top: 0">
                             <div class="weui-col-15 text_center font_size_4" style="opacity: 0">
                                 我
                             </div>

                             <div class="weui-col-55 text_center">
                                 <div class="rank_img crruent_user_headimgurl" style="">
                                     <img class="" src="/static/avatar/100445.jpg" style="width: 100%;opacity: 0">
                                 </div>
                                 <div class="rank_name text_left">
                                     <p class="p_overflow font_size_5 crruent_user_name" style="line-height: 0.8rem;height: 0.8rem;margin-top: 0.4rem;">小娃娃</p>
                                     <p class="p_overflow font_size_5 crruent_user_rank" style="line-height: 0.8rem;height: 0.8rem;">第20+名</p>
                                 </div>
                             </div>

                             <div class="weui-col-30 text_center height_22 text_right">
                                 <p class="p_overflow height_22 crruent_user_rank_time padding_R_10">05:00:00</p>
                             </div>

                        </div>
                        <!-- 自己 end-->

                        <!-- 排行-->
                        <div class="rank_1_box">
                            <!-- 暂无人上榜 -->
                            <div class="weui-row weui-no-gutter rank_border_bottom height_22 nodata" style="display: none">
                                <div class="weui-col-20 text_center font_size_6 height_22 position_relative rank_ranking">

                                 </div>

                                <div class="weui-col-60 text_center">
                                    暂无人上榜
                                 </div>

                                <div class="weui-col-20 text_center height_22 text_right">

                                 </div>
                            </div>



                        </div>
                    </div>

                    <!-- 点赞榜 -->
                    <div class="rank_box fadeInLeft_1 rank_2" style="margin: 00px 10px;">

                        <!-- 自己-->
                         <div class="weui-row weui-no-gutter rank_border_bottom height_22">
                             <div class="weui-col-15 text_center font_size_5" style="opacity: 0">
                                 我
                             </div>

                             <div class="weui-col-55 text_center">
                                 <div class="rank_img crruent_user_headimgurl" style="">
                                     <img class="" src="/static/avatar/100445.jpg" style="width: 100%;opacity: 0">
                                 </div>
                                 <div class="rank_name text_left">
                                     <p class="p_overflow font_size_5 crruent_user_name" style="line-height: 0.8rem;height: 0.8rem;margin-top: 0.4rem;">小娃娃</p>
                                     <p class="p_overflow font_size_5 crruent_user_rank" style="line-height: 0.8rem;height: 0.8rem;">第20+名</p>
                                 </div>
                             </div>

                             <div class="weui-col-30 text_center height_22 text_right">
                                 <p class="p_overflow height_22 crruent_user_rank_time padding_R_10"></p>
                             </div>

                        </div>

                        <!-- 排行-->
                        <div class="rank_2_box">
                            <!-- 暂无人上榜 -->
                            <div class="weui-row weui-no-gutter rank_border_bottom height_22 nodata" style="display: none">
                                <div class="weui-col-20 text_center font_size_6 height_22 position_relative rank_ranking">

                                 </div>

                                <div class="weui-col-60 text_center">
                                    暂无人上榜
                                 </div>

                                <div class="weui-col-20 text_center height_22 text_right">

                                 </div>
                            </div>



                        </div>
                    </div>

                    <!-- 坚持榜 -->
                    <div class="rank_box fadeInLeft_1 rank_3" style="margin: 00px 10px;">
                        <!-- 自己-->
                         <div class="weui-row weui-no-gutter rank_border_bottom height_22">
                             <div class="weui-col-15 text_center font_size_5"  style="opacity: 0">
                                 我
                             </div>

                             <div class="weui-col-55 text_center">
                                 <div class="rank_img crruent_user_headimgurl" style="">
                                     <img class="" src="/static/avatar/100445.jpg" style="width: 100%;opacity: 0">
                                 </div>
                                 <div class="rank_name text_left">
                                     <p class="p_overflow font_size_5 crruent_user_name" style="line-height: 0.8rem;height: 0.8rem;margin-top: 0.4rem;">小娃娃</p>
                                     <p class="p_overflow font_size_5 crruent_user_rank" style="line-height: 0.8rem;height: 0.8rem;">第10+名</p>
                                 </div>
                             </div>

                             <div class="weui-col-30 text_center height_22 text_right">
                                 <p class="p_overflow height_22 crruent_user_rank_time padding_R_10"></p>
                             </div>

                        </div>

                        <!-- 排行-->
                        <div class="rank_3_box">
                            <!-- 暂无人上榜 -->
                            <div class="weui-row weui-no-gutter rank_border_bottom height_22 nodata" style="display: none">
                                <div class="weui-col-20 text_center font_size_6 height_22 position_relative rank_ranking">

                                 </div>

                                <div class="weui-col-60 text_center">
                                    暂无人上榜
                                 </div>

                                <div class="weui-col-20 text_center height_22 text_right">

                                 </div>
                            </div>

                        </div>
                    </div>

                    <!-- 收益榜 -->
                    <div class="rank_box fadeInLeft_1 rank_4" style="margin: 00px 10px;">
                        <!-- 自己-->
                         <div class="weui-row weui-no-gutter rank_border_bottom height_22">
                             <div class="weui-col-15 text_center font_size_5"  style="opacity: 0">
                                 我
                             </div>

                             <div class="weui-col-55 text_center">
                                 <div class="rank_img crruent_user_headimgurl" style="">
                                     <img class="" src="/static/avatar/100445.jpg" style="width: 100%;opacity: 0">
                                 </div>
                                 <div class="rank_name text_left">
                                     <p class="p_overflow font_size_5 crruent_user_name" style="line-height: 0.8rem;height: 0.8rem;margin-top: 0.4rem;">小娃娃</p>
                                     <p class="p_overflow font_size_5 crruent_user_rank" style="line-height: 0.8rem;height: 0.8rem;">第10+名</p>
                                 </div>
                             </div>

                             <div class="weui-col-30 text_center height_22 text_right">
                                 <p class="p_overflow height_22 crruent_user_rank_time padding_R_10">05:00:00</p>
                             </div>

                        </div>

                        <!-- 排行-->
                        <div class="rank_4_box">
                            <!-- 暂无人上榜 -->
                            <div class="weui-row weui-no-gutter rank_border_bottom height_22 nodata" style="display: none">
                                <div class="weui-col-20 text_center font_size_6 height_22 position_relative rank_ranking">

                                 </div>

                                <div class="weui-col-60 text_center">
                                    暂无人上榜
                                 </div>

                                <div class="weui-col-20 text_center height_22 text_right">

                                 </div>
                            </div>

                        </div>
                    </div>

                </div>

                <div id="tab2" class="weui-tab__bd-item infinite weui-tab__bd-item--active">
                    <!-- 动态 切换 tab-->
                    <div class="weui-flex font_size_6" style="margin-top: 10px;height: 30px;line-height: 30px;margin-left:60px;margin-right: 60px">
                        <div class="weui-flex__item load_comments text_center load_comments_active" data-sta="1">
                            所有
                        </div>
                        <div class="weui-flex__item load_comments text_center" data-sta="2">
                            个人
                        </div>
                        <div class="weui-flex__item load_comments text_center hide" data-sta="3">
                            知识
                        </div>
                        <div class="weui-flex__item load_comments text_center" data-sta="4">
                            平台
                        </div>
                    </div>


                    <!-- 所有 动态 -->
                    <div class="bd fadeInLeft_1 load_comments_1 load_comments_box" style="z-index: 0">
                        <div class="page__bd" style="z-index: 0">

                        <!-- 推荐 分享 -->
                            <div class="weui-cells content-padded" style="margin: 0;">


                                <div id="list">

                                    {% for comm in datas %}
                                        {% if comm.is_delete == 0 %}
                                            {% if comm.user_id == goal.user_id or goal.user_id == 100259 or goal.user_id == 100267 or goal.user_id == 101077  or goal.user_id == 100274 %}
                                            <div class="weui-cell weui-cell_swiped hide" id="">
                                                <div class="weui-cell__bd">
                                                    <ul>
                                                        <li class="news-item" data-punch="{{ comm.id }}" style="overflow:hidden;">
                                                            <div class="new-item__content">
                                                                <div>
                                                                    <img src="{{ comm.headimgurl }}" class="news-item__header-img pictureEnlarge">
                                                                    <span class="news-item__header-text">{{ comm.nickname }}</span>

                                                                    <span style="color: #B6C1C8;display: inline-block;float: right">{{ comm.c_time }}</span>
                                                                </div>
                                                                <div style="margin-left: 46px;">
                                                                    <p>{{ comm.content|default:"" }}</p>
                                                                </div>
                                                                <div class="news-item__content" style="height: auto;margin-left: 36px;width: 100%">

                                                                    {% for foo in comm.voucher_ref %}
                                                                        <div class="uploaderInput_box_" style="margin-top: 10px;display: block;float: left;
                                                                        background: url({{ foo }}) center;
                                                                        background-size: cover;
                                                                        background-repeat: no-repeat;
                                                                        ">
                                                                            <img class="news-item__content-img box_left voucher_ref_img pictureEnlarge" style="position: absolute;opacity: 0" src="{{ foo }}">
                                                                        </div>
                                                                    {% endfor %}

                                                                </div>

                                                                <div class="reply_data clamp_5 reply_data_{{ comm.id }}">
                                                                    {% for fooooo in comm.reply_data %}
                                                                        <div style="margin-left: 46px;">
                                                                            <p class="word_break" style="color: #333333;">
                                                                                <span class="news-item__header-text" style="margin-left: 0;color: #0c3654;">{{ fooooo.nickname }}</span>：<span style="color: #4a4a4a;">{{ fooooo.content|default:"" }}</span></p>
                                                                        </div>
                                                                    {% endfor %}
                                                                </div>

                                                            </div>
                                                            <div class="news-item__horzon"></div>
                                                            <div class="weui-flex news-item__bottom" style="float: right;display: initial;">
                                                                <div class="weui-flex__item" style="padding-left: 50px;display: none">
                                                                    <span style="color: #B6C1C8;">{{ comm.c_time|date:"m-d H:i"  }}</span>
                                                                </div>
                                                                <div class="weui-flex__item weui-flex" style="flex: 2;">

                                                                        {% if comm.is_no_prise == 1 %}
                                                                            <button href="javascript:;" class="news-item__tail-btn weui-flex__item active weui-flex__item_1_2 button_sty_yes" disabled="disabled"  style="border: 0px;">
                                                                                <i class="iconfont icon-dianzan"></i>
                                                                                <span class="news-item__tail-text">
                                                                                    <span class="praise">
                                                                                        {% if comm.prise == 0 %}
                                                                                        {% else %}
                                                                                            {{ comm.prise }}
                                                                                        {% endif %}
                                                                                    </span>
                                                                                </span>
                                                                            </button>
                                                                        {% else %}
                                                                            <button href="javascript:;" class="news-item__tail-btn weui-flex__item parise-btn weui-flex__item_1_2 button_sty" punch_id="{{ comm.id }}" sta="{{ comm.prise }}" style="border: 0px;">
                                                                                <i class="iconfont icon-dianzan"></i>
                                                                                <span class="news-item__tail-text">
                                                                                    <span class="praise">
                                                                                        {% if comm.prise == 0 %}
                                                                                        {% else %}
                                                                                            {{ comm.prise }}
                                                                                        {% endif %}
                                                                                    </span>
                                                                                </span>
                                                                            </button>
                                                                        {% endif %}

                                                                <!--
                                                                        {% if comm.is_no_report == 1 %}
                                                                            <button href="javascript:;" class="news-item__tail-btn weui-flex__item active button_sty_yes" style="color: rgba(182, 193, 200,1);">
                                                                                <i class="iconfont icon-jubao"></i>
                                                                                <span class="news-item__tail-text">已举报</span>
                                                                            </button>
                                                                        {% else %}
                                                                            <button href="javascript:;" class="news-item__tail-btn weui-flex__item report-btn button_sty" punch_id="{{ comm.id }}" style="color: rgba(31,162,255,1);">
                                                                                <i class="iconfont icon-jubao"></i>
                                                                                <span class="news-item__tail-text">举报</span>
                                                                            </button>
                                                                        {% endif %}
                                                                    -->

                                                                        <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" punch_id="{{ comm.id }}" style="">
                                                                            <i class="iconfont icon-pinglun font_color_1"></i>
{#                                                                            <span class="news-item__tail-text">回复</span>#}
                                                                        </button>
                                                                </div>
                                                            </div>


                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="weui-cell__ft" style="display: inline-table">
                                                    <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout bg_red_1" punch_id="{{ comm.id }}" style="display: table-cell;vertical-align: middle;" href="javascript:">删除</a>
                                                </div>
                                            </div>
                                            {% else %}
                                            <ul class="news-list">
                                                <li class="news-item" data-punch="{{ comm.id }}" style="overflow: hidden">
                                                    <div class="new-item__content">
                                                        <div>
                                                            <img src="{{ comm.headimgurl }}" class="news-item__header-img pictureEnlarge">
                                                            <span class="news-item__header-text">{{ comm.nickname }}</span>
                                                            <span style="color: #B6C1C8;display: inline-block;float: right">{{ comm.c_time }}</span>
                                                        </div>
                                                        <div style="margin-left: 46px;">
                                                            <p style="">{{ comm.content|default:"" }}</p>
                                                        </div>

                                                        <div class="news-item__content weui-flex" style="width: 100%">

                                                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 100%">
                                                                {% for foo in comm.voucher_ref %}
                                                                    <div class="uploaderInput_box_" style="margin-top: 10px;display: block;float: left;
                                                                        background: url({{ foo }}) center;
                                                                        background-size: cover;
                                                                        background-repeat: no-repeat;
                                                                        ">
                                                                            <img class="news-item__content-img box_left voucher_ref_img pictureEnlarge" style="position: absolute;opacity: 0" src="{{ foo }}">
                                                                    </div>
                                                                {% endfor %}
                                                            </div>

                                                        </div>
                                                        <div class="reply_data clamp_5 reply_data_{{ comm.id }}">
                                                            {% for fooooo in comm.reply_data %}
                                                                <div style="margin-left: 46px;">
                                                                    <p class="word_break" style="color: #333333;"><span class="news-item__header-text" style="margin-left: 0;color: #0c3654">{{ fooooo.nickname }}</span> ：<span style="color: #4a4a4a;">{{ fooooo.content|default:"" }}</span></p>
                                                                </div>
                                                            {% endfor %}
                                                        </div>

                                                    </div>
                                                    <div class="news-item__horzon"></div>
                                                    <div class="weui-flex news-item__bottom" style="float: right;display: initial;">
                                                        <div class="weui-flex__item" style="padding-left: 50px;display: none">
                                                            <span style="color: #B6C1C8;">{{ comm.c_time|date:"m-d H:i"  }}</span>
                                                        </div>
                                                        <div class="weui-flex__item weui-flex" style="flex: 2;">

                                                            {% if comm.is_no_prise == 1 %}
                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item active weui-flex__item_1_2 button_sty_yes" disabled="disabled"  style="color: rgba(182, 193, 200,1);border: 0px;">
                                                                    <i class="iconfont icon-dianzan"></i>
                                                                    <span class="news-item__tail-text">
                                                                        <span class="praise">
                                                                            {% if comm.prise == 0 %}
                                                                            {% else %}
                                                                                {{ comm.prise }}
                                                                            {% endif %}
                                                                        </span>
                                                                    </span>
                                                                </button>
                                                            {% else %}
                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item parise-btn weui-flex__item_1_2 button_sty" punch_id="{{ comm.id }}" sta="{{ comm.prise }}" style="border: 0px;">
                                                                    <i class="iconfont icon-dianzan"></i>
                                                                    <span class="news-item__tail-text">
                                                                        <span class="praise">
                                                                            {% if comm.prise == 0 %}
                                                                            {% else %}
                                                                                {{ comm.prise }}
                                                                            {% endif %}
                                                                        </span>
                                                                    </span>
                                                                </button>
                                                            {% endif %}

                                                        <!--
                                                            {% if comm.is_no_report == 1 %}
                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item active button_sty_yes" style="">
                                                                    <i class="iconfont icon-jubao"></i>
                                                                    <span class="news-item__tail-text">已举报</span>
                                                                </button>
                                                            {% else %}
                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item report-btn button_sty" punch_id="{{ comm.id }}" style="">
                                                                    <i class="iconfont icon-jubao"></i>
                                                                    <span class="news-item__tail-text">举报</span>
                                                                </button>
                                                            {% endif %}
                                                            -->


                                                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" punch_id="{{ comm.id }}" style="">
                                                                    <i class="iconfont icon-pinglun font_color_1"></i>
{#                                                                    <span class="news-item__tail-text">回复</span>#}
                                                                </button>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                            {% endif %}

                                        {% else %}

                                        {% endif %}

                                    {% endfor %}


                                </div>

                                <div class="weui-loadmore">
                                    <i class="weui-loading"></i>
                                    <span class="weui-loadmore__tips">正在加载</span>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- 个人 动态 -->
                    <div class="bd fadeInLeft_1 load_comments_2 load_comments_box" style="z-index: 0;display: none">
                        <div class="page__bd" style="z-index: 0">

                        <!-- 推荐 分享 -->
                            <div class="weui-cells content-padded" style="margin: 0;">

                                <div id="my_list">
                                    <div class="weui-col-60 text_center nodata" style="display: none;margin:20px auto">
                                        暂无人记录
                                    </div>

                                </div>

                                <!--
                                <div class="weui-loadmore hide" >
                                    <i class="weui-loading"></i>
                                    <span class="weui-loadmore__tips">正在加载</span>
                                </div>
                                -->


                            </div>

                        </div>
                    </div>

                    <!-- (知识) 动态 -->
                    <div class="bd fadeInLeft_1 load_comments_3 load_comments_box" style="z-index: 0;display: none">
                        <div class="page__bd" style="z-index: 0">

                        <!-- 推荐 分享 -->
                            <div class="weui-cells content-padded" style="margin: 0;">

                                <div id="knowledge_list">
                                    <div class="weui-col-60 text_center nodata hide" style="display: none;margin:20px auto">
                                        暂无人记录
                                    </div>
                                    <div style="padding: 20px">
                                        <p class="font_color_1">跑步动作</p>
                                        <div style="">
                                            <p class="font_size_6">&#12288;&#12288;跑步是一门学问，最科学的锻炼方法才能达到最好的效果。</p>
                                            <p class="font_size_7">1、头和肩</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——保持头与肩的稳定。头要正对前方，除非道路不平，不要前探，两眼注视前方。肩部适当放松，避免含胸。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力伸拉——耸肩。肩放松下垂，然后尽可能上耸，停留一下，还原后重复。</p>
                                            <br>
                                            <p class="font_size_7">2、臂与手</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领—摆臂应是以肩为轴的前后动作，左右动作幅度不超过身体正中线。手指、腕与臂应是放松的，肘关节角度约为90度。前摆时稍向内，后摆时稍向外。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力伸拉——抬肘摆臂。两臂一前一后成预备起跑姿势，后摆臂肘关节尽量抬高，然后放松前摆。随着动作加快时越抬越高。</p>
                                            <br>
                                            <p class="font_size_7">3、躯干与髋</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——从颈到腹保持直立，而非前倾（除非加速或上坡）或后仰，这样有利于呼吸、保持平衡和步幅。
                                                躯干不要左右摇晃或上下起伏太大。腿前摆时积极送髋，跑步时要注意髋部的转动和放松。
                                            <p class="font_size_5">&#12288;&#12288;动力伸拉——弓步压腿。两腿前后开立，与肩同宽，身体中心缓慢下压至肌肉紧张，然后放松还原。躯干始终保持直立。</p>
                                            <br>
                                            <p class="font_size_7">4、腰</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——腰部保持自然直立，不宜过于挺直。肌肉稍微紧张，维持躯干姿势，同时注意缓冲脚着地的冲击。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力伸拉——体前屈伸。自然站立，两脚开立，与肩同宽。躯干缓慢前屈至两手下垂至脚尖，保持一会儿，然后复原。</p>
                                            <br>
                                            <p class="font_size_7">5、大腿与膝</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——大腿和膝用力前摆，而不是上抬。腿的任何侧向动作都是多余的，而且容易引起膝关节受伤，因此大腿的前摆要正。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力拉伸——前弓身．两脚站距同髋宽．双手放在头后．从髋关节屈体向前．保持腰背挺直，直到股二头肌感到紧张。</p>
                                            <br>
                                            <p class="font_size_7">6、小腿与跟腱</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——脚应落在身体前约一尺的位置，靠近正中线。小腿不宜跨得太远，避免跟腱因受力过大而劳损。同时要注意小腿肌肉和跟腱在着地时的缓冲，落地时小腿应积极向后扒地，使身体积极向前。
                                                另外，小腿前摆方向要正，脚应该尽量朝前，不要外翻或后翻，否则膝关节和踝关节容易受伤。可在沙滩上跑步时检查脚印以作参考。</p>
                                            <p  class="font_size_6">&#12288;&#12288;动力伸拉——撑壁提踵。面向墙壁约1米左右站立，两臂前伸与肩同宽，手撑壁。提踵，再放下，感觉小腿和跟腱紧张。</p>
                                            <br>
                                            <p class="font_size_7">7、脚跟与脚趾</p>
                                            <p class="font_size_6">&#12288;&#12288;跑步动作要领——如果步幅过大，小腿前伸过远，会以脚跟着地，产生制动刹车反作用力，对骨和关节损伤很大。正确的落地时用脚的中部着地，并让冲击力迅速分散到全脚掌。</p>
                                            <p class="font_size_6">&#12288;&#12288;动力伸拉——坐式伸踝．跪在地上，臀部靠近脚跟，上体保持直立．慢慢向下给踝关节压力直到趾伸肌与脚前掌感到足够拉力．然后抬臀后重复．动作要有节奏，缓慢。</p>
                                            <br>
                                        </div>
                                        <p class="font_color_1">运动技巧</p>
                                        <div style="">
                                            <p class="font_size_7">1、落地缓冲</p>
                                            <p class="font_size_6 text_indent">
                                                如果你有仔细观察过他人跑步，你会发现，很多人都是全脚掌着地，落地时的声音也比较大。正确的动作是在跑步时，腾空脚落地时要中位脚先着地，脚掌就不要着地。这是对于脚踝、膝盖的一种保护，防止骨膜炎的发生。
                                            </p>
                                            <br>
                                            <p class="font_size_7">2、摆臂</p>
                                            <p class="font_size_6 text_indent">
                                                摆臂是在跑步过程当中，保持身体的平衡性和协调性，使身体更自然的摆动，更符合人体运动的韵律。摆臂时，只要记住前不露肘，后不露手，自然的随着脚步而摆动。
                                            </p>
                                            <br>
                                            <p class="font_size_7">3、抬头挺胸</p>
                                            <p class="font_size_6 text_indent">
                                                跑步是保持抬头挺胸有助于改善人体的呼吸循环系统以及建立正常的记住状态。因为你在跑步过程中，人体在不断的消耗能量，易出现疲劳状况，这时如果你能用你的意志挺起你的脊梁，那么你要改善驼背状况其实就很简单了。
                                            </p>
                                            <br>
                                            <p class="font_size_7">4、呼吸</p>
                                            <p class="font_size_6 text_indent">
                                                跑步时的呼吸是深远而悠长的，一般采用鼻吸嘴呼，体力下降较为严重时可以采用嘴吸嘴呼方式。
                                            </p>
                                            <br>
                                            <p class="font_size_7">5、心率</p>
                                            <p class="font_size_6 text_indent">
                                                慢跑作为一种养生的有氧运动，就要和快速跑区分开来。一般来说，最适合身体锻炼的心率律动次数是：(220-年龄)×60%左右。大家跑步的时候可以适当的测量以下。
                                            </p>
                                            <br>
                                            <p class="font_size_7">6、头与肩</p>
                                            <p class="font_size_6 text_indent">
                                                头与肩都要保持稳定。头要目视前方，下颚微收但不要低头。跑步时，肩先放松下垂，然后尽可能上耸，停留一下，恢复原来的姿势再重复。
                                            </p>
                                            <br>
                                            <p class="font_size_7">7、臂和手</p>
                                            <p class="font_size_6 text_indent">
                                                手要微微握住，大小臂屈成约90度，前后自然摆动。要注意向前的手臂不要露肘，向后的手臂不要露出手来。
                                            </p>
                                            <br>
                                            <p class="font_size_7">8、腿</p>
                                            <p class="font_size_6 text_indent">
                                                用大腿带动小腿，膝关节要朝向脚尖方向，抬到合理的高度后放下再重复。
                                            </p>
                                            <br>
                                            <p class="font_size_7">9、双脚</p>
                                            <p class="font_size_6 text_indent">
                                                双脚要放松，不要紧缩脚趾，脚抬高到离地10厘米就可放下重复。脚掌落地时前脚掌不要太用力蹬地，以免造成小腿肌肉发达。
                                            </p>
                                            <br>

                                        </div>


                                    </div>






                                </div>

                            </div>

                        </div>
                    </div>

                    <!-- 平台(知识) 动态 -->
                    <div class="bd fadeInLeft_1 load_comments_4 load_comments_box" style="z-index: 0;display: none">
                        <div class="page__bd" style="z-index: 0">

                            <div class="weui-cells infinite content-padded" style="margin: 0;">

                                <div id="">
                                    <div class="weui-col-60 text_center nodata" style="margin:20px auto">
                                        待开放
                                    </div>

                                </div>

                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

<!---------------动态 end ----------------------------------------------->




    <div id="goal_id__get" hidden>{{ goal.goal_id|cut:"-" }}</div>
    <input id="nickname" style="display: none" value="{{ nickname }}">
    <div id="goal_sleep_type" hidden>{{ goal.sleep_type }}</div>


	<script type="text/javascript" src="/static/js/jquery-2.1.4.js"></script>
    <script type="text/javascript" src="/static/js/public.js"></script>
	<script type="text/javascript" src="/static/js/fastclick.js"></script>
    <script type="text/javascript" src="/static/js/jquery-weui-2.1.4.js"></script>
    <script type='text/javascript' src='/static/js/swiper.min.js' charset='utf-8'></script>
	<script>
		// fast click binding
		$(function () {
			FastClick.attach(document.body);
			initDateCss();
			$(".mask_on__1").hide();
			$(".qqGroupCode_box").hide();
			$(".qqGroupCode_box").css("opacity","1");
		});
		function initDateCss() {
            var header = $(".header_date");
            var width =  $(".row-center_1").width();
            header.css('width',width/8);
            //header.css('height',width/8);
            //header.css('lineHeight', width/8 +"px");
        }
        var guaranty_down_payment =Number($("#guaranty_down_payment").text().trim());
		$("#guaranty_down_payment").text(guaranty_down_payment);

		var guaranty_new_coeff =Number($("#guaranty_new_coeff").text().trim());
		$("#guaranty_new_coeff").text(guaranty_new_coeff);


		$("iframe").detach();
	</script>
<!----    ajax 请求数据---------------------------------------->
    <!-- 排行榜 api/goal_ranking_list  -->
    <script>
        rank();
        var u=0;
        function rank() {
            u=u+1;
            if(u>5){
                return
            }
            $.ajax({
                type: "GET",
                url: "/api/goal_ranking_list",
                //url:"http://119.29.191.32/",
                data:{
                   "activity_type":0
                },
                success: function (res) {
                    //alert(res);
                    $.hideLoading();
                    //console.log(res);
                    var sleep_list_morning=res.sleep_list.morning;
                    var sleep_list_lasting =res.sleep_list.lasting;
                    var sleep_list_watch_lists=res.sleep_list.watch_lists;
                    var sleep_list_bonus_rank=res.sleep_list.bonus_rank;
                    //console.log(sleep_list_morning);
                    //console.log(sleep_list_morning);
                    setTimeout(function () {
                        fun_sleep_list_morning(sleep_list_morning);
                    }, 50);

                    setTimeout(function () {
                        fun_sleep_list_lasting(sleep_list_lasting);
                    }, 100);

                    setTimeout(function () {
                        fun_sleep_list_watch_lists(sleep_list_watch_lists);
                    }, 300);

                    setTimeout(function () {
                        fun_sleep_bonus_rank(sleep_list_bonus_rank)
                    }, 500);
                },
                error:function(res){
                    //console.log(res);
                    $.hideLoading();
                    setTimeout(function () {
                        //rank()
                    }, 100);
                },
                complete: function(XMLHttpRequest, textStatus) {
                    //console.log("ajax 公用");
                }
            });
        }

        // 早起榜
        function fun_sleep_list_morning(morning) {
            //console.log("早起榜");
            //console.log(morning);
            //console.log(morning.crruent_user);
            var current_user=morning.current_user;
            var datas=morning.datas;
            var current_user_rangking=Number(current_user.ranking);
            //console.log(current_user_rangking);
            $(".rank_1 .crruent_user_name").text(current_user.nickname);
            var current_user_get_up_time =current_user.get_up_time.substring(11,19);
            //console.log(current_user_get_up_time);
            if(current_user_get_up_time==''){
                $(".rank_1 .crruent_user_rank_time").text("未打卡");
            }else{
                $(".rank_1 .crruent_user_rank_time").text(current_user_get_up_time);
            }


            var current_user_img='background-size: cover; background: url('+current_user.headimgurl+')  center;background-size: cover;background-repeat: no-repeat;';
            $(".rank_1 .crruent_user_headimgurl").attr("style",current_user_img);
            if(current_user_rangking == 0 || current_user_rangking==null || current_user_rangking == '' || current_user_rangking > 10  ){
                $(".rank_1 .crruent_user_rank").text("第10+名");
            }else{
                $(".rank_1 .crruent_user_rank").text("第"+current_user_rangking+"名");
            }

            //console.log(datas.length);
            if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
                $(".rank_1 .nodata").show();
            } else {
                $(".rank_1 .nodata").hide();

                for (var i = 0; i < datas.length; i++) {
                    //console.log(datas[i]);
                    var rank_ranking=i+1;
                    if(i == 0){
                        //console.log(datas[0]);
                        rank_ranking='<img src="/static/images/rank/1@2x.png"  class="box_content" style="">';
                    }else if(i == 1){
                        rank_ranking='<img src="/static/images/rank/2@2x.png"  class="box_content" style="">';
                    }else if(i == 2){
                        rank_ranking='<img src="/static/images/rank/3@2x.png"  class="box_content" style="">';
                    }else if(i>9){
                        return
                    }else{

                    }
                    var bg='background-size: cover; background: url('+datas[i].headimgurl+')  center;background-size: cover;background-repeat: no-repeat;'

                    var h=' <div class="weui-row weui-no-gutter rank_border_bottom height_22 ">\n' +
                        '       <div class="weui-col-15 text_center font_size_6 height_22 position_relative rank_ranking">\n' +
                        '        '+rank_ranking+'\n' +
                        '    </div>\n' +
                        '\n' +
                        '   <div class="weui-col-55 text_center">\n' +
                        '      <div class="rank_img" style="'+bg+'">\n' +
                        '           <img src="'+datas[i].headimgurl+'" style="width: 100%;opacity: 0;height: 100%;">\n' +
                        '       </div>\n' +
                        '       <div class="rank_name text_left">\n' +
                        '          <p class="p_overflow height_22 rank_name_">'+datas[i].nickname+'</p>\n' +
                        '      </div>\n' +
                        '    </div>\n' +
                        '\n' +
                        '    <div class="weui-col-30 text_center height_22 text_right">\n' +
                        '         <p class="p_overflow height_22 padding_R_10">'+datas[i].get_up_time.substring(11,19)+'</p>\n' +
                        '     </div>\n' +
                        ' </div>';
                    $(".rank_1_box").append(h);
                }
            }
        }

        // 点赞榜
        function fun_sleep_list_watch_lists(watch_lists) {
            //console.log("点赞榜");
            //console.log(watch_lists);
            //console.log(morning);
            //console.log(morning.crruent_user);
            var current_user=watch_lists.current_user;
            var datas=watch_lists.datas;
            var current_user_rangking=Number(current_user.ranking);
            //console.log(current_user_rangking);
            $(".rank_2 .crruent_user_name").text(current_user.nickname);
            $(".rank_2 .crruent_user_rank_time").text(current_user.sum_prise);

            if(current_user_rangking==0 || current_user_rangking==null || current_user_rangking==''|| current_user_rangking > 10  ){
                $(".rank_2 .crruent_user_rank").text("第10+名");
            }else{
                $(".rank_2 .crruent_user_rank").text("第"+current_user_rangking+"名");
            }

            var current_user_img='background-size: cover; background: url('+current_user.headimgurl+')  center;background-size: cover;background-repeat: no-repeat;';
            $(".rank_2 .crruent_user_headimgurl").attr("style",current_user_img);

            //console.log(datas.length);
            if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
                $(".rank_2 .nodata").show();
            } else {
                $(".rank_2 .nodata").hide();

                for (var i = 0; i < datas.length; i++) {
                    //console.log(datas[i]);
                    var rank_ranking=i+1;
                    if(i == 0){
                        //console.log(datas[0]);
                        rank_ranking='<img src="/static/images/rank/1@2x.png"  class="box_content" style="">';
                    }else if(i == 1){
                        rank_ranking='<img src="/static/images/rank/2@2x.png"  class="box_content" style="">';
                    }else if(i == 2){
                        rank_ranking='<img src="/static/images/rank/3@2x.png"  class="box_content" style="">';
                    }else if(i>9){
                        return
                    }else{

                    }
                    var bg='background-size: cover; background: url('+datas[i].headimgurl+')  center;background-size: cover;background-repeat: no-repeat;'

                    var h=' <div class="weui-row weui-no-gutter rank_border_bottom height_22 ">\n' +
                        '       <div class="weui-col-15 text_center font_size_6 height_22 position_relative rank_ranking">\n' +
                        '        '+rank_ranking+'\n' +
                        '    </div>\n' +
                        '\n' +
                        '   <div class="weui-col-55 text_center">\n' +
                        '      <div class="rank_img" style="'+bg+'">\n' +
                        '           <img src="'+datas[i].headimgurl+'" style="width: 100%;opacity: 0">\n' +
                        '       </div>\n' +
                        '       <div class="rank_name text_left">\n' +
                        '          <p class="p_overflow height_22 rank_name_">'+datas[i].nickname+'</p>\n' +
                        '      </div>\n' +
                        '    </div>\n' +
                        '\n' +
                        '    <div class="weui-col-30 text_center height_22 text_right">\n' +
                        '         <p class="p_overflow height_22 padding_R_10">'+datas[i].sum_prise+'</p>\n' +
                        '     </div>\n' +
                        ' </div>';
                    $(".rank_2_box").append(h);
                }
            }
        }

        // 坚持榜
        function fun_sleep_list_lasting(lasting) {
            //console.log("坚持榜");
            //console.log(lasting);
            //console.log(morning);
            //console.log(morning.crruent_user);
            var current_user=lasting.current_user;
            var datas=lasting.datas;
            var current_user_rangking=Number(current_user.ranking);
            //console.log(current_user_rangking);
            $(".rank_3 .crruent_user_name").text(current_user.nickname);
            $(".rank_3 .crruent_user_rank_time").text(current_user.punch_day+" 天");

            if(current_user_rangking==0 || current_user_rangking==null || current_user_rangking==''|| current_user_rangking > 10  ){
                $(".rank_3 .crruent_user_rank").text("第10+名");
            }else{
                $(".rank_3 .crruent_user_rank").text("第"+current_user_rangking+"名");
            }


            var current_user_img='background-size: cover; background: url('+current_user.headimgurl+')  center;background-size: cover;background-repeat: no-repeat;';
            $(".rank_3 .crruent_user_headimgurl").attr("style",current_user_img);

            //console.log(datas.length);
            if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
                $(".rank_3 .nodata").show();
            } else {
                $(".rank_3 .nodata").hide();

                for (var i = 0; i < datas.length; i++) {
                    //console.log(datas[i]);
                    var rank_ranking=i+1;
                    if(i == 0){
                        //console.log(datas[0]);
                        rank_ranking='<img src="/static/images/rank/1@2x.png"  class="box_content" style="">';
                    }else if(i == 1){
                        rank_ranking='<img src="/static/images/rank/2@2x.png"  class="box_content" style="">';
                    }else if(i == 2){
                        rank_ranking='<img src="/static/images/rank/3@2x.png"  class="box_content" style="">';
                    }else if(i>9){
                        return
                    }else{

                    }
                    var bg='background-size: cover; background: url('+datas[i].headimgurl+')  center;background-size: cover;background-repeat: no-repeat;'

                    var h=' <div class="weui-row weui-no-gutter rank_border_bottom height_22 ">\n' +
                        '       <div class="weui-col-15 text_center font_size_6 height_22 position_relative rank_ranking">\n' +
                        '        '+rank_ranking+'\n' +
                        '    </div>\n' +
                        '\n' +
                        '   <div class="weui-col-55 text_center">\n' +
                        '      <div class="rank_img" style="'+bg+'">\n' +
                        '           <img src="'+datas[i].headimgurl+'" style="width: 100%;opacity: 0">\n' +
                        '       </div>\n' +
                        '       <div class="rank_name text_left">\n' +
                        '          <p class="p_overflow height_22 rank_name_">'+datas[i].nickname+'</p>\n' +
                        '      </div>\n' +
                        '    </div>\n' +
                        '\n' +
                        '    <div class="weui-col-30 text_center height_22 text_right">\n' +
                        '         <p class="p_overflow height_22 padding_R_10">'+datas[i].punch_day+' 天</p>\n' +
                        '     </div>\n' +
                        ' </div>';
                    $(".rank_3_box").append(h);
                }
            }
        }

        // 收益榜
        function fun_sleep_bonus_rank(bonus_rank) {
            //console.log("收益榜");
            //console.log(bonus_rank);
            //console.log(morning);
            //console.log(morning.crruent_user);
            var current_user=bonus_rank.current_user;
            var datas=bonus_rank.datas;
            var current_user_rangking=Number(current_user.ranking);
            //console.log(current_user_rangking);
            $(".rank_4 .crruent_user_name").text(current_user.nickname);
            $(".rank_4 .crruent_user_rank_time").text(current_user.bonus+" 元");

            if(current_user_rangking==0 || current_user_rangking==null || current_user_rangking=='' || current_user_rangking > 10 ){
                $(".rank_4 .crruent_user_rank").text("第10+名");
            }else{
                $(".rank_4 .crruent_user_rank").text("第"+current_user_rangking+"名");
            }


            var current_user_img='background-size: cover; background: url('+current_user.headimgurl+')  center;background-size: cover;background-repeat: no-repeat;';
            $(".rank_4 .crruent_user_headimgurl").attr("style",current_user_img);

            //console.log(datas.length);
            if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
                $(".rank_4 .nodata").show();
            } else {
                $(".rank_4 .nodata").hide();
                for (var i = 0; i < datas.length; i++) {
                    //console.log(datas[i]);
                    var rank_ranking=i+1;
                    if(i == 0){
                        //console.log(datas[0]);
                        rank_ranking='<img src="/static/images/rank/1@2x.png"  class="box_content" style="">';
                    }else if(i == 1){
                        rank_ranking='<img src="/static/images/rank/2@2x.png"  class="box_content" style="">';
                    }else if(i == 2){
                        rank_ranking='<img src="/static/images/rank/3@2x.png"  class="box_content" style="">';
                    }else if(i>9){
                        return
                    }else{

                    }
                    var bg='background-size: cover; background: url('+datas[i].headimgurl+')  center;background-size: cover;background-repeat: no-repeat;'

                    var h=' <div class="weui-row weui-no-gutter rank_border_bottom height_22 ">\n' +
                        '       <div class="weui-col-15 text_center font_size_6 height_22 position_relative rank_ranking">\n' +
                        '        '+rank_ranking+'\n' +
                        '    </div>\n' +
                        '\n' +
                        '   <div class="weui-col-55 text_center">\n' +
                        '      <div class="rank_img" style="'+bg+'">\n' +
                        '           <img src="'+datas[i].headimgurl+'" style="width: 100%;opacity: 0">\n' +
                        '       </div>\n' +
                        '       <div class="rank_name text_left">\n' +
                        '          <p class="p_overflow height_22 rank_name_">'+datas[i].nickname+'</p>\n' +
                        '      </div>\n' +
                        '    </div>\n' +
                        '\n' +
                        '    <div class="weui-col-30 text_center height_22 text_right">\n' +
                        '         <p class="p_overflow height_22 padding_R_10">'+datas[i].bonus+' 元</p>\n' +
                        '     </div>\n' +
                        ' </div>';
                    $(".rank_4_box").append(h);
                }
            }
        }

        // 排行榜 却换
        $(".rank_change").click(function () {
            $(".rank_change").removeClass("rank_change_active");
            $(this).addClass("rank_change_active");
            var sta =Number($(this).attr("data-sta"));
            $(".rank_box").hide();
            $(".rank_"+sta).show();
        });

        //动态切换
        $(".load_comments").click(function () {
            $(".load_comments").removeClass("load_comments_active");
            $(this).addClass("load_comments_active");
            var sta =Number($(this).attr("data-sta"));
            $(".load_comments_box").hide();
            $(".load_comments_"+sta).show();
        })

    </script>

    <!-- 滚动 加载 -->
    <script>
        var has_next=0;
        var c_num=0;
        var loading = false;
        var my_id="{{ goal.user_id }}";
        //调用 所有动态 获取ajax 方法
        ajax_api_load_comments(0);

        //调用 个人动态 获取ajax 方法
        ajax_api_load_mine();


        //所有动态 ajax 请求
        function ajax_api_load_comments(num) {
            console.log(num);
            $.ajax({
                type: "POST",
                url: "/api/load_comments",
                data:{
                    "activate_type":0,
                    "c_num":num
                },
                success: function (res) {
                    $.hideLoading();
                    //alert(res);
                    //console.log("--------------------------评论包---------------------------");
                    //console.log(res);
                    //console.log("--------------------------评论包---------------------------");
                    var finish=res.finish;
                    var datas=res.cont;
                    has_next=res.has_next;
                    //console.log(has_next);
                    if(has_next==1){

                    }else{
                        $(".weui-loadmore").hide();
                    }
                    c_num=finish;

                    if(datas==null || datas=="" || datas=="[]"){
                        $("#list .nodata").show();
                    }else{
                        $("#list .nodata").hide();
                        list_show(datas);
                    }
                },
                error:function(res){
                    //console.log("报错");
                    console.log(res);
                    $.hideLoading();

                },
                complete: function(XMLHttpRequest, textStatus) {
                    //console.log("ajax 公用");
                }
            });
        }

        //所有动态 ajax 数据 展示
        function list_show(a) {
            //console.log(typeof(a));
            //console.log("评论数据包");
            //console.log(a.isArray());
            var datas=JSON.parse(a);
            //var datas=JSON.stringify(a);
            //var datas = a;
            console.log(datas);

             if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
             } else {

                 for (var i = 0; i < datas.length; i++) {
                     var data = datas[i];
                     //console.log("-----------------------------");
                     //console.log(data);
                     //console.log("-----------------------------");
                     var h;

                     var punch_id = String(data.id).replace(/-/g, "");
                     //console.log(punch_id);
                     var c_time = data.c_time.substring(5, 16).replace("-", "月").replace(" ", "日 ");
                     var header_img = data.headimgurl;
                     var nickname = data.nickname;
                     var user_id = data.user_id;
                     var content = data.content;


                     var replyComments = 'onclick=replyComments("' + punch_id + '")';

                     var praise_box = '';
                     var is_no_prise = data.is_no_prise;
                     var praise = data.prise;
                     //console.log(praise);
                     if (is_no_prise == 0) {
                         var cccc = '';
                         if (praise == 0) {
                             cccc = ''
                         } else {
                             cccc = praise;
                         }
                         praise_box = praise_box + '<button href="javascript:;" class="news-item__tail-btn weui-flex__item parise-btn weui-flex__item_1_2 button_sty"\n' +
                             'punch_id="' + punch_id + '" sta="' + praise + '" style="border: 0px;">\n' +
                             '<i class="iconfont icon-dianzan"></i>\n' +
                             '<span class="news-item__tail-text">\n' +
                             '<span class="praise">\n' +
                             cccc +
                             '</span>\n' +
                             '</span>\n' +
                             '</button>\n';
                     } else {
                         praise_box = praise_box + '<button href="javascript:;" class="news-item__tail-btn weui-flex__item active weui-flex__item_1_2 button_sty_yes" disabled="disabled" style="border: 0px;">\n' +
                             '    <i class="iconfont icon-dianzan"></i>\n' +
                             '    <span class="news-item__tail-text">\n' +
                             '      <span class="praise">\n' +
                             praise +
                             '      </span>\n' +
                             '    </span>\n' +
                             '</button>\n'
                     }


                     var voucher_ref = data.voucher_ref;
                     var voucher_ref_img_box = '';
                     if (voucher_ref.length == "0" || voucher_ref.length == 0) {

                     } else {
                         for (var j = 0; j < voucher_ref.length; j++) {
                             var voucher_ref_img = voucher_ref[j];
                             //console.log(voucher_ref_img);
                             voucher_ref_img_box = voucher_ref_img_box + ' <div class="uploaderInput_box_" style="margin-top: 10px;display: block;float: left;\n' +
                                 '     background: url(' + voucher_ref_img + ') center;\n' +
                                 '     background-size: cover;\n' +
                                 '     background-repeat: no-repeat;">\n' +
                                 '         <img class="news-item__content-img box_left voucher_ref_img pictureEnlarge" style="position: absolute;opacity: 0;height:100%;" src="' + voucher_ref_img + '">\n' +
                                 '   </div>\n';
                         }

                     }


                     var reply_data_box = '';
                     var reply_data_ = data.reply_data;
                     //console.log(reply_data_);

                     if (reply_data_.length == "0" || reply_data_.length == 0) {

                     } else {
                         for (var l = 0; l < reply_data_.length; l++) {
                             var reply_data__ = reply_data_[l];
                             //console.log(reply_data__);
                             //console.log("--------------------------------------------------------------");
                             reply_data_box = reply_data_box + '<p class="word_break" style="color: #333333;"><span class="news-item__header-text" style="margin-left: 0;">' + reply_data__.nickname + '</span>：<span style="color: #4a4a4a;">' + reply_data__.content + '</span></p>';
                         }

                     }
                     // 可以左滑加载（逻辑删除）
                     if (my_id == user_id || my_id==100259 || my_id==100101) {
                         h = '<div class="weui-cell weui-cell_swiped">\n' +
                             '            <div class="weui-cell__bd" style="transform: translate3d(0px, 0px, 0px);">\n' +
                             '                <ul>\n' +
                             '                    <li class="news-item" data-punch="' + punch_id + '" style="overflow:hidden;">\n' +
                             '                        <div class="new-item__content">\n' +
                             '                            <div>\n' +
                             '                                <img src="' + header_img + '" class="news-item__header-img pictureEnlarge">\n' +
                             '                                <span class="news-item__header-text">' + nickname + '</span>\n' +
                             '                                <span style="color: #B6C1C8;display: inline-block;float: right">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div style="margin-left: 46px;">\n' +
                             '                                <p>' + content + '</p>\n' +
                             '                            </div>\n' +
                             '                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 90%">\n' +
                             voucher_ref_img_box +
                             '                            </div>\n' +
                             '                            <div class="reply_data clamp_5 reply_data_' + punch_id + '">\n' +
                             '                                <div style="margin-left: 46px;">\n' +
                             reply_data_box +
                             '                                </div>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                        <div class="news-item__horzon"></div>\n' +
                             '                        <div class="weui-flex news-item__bottom" style="float: right;display: initial;">\n' +
                             '                            <div class="weui-flex__item" style="padding-left: 50px;display: none">\n' +
                             '                                <span style="color: #B6C1C8;">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div class="weui-flex__item weui-flex" style="flex: 2;">\n' +
                             praise_box +
                             '                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" ' + replyComments + ' punch_id="' + punch_id + '" style="">\n' +
                             '                                    <i class="iconfont icon-pinglun font_color_1"></i>\n' +
                             //'                                    <span class="news-item__tail-text">回复</span>\n' +
                             '                                </button>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '\n' +
                             '\n' +
                             '                    </li>\n' +
                             '                </ul>\n' +
                             '            </div>\n' +
                             '            <div class="weui-cell__ft" style="display: inline-table">\n' +
                             '                <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout bg_red_1" punch_id="' + punch_id + '" style="display: table-cell;vertical-align: middle;" href="javascript:">删除</a>\n' +
                             '            </div>\n' +
                             '        </div>';

                     }else{
                         // 不可以左滑加载（逻辑删除）
                         h = '                <ul class="news-list">\n' +
                             '                    <li class="news-item" data-punch="' + punch_id + '" style="overflow:hidden;">\n' +
                             '                        <div class="new-item__content">\n' +
                             '                            <div>\n' +
                             '                                <img src="' + header_img + '" class="news-item__header-img pictureEnlarge">\n' +
                             '                                <span class="news-item__header-text">' + nickname + '</span>\n' +
                             '                                <span style="color: #B6C1C8;display: inline-block;float: right">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div style="margin-left: 46px;">\n' +
                             '                                <p>' + content + '</p>\n' +
                             '                            </div>\n' +
                             '                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 90%">\n' +
                             voucher_ref_img_box +
                             '                            </div>\n' +
                             '                            <div class="reply_data clamp_5 reply_data_' + punch_id + '">\n' +
                             '                                <div style="margin-left: 46px;">\n' +
                             reply_data_box +
                             '                                </div>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                        <div class="news-item__horzon"></div>\n' +
                             '                        <div class="weui-flex news-item__bottom" style="float: right;display: initial;">\n' +
                             '                            <div class="weui-flex__item" style="padding-left: 50px;display: none">\n' +
                             '                                <span style="color: #B6C1C8;">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div class="weui-flex__item weui-flex" style="flex: 2;">\n' +
                             praise_box +
                             '                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" ' + replyComments + ' punch_id="' + punch_id + '" style="">\n' +
                             '                                    <i class="iconfont icon-pinglun font_color_1"></i>\n' +
                             //'                                    <span class="news-item__tail-text">回复</span>\n' +
                             '                                </button>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                    </li>\n' +
                             '                </ul>\n'

                     }
                     $("#list").append(h);

                 }
                 //----- for 循环 end---------------------------------------------------
                 $.hideLoading();
                 loading = false;
                 setTimeout(function () {
                     $('.weui-cell_swiped').swipeout();
                 }, 1000);
             }
        }


        //个人动态 ajax 请求
        function ajax_api_load_mine() {
            console.log("个人动态");
            $.ajax({
                type: "POST",
                url: "/api/load_mine",
                data:{
                    "activity_type":0,
                   // "c_num":num
                },
                success: function (res) {
                    $.hideLoading();
                    //alert(res);
                    //console.log("--------------------------评论包---------------------------");
                    console.log(res);
                    //console.log("--------------------------评论包---------------------------");
                    //var finish=res.finish;
                    var datas=res.mine;
                    //has_next=res.has_next;
                    //console.log(has_next);
                    //c_num=finish;
                    if(datas==null || datas=="" || datas=="[]"){
                        $("#my_list .nodata").show();
                    }else{
                        $("#my_list .nodata").hide();
                        my_list_show(datas);
                    }
                },
                error:function(res){
                    //console.log("报错");
                    console.log(res);
                    $.hideLoading();

                },
                complete: function(XMLHttpRequest, textStatus) {
                    //console.log("ajax 公用");
                }
            });
        }

        //个人动态 ajax 数据 展示
        function my_list_show(a) {
            //console.log(typeof(a));
            //console.log("评论数据包");
            //console.log(a.isArray());
            var datas=JSON.parse(a);
            //var datas=JSON.stringify(a);
            //var datas = a;
            console.log(datas);

             if (datas.length == "0" || datas.length == 0) {
                //暂无人上榜
             } else {

                 for (var i = 0; i < datas.length; i++) {
                     var data = datas[i];
                     console.log("-----------------------------");
                     console.log(data);
                     console.log("-----------------------------");
                     var h;

                     var punch_id = String(data.id).replace(/-/g, "");
                     //console.log(punch_id);
                     var c_time = data.c_time.substring(5, 16).replace("-", "月").replace(" ", "日 ");
                     var header_img = data.headimgurl;
                     var nickname = data.nickname;
                     var user_id = data.user_id;
                     var content = data.content;


                     var replyComments = 'onclick=replyComments("' + punch_id + '")';

                     var praise_box = '';
                     var is_no_prise = data.is_no_prise;
                     var praise = data.prise;
                     //console.log(praise);
                     if (is_no_prise == 0) {
                         var cccc = '';
                         if (praise == 0) {
                             cccc = ''
                         } else {
                             cccc = praise;
                         }
                         praise_box = praise_box + '<button href="javascript:;" class="news-item__tail-btn weui-flex__item parise-btn weui-flex__item_1_2 button_sty"\n' +
                             'punch_id="' + punch_id + '" sta="' + praise + '" style="border: 0px;">\n' +
                             '<i class="iconfont icon-dianzan"></i>\n' +
                             '<span class="news-item__tail-text">\n' +
                             '<span class="praise">\n' +
                             cccc +
                             '</span>\n' +
                             '</span>\n' +
                             '</button>\n';
                     } else {
                         praise_box = praise_box + '<button href="javascript:;" class="news-item__tail-btn weui-flex__item active weui-flex__item_1_2 button_sty_yes" disabled="disabled" style="border: 0px;">\n' +
                             '    <i class="iconfont icon-dianzan"></i>\n' +
                             '    <span class="news-item__tail-text">\n' +
                             '      <span class="praise">\n' +
                             praise +
                             '      </span>\n' +
                             '    </span>\n' +
                             '</button>\n'
                     }


                     var voucher_ref = data.voucher_ref;
                     var voucher_ref_img_box = '';
                     if (voucher_ref.length == "0" || voucher_ref.length == 0) {

                     } else {
                         for (var j = 0; j < voucher_ref.length; j++) {
                             var voucher_ref_img = voucher_ref[j];
                             //console.log(voucher_ref_img);
                             voucher_ref_img_box = voucher_ref_img_box + ' <div class="uploaderInput_box_" style="margin-top: 10px;display: block;float: left;\n' +
                                 '     background: url(' + voucher_ref_img + ') center;\n' +
                                 '     background-size: cover;\n' +
                                 '     background-repeat: no-repeat;">\n' +
                                 '         <img class="news-item__content-img box_left voucher_ref_img pictureEnlarge" style="position: absolute;opacity: 0;height:100%;" src="' + voucher_ref_img + '">\n' +
                                 '   </div>\n';
                         }

                     }


                     var reply_data_box = '';
                     var reply_data_ = data.reply_data;
                     //console.log(reply_data_);

                     if (reply_data_.length == "0" || reply_data_.length == 0) {

                     } else {
                         for (var l = 0; l < reply_data_.length; l++) {
                             var reply_data__ = reply_data_[l];
                             //console.log(reply_data__);
                             //console.log("--------------------------------------------------------------");
                             reply_data_box = reply_data_box + '<p class="word_break" style="color: #333333;"><span class="news-item__header-text" style="margin-left: 0;">' + reply_data__.nickname + '</span>：<span style="color: #4a4a4a;">' + reply_data__.content + '</span></p>';
                         }

                     }
                     // 可以左滑加载（逻辑删除）
                     if (my_id == user_id || my_id==100259 || my_id==100101) {
                         h = '<div class="weui-cell weui-cell_swiped">\n' +
                             '            <div class="weui-cell__bd" style="transform: translate3d(0px, 0px, 0px);">\n' +
                             '                <ul>\n' +
                             '                    <li class="news-item" data-punch="' + punch_id + '" style="overflow:hidden;">\n' +
                             '                        <div class="new-item__content">\n' +
                             '                            <div>\n' +
                             '                                <img src="' + header_img + '" class="news-item__header-img pictureEnlarge">\n' +
                             '                                <span class="news-item__header-text">' + nickname + '</span>\n' +
                             '                                <span style="color: #B6C1C8;display: inline-block;float: right">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div style="margin-left: 46px;">\n' +
                             '                                <p>' + content + '</p>\n' +
                             '                            </div>\n' +
                             '                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 90%">\n' +
                             voucher_ref_img_box +
                             '                            </div>\n' +
                             '                            <div class="reply_data clamp_5 reply_data_' + punch_id + '">\n' +
                             '                                <div style="margin-left: 46px;">\n' +
                             reply_data_box +
                             '                                </div>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                        <div class="news-item__horzon"></div>\n' +
                             '                        <div class="weui-flex news-item__bottom" style="float: right;display: initial;">\n' +
                             '                            <div class="weui-flex__item" style="padding-left: 50px;display: none">\n' +
                             '                                <span style="color: #B6C1C8;">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div class="weui-flex__item weui-flex" style="flex: 2;">\n' +
                             praise_box +
                             '                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" ' + replyComments + ' punch_id="' + punch_id + '" style="">\n' +
                             '                                    <i class="iconfont icon-pinglun font_color_1"></i>\n' +
                             //'                                    <span class="news-item__tail-text">回复</span>\n' +
                             '                                </button>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '\n' +
                             '\n' +
                             '                    </li>\n' +
                             '                </ul>\n' +
                             '            </div>\n' +
                             '            <div class="weui-cell__ft" style="display: inline-table">\n' +
                             '                <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout bg_red_1" punch_id="' + punch_id + '" style="display: table-cell;vertical-align: middle;" href="javascript:">删除</a>\n' +
                             '            </div>\n' +
                             '        </div>';

                     }else{
                         // 不可以左滑加载（逻辑删除）
                         h = '                <ul class="news-list">\n' +
                             '                    <li class="news-item" data-punch="' + punch_id + '" style="overflow:hidden;">\n' +
                             '                        <div class="new-item__content">\n' +
                             '                            <div>\n' +
                             '                                <img src="' + header_img + '" class="news-item__header-img pictureEnlarge">\n' +
                             '                                <span class="news-item__header-text">' + nickname + '</span>\n' +
                             '                                <span style="color: #B6C1C8;display: inline-block;float: right">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div style="margin-left: 46px;">\n' +
                             '                                <p>' + content + '</p>\n' +
                             '                            </div>\n' +
                             '                            <div class="news-item__content" style="height: auto;margin-left: 36px;width: 90%">\n' +
                             voucher_ref_img_box +
                             '                            </div>\n' +
                             '                            <div class="reply_data clamp_5 reply_data_' + punch_id + '">\n' +
                             '                                <div style="margin-left: 46px;">\n' +
                             reply_data_box +
                             '                                </div>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                        <div class="news-item__horzon"></div>\n' +
                             '                        <div class="weui-flex news-item__bottom" style="float: right;display: initial;">\n' +
                             '                            <div class="weui-flex__item" style="padding-left: 50px;display: none">\n' +
                             '                                <span style="color: #B6C1C8;">' + c_time + '</span>\n' +
                             '                            </div>\n' +
                             '                            <div class="weui-flex__item weui-flex" style="flex: 2;">\n' +
                             praise_box +
                             '                                <button href="javascript:;" class="news-item__tail-btn weui-flex__item replyComments button_sty" ' + replyComments + ' punch_id="' + punch_id + '" style="">\n' +
                             '                                    <i class="iconfont icon-pinglun font_color_1"></i>\n' +
                             '                                    <span class="news-item__tail-text">回复</span>\n' +
                             //'                                </button>\n' +
                             '                            </div>\n' +
                             '                        </div>\n' +
                             '                    </li>\n' +
                             '                </ul>\n'

                     }
                     $("#my_list").append(h);

                 }
                 //----- for 循环 end---------------------------------------------------
                 $.hideLoading();
                 loading = false;
                 setTimeout(function () {
                     $('.weui-cell_swiped').swipeout();
                 }, 1000);
             }
        }



        //回复分享
        function replyComments(punch_id) {
            console.log(String(punch_id));
            var replyComments_other_id=punch_id;
            //console.log(replyComments_other_id);
            $.modal({
                title: "回复分享",
                text: '<div class="modalTextarea_box"><textarea class="modalTextarea" id="weui-prompt-input" rows="2"></textarea></div>',
                buttons: [
                    {
                        text: "取消",
                        className: "default"
                    },
                    {
                        text: "发送",
                        onClick: function (e) {
                            //console.log(e);
                            //var name=String('{{ nickname }}');
                            //console.log(name);
                            var text = $(".modalTextarea").val();
                            //$.alert(text);
                            //console.log(text);
                            var len=text.length;
                            //console.log(len);
                            if (text == "" || text == null) {
                                $.toptip('请输入回复内容！', 'error');
                                return
                            }
                            if (text.length >100) {
                                $.hideLoading();
                                $.toptip("不能超过100字", "error");
                                $("#document_text").focus();
                                return
                            }
                            replyComments_ajax(replyComments_other_id,text);
                        }
                    }
                ]
            })
        }

        //滚动 加载 （核心）
        $(document.body).infinite().on("infinite", function() {
            if(loading) return;
            loading = true;
            if(has_next==1){
                //console.log("继续");
                $(".weui-loadmore").show();
                ajax_api_load_comments(c_num);
            }else{
                loading = false;
                $(".weui-loadmore").hide();
            }
        });

        $(document).ready(function(){
            //获取要定位元素距离浏览器顶部的距离
            var navH = $("#fixed_TOP").offset().top;
            //滚动条事件
            $(window).scroll(function(){
                //获取滚动条的滑动距离
                var scroH = $(this).scrollTop();
                //console.log(scroH);
                //滚动条的滑动距离大于等于定位元素距离浏览器顶部的距离，就固定，反之就不固定
                if(scroH>=navH){
                    $("#fixed_TOP").addClass("position_f_T_0");

                }else if(scroH<navH){
                    $("#fixed_TOP").removeClass("position_f_T_0");
                }
                //console.log(navH_2);
            });
          });
    </script>

<!--     ajax 请求数据 end------------------------------------->


	<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>

    <!--配置CSRF保护-->
     <script>
        $(".swiper-container_on_share_run").swiper({
            loop: true,
            autoplay:true
        });
    </script>
    <script>
        $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}' }
        });

        {{ WechatJSConfig|safe}}

        var qrcode_url = "http://wechat.onmytarget.cn/static/images/logo/logo.png";
        //var qrcode_url="http://wechat.onmytarget.cn/static/images/on_logo.jpeg";
        var title="{{ nickname }}  邀请你参加作息活动";
        var share_desc="On蜕变 一个好玩的平台";
        wx.ready(function() {
            //wx.hideAllNonBaseMenuItem();
            //wx.hideOptionMenu();
            wx.showMenuItems({
                menuList: ['onMenuShareAppMessage',
                           'onMenuShareTimeline'] // 要显示的菜单项，所有menu项见附录3
            });

            //分享到朋友圈
            wx.onMenuShareTimeline({
                title:title, // 分享标题
                desc: share_desc,
                link: 'http://wechat.onmytarget.cn/activity/a5a0206fb2aa4e8995263c7ab0afa1b5?usid={{ goal.user_id|default:100259 }}', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                imgUrl:qrcode_url, // 分享图标
                success: function () {
                    $.toast("分享成功");
                    // 用户确认分享后执行的回调函数
                },
                cancel: function () {
                }
             });

            //分享到朋友
            wx.onMenuShareAppMessage({
                title: title, // 分享标题
                desc: share_desc, // 分享描述
                link: 'http://wechat.onmytarget.cn/activity/a5a0206fb2aa4e8995263c7ab0afa1b5?usid={{ goal.user_id|default:100259 }}', // 分享链接
                imgUrl: qrcode_url, // 分享图标
                type: '', // 分享类型,music、video或link，不填默认为link
                dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                success: function () {
                    $.toast("分享成功");
                    // 用户确认分享后执行的回调函数
                },
                cancel: function () {
                }
            });
        })
    </script>
    <script>
        var extra_earn=Number({{ goal.extra_earn |default:'0'}});
        //extra_earn=1000;
        if(extra_earn==0){
            $(".invite_num_plus").hide();
        }else{
            $(".invite_num_plus").show();
            $("#invite_num_plus_1").text("额外");
            $("#invite_num_plus_1_1").text("+"+extra_earn);
        }

        // 切换天数显示
        var num = $(".today").attr("num").trim();
		$(".header_date").click(function () {
			// 如果不能点击，则不处理
			if($(this).hasClass("notouch")){
				return;
			}
			var old_num=num;
			num = $(this).attr("num").trim();
			$(".day-index").hide();
			$(".day-index").removeClass("fadeInRight_1");
			$(".day-index").removeClass("fadeInLeft_1");
			//console.log("以前的"+old_num);
			//console.log("现在的"+num);

			if(old_num==num){
			    //console.log("不滑")
            }else if(num >old_num){

			    //$(".dayindex_" + old_num).addClass("fadeInLeft_1_hide");
			    //$(".dayindex_" + old_num).hide(1000);
			    $(".dayindex_" + num).addClass("fadeInRight_1");
			    //console.log("右滑")
            }else if(num<old_num){

			    //$(".dayindex_" + old_num).addClass("fadeInRight_1_hide");
			    //$(".dayindex_" + old_num).hide(1000);
			    $(".dayindex_" + num).addClass("fadeInLeft_1");
			    //console.log("左滑")
            }

			//console.log(num);
			$(".header_date.active").removeClass("active");
			$(this).addClass("active");
			//$(".datespanel").hide();

            //$(".day-index").removeClass("fadeInRight_1_hide");
			//$(".day-index").removeClass("fadeInLeft_1_hide");
			$(".dayindex_" + num).show();
		});
    </script>
    <script>
        $(function() {
            var swiper_1 = new Swiper('.swiper-container_1', {
                autoplay: false,
                loop: false,
                initialSlide: 100
            });
            //添加 微信 群
            $("#qqGroupCode").click(function () {
                $(".qqGroupCode_box").css("opacity", "1");
                $(".qqGroupCode_box").show();
                $(".mask_on").show();
                $("body").addClass("popup-open");
            });

            //打卡说明
            $("#activityDescription_but").click(function () {
                $(".activityDescription_box").show();
                $(".mask_on").show();
                $("body").addClass("popup-open");
            });

            // 活动规则说明 弹窗
            $(".rule_box_div").click(function () {
                $(".activityDescription_box").show();
                $(".mask_on").show();
                $("body").addClass("popup-open");
            });


            //押金弹窗
            /*
            $("#detailed_box_text_but").click(function () {
                //$(".detailed_box_text").show();
                $(".mask_on").show();
                $("body").addClass("popup-open");
            });
            */

            //关闭弹窗
            $(".mask_on").click(function () {
                $(".activityDescription_box").hide();
                $(".detailed_box_text").hide();
                $(".qqGroupCode_box").hide();
                $(this).hide();
                $("body").removeClass("popup-open");
            });

            $(".mask_on__1").click(function () {
                $(".qqGroupCode_box").hide();
                $(".qqGroupCode_box").css("opacity", "1");
                $(this).hide();
                $("body").removeClass("popup-open");
            });

            //关闭 弹窗
            $(".weui-popup__overlay").click(function () {
                $("body").removeClass("popup-open");
            });

        });
    </script>

    <!-- 无限模式 提出 收益  收益转余额-->
    <script>
        $(".bonus_to_balance").click(function () {
            var bonus_to_balance_num=Number($("#bonus_to_balance_num").text());
            //console.log(bonus_to_balance_num);
            console.log(extra_earn);
            var a=Number(bonus_to_balance_num)+Number(extra_earn);
            if(a<1){
                $.toast('收益需大于1元', 'cancel',function () {

                });
                return
            }
            //return
            //console.log("无限模式 提出 收益");
            var goal_id=$("#goal_id__get").html().trim();
            //console.log(goal_id);
            $.confirm({
                title: '提示',
                text: '确认要将收益转余额吗？',
                onOK: function () {
                    $.ajax({
                        type: "POST",
                        url: "/api/bonus_to_balance",
                        data:{
                            "goal":goal_id,
                            "activity_type":"0"
                        },
                        success: function (res) {
                            //console.log(res);
                            $.hideLoading();
                            if(res['status'] === 200){
                                $("#bonus_to_balance_num").text("0");
                                $.toast("提出成功",function () {
                                    window.location.reload();
                                });
                            }
                            else if(res['status'] === 404){
                                $.toast("数据异常<br/>请联系客服","cancel");
                            }else{
                                $.toast("提出失败<br/>请联系客服","cancel");
                            }
                        },
                        error:function(res){
                            //console.log(res);
                            $.hideLoading();

                        },
                        complete: function(XMLHttpRequest, textStatus) {
                            //console.log("ajax 公用");
                        }
                    });
                }
            });
        });

    </script>

    <!--   分享 操作 -->
    <script>
        //删除分享
        $('.weui-cell_swiped').swipeout();

        $("body").on("click", ".delete-swipeout", function () {
        //$('.delete-swipeout').click(function () {
            var punch_id =$(this).attr("punch_id");
            var that=$(this);
            //console.log(punch_id);
            //console.log("删除分享");
            $.confirm({
                title: '删除提示',
                text: '你确定要删除该分享吗？',
                onOK: function () {
                    //点击确认
                    $.post('/api/delete_sleep_comments',{
                        id:punch_id
                    },function (response) {
                        if(response.status == 200){
                            $.toast('删除成功！',function () {
                                that.parents('.weui-cell').remove();
                            });
                        }
                        else{
                            $.toast('删除失败<br/>请联系客服', 'cancel');
                        }
                    });
                },
                onCancel: function () {

                }
            });
        });

        //回复
        /*
        $(".replyComments").click(function () {
            var replyComments_other_id=$(this).attr("punch_id");
            //console.log(replyComments_other_id);
            $.modal({
                title: "回复分享",
                text: '<div class="modalTextarea_box"><textarea class="modalTextarea" id="weui-prompt-input" rows="2"></textarea></div>',
                buttons: [
                    {
                        text: "取消",
                        className: "default"
                    },
                    {
                        text: "发送",
                        onClick: function (e) {
                            //console.log(e);

                            //console.log(name);
                            var text = $(".modalTextarea").val();
                            //$.alert(text);
                            //console.log(text);
                            var len=text.length;
                            //console.log(len);
                            if (text == "" || text == null) {
                                $.toptip('请输入回复内容！', 'error');
                                return
                            }
                            if (text.length >100) {
                                $.hideLoading();
                                $.toptip("不能超过100字", "error");
                                $("#document_text").focus();
                                return
                            }
                            replyComments_ajax(replyComments_other_id,text);
                        }
                    }
                ]
            })
        });
        */
        // 回复 ajax

        var name=$("#nickname").val();
        //console.log(name.length);
        function replyComments_ajax(other_id,text) {
            $.showLoading();
            $(".weui-toast_content").text("回复中...");
            //console.log(other_id);
            //console.log(text);
            $.ajax({
                type: "POST",
                url: "/api/sleep_reply",
                data:{
                    "other_id":other_id,
                    "r_content":text
                },
                success: function (res) {
                    //alert(res);
                    $.hideLoading();
                    //console.log(res);
                    setTimeout(function () {
                        if(res.status=="403"){
                            $.toast("回复失败", "cancel");
                            return
                        }
                        var name=$("#nickname").val();
                        //console.log(name.length);
                        //console.log(name);
                        var a='<div style="margin-left: 46px;">' +
                            '<p class="word_break" style="color: #333333;"><span class="news-item__header-text" style="margin-left: 0;">'+name+'</span> ：<span style="color: #4a4a4a;">'+text+'</span></p>' +
                            '</div>';
                        $(".reply_data_"+other_id).append(a);
                        $.toast("回复成功",function () {

                        })
                    }, 500);
                },
                error:function(res){
                    //console.log(res);
                    $.hideLoading();
                    setTimeout(function () {
                        $.toast("错误", "cancel");
                    }, 500);
                },
                complete: function(XMLHttpRequest, textStatus) {
                    //console.log("ajax 公用");
                }
            });
        }

        $("body").on("click", ".reply_data", function () {
            //console.log("77777");
            $(this).toggleClass("clamp_5");
        });

        //点赞
        $("body").on("click", ".parise-btn", function () {
        //$(".parise-btn").click(function () {
                $(this).removeClass("button_sty");
                $(this).addClass("button_sty_yes");
                var sta =Number($(this).attr("sta"))+1;
                //alert(sta)
                var parise_btn=$(this);
                var punch_id=$(this).attr('punch_id');
                //alert(punch_id);
                $.post('/api/sleep_prise',{
                    id:punch_id
                },function (response) {
                    //console.log(response);
                    parise_btn.find(".news-item__tail-text").css("color","#B6C1C8");
                    parise_btn.css("color","rgb(182, 193, 200)");
                    parise_btn.find(".news-item__tail-text").text(""+ sta);
                    //parise_btn.css("border","1px #B6C1C8 solid");
                    parise_btn.removeClass("report-btn");
                    parise_btn.attr("disabled","disabled");
                });
            });

            //举报
            $(".report-btn").click(function () {
                var report_btn = $(this);
                //console.log(report_btn.parents(".news-item").data('punch'));
                var punch_id=$(this).attr('punch_id');
                //alert(punch_id);
                $.confirm({
                    title: '举报',
                    text: '确认举报该用户分享吗？',
                    onOK: function () {
                        $.post('/api/sleep_report',{
                            id:punch_id
                        },function (response) {
                            if(response['status'] === 200){
                                $.toast("举报成功");
                                report_btn.find(".news-item__tail-text").css("color","#B6C1C8");
                                report_btn.find(".news-item__tail-text").text("已举报");
                                report_btn.css("color","rgb(182, 193, 200)");
                                report_btn.css("border","1px #B6C1C8 solid");
                                report_btn.removeClass("report-btn");
                                report_btn.attr("disabled","disabled");
                            }
                            else{
                                $.toast("举报失败<br/>请联系客服","cancel");
                            }
                        });
                    }
                });
            });


        $('.close-swipeout').click(function () {
            $(this).parents('.weui-cell').swipeout('close')
        });

        $("#weui-prompt-input").click(function () {
            $("#weui-prompt-input").focus();
        })

    </script>

    <!-- 图片上传 改用 base64 -->
    <script>

        var file_filepath='';
        var file_refpath='';
        var file_filepatharrayObject=[];
        var file_refpatharrayObject=[];

        var img_Number=0;
        //图片转成base64 方法

        //点击 分享图标
        $("#read_comment").click(function () {
            //img_Number=0;
            $(".mask_on__container").show();
            $("#upload-popup").popup();
            $("body").addClass("popup-open");
        });

        function ImgToBase64(file, maxLen, callBack) {
            var img = new Image();
            var reader = new FileReader();//读取客户端上的文件
            reader.onload = function () {
                var url = reader.result;//读取到的文件内容.这个属性只在读取操作完成之后才有效,并且数据的格式取决于读取操作是由哪个方法发起的.所以必须使用reader.onload，
                img.src = url;//reader读取的文件内容是base64,利用这个url就能实现上传前预览图片
            };
            img.onload = function () {
                //生成比例
                var width = img.width, height = img.height;
                //计算缩放比例
                var rate = 1;
                if (width >= height) {
                    if (width > maxLen) {
                        rate = maxLen / width;
                    }
                } else {
                    if (height > maxLen) {
                        rate = maxLen / height;
                    }
                }
                img.width = width * rate;
                img.height = height * rate;
                //生成canvas
                var canvas = document.createElement("canvas");
                var ctx = canvas.getContext("2d");
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0, img.width, img.height);
                var base64 = canvas.toDataURL('image/jpeg', 0.9);
                callBack(base64);
            };
            reader.readAsDataURL(file);
        }


        $(function () {
            //input 上传图片
        /* */
            var sourceNode = document.getElementById("sourceNode");

            function random_string(len) {
                len = len || 32;
                var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';
                var maxPos = chars.length;
                var pwd = '';
                for (i = 0; i < len; i++) {
                    pwd += chars.charAt(Math.floor(Math.random() * maxPos));
                }
                return pwd;
            }

           $("input[accept='image/*']").change(function () {
               $.showLoading();
               $(".weui-toast_content").text("图片获取中...");
                var file = $(this)[0].files[0];//获取input file控件选择的文件
                ImgToBase64(file, 1080, function (base64) {
                    //console.log(base64);
                    //$("#result").attr("src",base64)
                    //预览页面上预留一个img元素，载入base64
                    //设定宽高，不然会自动按照压缩过的图片宽高设定，有可能超出预想的范围。
　　　　　　　　　　　 //直接利用ajax上传base64到服务器，完毕
                    setTimeout(function () {

                       $.ajax({
                               type: "post",
                               url: "/api/get_base",
                               data: {
                                   "activity":"sleeping/",
                                   "base64": base64
                               },
                               success: function (res) {
                                   //console.log(res);
                                   if(res.status == 200){
                                       img_Number=img_Number+1;
                                       var file_filepath__=res.file_filepath;
                                       file_filepatharrayObject.push(file_filepath__);
                                       var file_refpath__ =res.file_refpath;
                                       file_refpatharrayObject.push(file_refpath__);
                                       var random_name=random_string(16);

                                        var clonedNode = sourceNode.cloneNode(true); // 克隆节点
                                        sourceNode.parentNode.appendChild(clonedNode); // 在父节点插入克隆的节点

                                        clonedNode.setAttribute("id", "clone_" + random_name); // 修改一下id 值，避免id 重复
                                        $targetNode = $('#clone_' + random_name);

                                        clonedNode.setAttribute("class","clone_remove uploaderInput_box img___" +random_name);
                                        //var aa='float: left;width: 60px;height: 60px;background-size: cover; background: url('+file_refpath__+') center no-repeat;background-size: contain;margin-top: 20px;margin-right: 10px;';
                                        var aa='float: left;width: 26%;margin-left:5%;height: 60px;background-size: cover; background: url('+file_refpath__+')  center;background-size: cover;background-repeat: no-repeat;position: relative;margin-top: 20px;';
                                        clonedNode.setAttribute("style",aa);

                                        $targetNode.css("backgroundImage","url("+file_refpath__+")");

                                        //$targetNode.css("backgroundImage",url(file_filepath__));

                                        $targetNode.find(".news-item__content-img ").attr("src",file_refpath__);
                                        var onck="case_img_remove('"+random_name+"','"+file_filepath__+"','"+file_refpath__+"')";
                                        $targetNode.find(".img_remove").attr("onclick", onck);

                                       //console.log(file_filepath);
                                       //console.log(file_filepatharrayObject);
                                       //console.log(file_refpath);
                                       //console.log(file_refpatharrayObject);

                                       newCaseSubmit();

                                       setTimeout(function () {
                                           $.hideLoading();
                                       }, 500);
                                   }else{
                                       $.hideLoading();
                                       $.toast("获取失败！请重试上传图片", "cancel",function () {

                                       });
                                   }
                               },
                               error:function(res){
                                   $.hideLoading();
                                   $.toast("请重试上传图片", "cancel",function () {

                                   });
                                   //console.log(res)
                               }
                           });
                    }, 1000);
                });

           });

            //点击上传 结束
            //打卡
        });

        // 点击 确定 按钮
        $("#read_comment_submit").click(function () {
            $.showLoading();
            $(".weui-toast_content").text("提交中...");
            //console.log("分享");
            var document_text=$("#document_text").val();
            if(document_text=="" || document_text==undefined || document_text==null){
                $.toptip('输入分享！', 'error');
                    $("#document_text").focus();
                    $.hideLoading();
                    return
            }
             /*  输入说明 控制长度 和 特殊字符 */
            if(document_text.length==0){

            }else{
                if (document_text.length > 200) {
                    $.hideLoading();
                    $.toptip("不能超过200字", "error");
                    $("#document_text").focus();
                    return
                }

                var pattern = /^[a-zA-Z-—=+。，!！￥$#、？：“”`~@%^&*(){}【】[ ;|；,.'‘’\d\u4E00-\u9FA5]+$/i;
                $.hideLoading();

                /*
                if (pattern.test(document_text)){
                } else{
                    $.toptip('含有符号，请重试！', 'error',function () {
                        $("#document_text").focus();
                    });

                    $.hideLoading();
                    return
                }

                */

            }
            read_comment_submit(document_text)
        });

        Array.prototype.indexOf = function(val) {
            for (var i = 0; i < this.length; i++) {
                if (this[i] == val) return i;
            }
            return -1;
        };

        Array.prototype.remove = function(val) {
            var index = this.indexOf(val);
            if (index > -1) {
                this.splice(index, 1);
            }
        };

        function newCaseSubmit() {
            //console.log(file_refpatharrayObject.length);
            var len=file_refpatharrayObject.length;
            if (len < 3){
                $(".uploaderInput_input").css("display","block");
            }else{
                $(".uploaderInput_input").hide();
            }
            //console.log(file_refpatharrayObject);

            file_filepath = file_filepatharrayObject.join(",");
            file_refpath = file_refpatharrayObject.join(",");

            //console.log(file_filepath);
            //console.log(file_refpath);
            $.hideLoading();
        }


        //点击移除图片

        //移除 图片
        function case_img_remove(uid,file_filepath__,file_refpath__) {
            file_filepatharrayObject.remove(file_filepath__);
            file_refpatharrayObject.remove(file_refpath__);
            //console.log(file_refpatharrayObject);
            //console.log(file_filepatharrayObject);
            newCaseSubmit();
            $(".img___"+uid).detach();
        }

        function read_comment_submit(text) {
            //console.log(text);
            //console.log(file_filepath);
            //console.log(file_refpath);
            var content =text;
            $.ajax({
                type: "post",
                url: "/api/comment_sleep",
                async: true,
                data: {
                    "content":content,
                    "voucher_store":"",
                    "voucher_ref":file_refpath
                },
                success: function (result) {
                    //console.log(result);
                    $.hideLoading();
                    if(result.status== 200){
                        $.toast("分享成功", function () {
                            $("body").removeClass("popup-open");
                            $(".mask_on__container").hide();
                            $.closePopup();
                            $("body").removeClass("popup-open");
                            window.location.reload();

                        });
                    }else if(result.status== 401){
                        $.toast("分享失败", "cancel");
                        window.location.reload();
                    }

                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    //console.log("ajax 出错");
                    //$("body").removeClass("popup-open");
                    $.hideLoading();
                    $.toast("分享失败", "cancel",function () {
                        $("body").removeClass("popup-open");
                        $(".mask_on__container").hide();
                        $.closePopup();
                        $("body").removeClass("popup-open");
                        window.location.reload();
                    });
                },
                complete: function(XMLHttpRequest, textStatus) {
                    //console.log("ajax 公用");
                }
            })

        }

        //图片放大
        $("body").on("click", ".pictureEnlarge", function () {
            console.log("图片放大");
            var src_img = $(this).attr("sta_url");
            if(src_img==undefined || src_img=="" || src_img==null){
                //console.log("console.log(src_img);");
                //console.log(src_img);
                src_img = $(this).attr("src");
            }
            var ImageData_ = $.photoBrowser({
                items: [
                    {
                        image: src_img,
                        caption: ""
                    }
                ]
            });
            ImageData_.open();
        });
    </script>

    <script>
        var c = checkNum();

        function checkNum(){
            var random = getRandom(1, 51);
            //console.log(random);
            return random;
        }

        function getRandom(min, max){
            var r = Math.random() * (max - min);
            var re = Math.round(r + min);
            re = Math.max(Math.min(re, max), min);
            return re;
        }

        $(function () {
            var colHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
            var colWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
            $(".two").width(colWidth*0.75*0.9);
            $(".two").height(colWidth*0.75*1.55);

            //console.log(c);
            $("#goal_img").attr("src", "/static/images/goal/" + c + "@2x.png");
            $("#goal_img").css("opacity", 1);
            var da__ = new Date ();
            var now_d = da__.getDate();
            var now_y=da__.getFullYear();
            var now_m=da__.getMonth();
            var now_m_y=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec");
            now_m=now_m_y[now_m];
            //now_m =(now_m<10 ? "0"+now_m:now_m);
            $(".now_d").text(now_d);
            $(".now_m").text(now_m);
            $(".now_y").text(now_y);
        });

        $(".cardCffect_click").click(function () {
            return
            $(".cardCffect_box").popup();
            //$(".mask_on_1").show();
            setTimeout(function () {
                $("body").addClass("popup-open");
                $(".two").css("transform","rotateY(180deg)");
                $(".container").css("transform","rotateY(180deg)");
                $(".two").css("opacity","1");
                //$(".two").css("zIndex","99999999999999999999999");
                $(".two").show();
                $(".one").css("opacity","0");
                $(".click_col").css("opacity","1");

            }, 100);

            setTimeout(function () {
                $(".mask_on_1").show()
            }, 500);


        });


        $(".click_col").click(function () {
            $("#upload-popup_1").hide();
            $.closePopup();
            $(".two").hide();
            $(".two").css("opacity","0");
            $(".container").css("transform","rotateY(0deg)");
            //$("#upload-popup_1 .container").css("backgroundColor","rgba(0,0,0,0)");
            $(".mask_on_1").hide();
            //$(".one").css("opacity","1");
            //$(".two").css("zIndex","106");
            $("body").removeClass("popup-open");
            setTimeout(function(){
                window.location.reload();
            },500);

        });


        // js 判断时间段
        nowTime();
        function nowTime() {
            //console.log("js 判断 时间段");
            var e = new Date ();
            var H=Number(e.getHours());
            var m=e.getMinutes();
            //console.log(H);
            //console.log(m);
            if(24> H && H>= 21){
                //console.log("21点--24点 可以打 睡眠模式 睡眠卡");
                $(".SignIn").parent().show();
            }else if(5<= H && H<8){
                //console.log("5点--8点 可以打 早起卡");
                $(".SignIn").parent().show();
            }else{
                //console.log("不是打卡 时间");
                $(".SignIn").parent().hide();
            }
        }

        //打卡
        //console.log(c)
        $(".SignIn").one("click",function(){
            $.showLoading();
            $(".weui-toast_content").text("打卡中...");
            console.log(c);
            var sleep_type=$("#goal_sleep_type").html().trim();
            var goal_id=$("#goal_id__get").html().trim();
            //console.log(sleep_type);
            //console.log(goal_id);
            console.log(c);

            $.ajax({
                type: "POST",
                url: "/api/sleeping_sleep",
                data:{
                    "goal":goal_id,
                    "sleep_type":sleep_type,
                    "random":c
                },
                success: function (response) {
                    console.log(response);
                    $.hideLoading();
                    if(response['status'] === 403){
                        $.toast("本次打卡失败<br/>请联系客服", 'cancel',function () {
                            //window.location.reload();
                        });
                        //setTimeout('window.location.href = \'/activity/index\';', 2000)
                    }
                    else if(response['status'] === 200){
                        $.toast("打卡成功!",function () {
                            $(".cardCffect_box").popup();
                            //$(".mask_on_1").show();
                            setTimeout(function () {
                                $("body").addClass("popup-open");
                                $(".two").css("transform","rotateY(180deg)");
                                $(".container").css("transform","rotateY(180deg)");
                                $(".two").css("opacity","1");
                                //$(".two").css("zIndex","99999999999999999999999");
                                $(".two").show();
                                $(".one").css("opacity","0");
                                $(".click_col").css("opacity","1");

                            }, 100);
                            setTimeout(function () {
                                $(".mask_on_1").show()
                            }, 500);
                        });
                        //setTimeout('window.location.href = \'/activity/index\';', 2000)
                    }else if(response['status'] === 201){
                        $.toast("打卡成功!",function () {
                            $(".cardCffect_box").popup();
                            //$(".mask_on_1").show();
                            setTimeout(function () {
                                $("body").addClass("popup-open");
                                $(".two").css("transform","rotateY(180deg)");
                                $(".container").css("transform","rotateY(180deg)");
                                $(".two").css("opacity","1");
                                //$(".two").css("zIndex","99999999999999999999999");
                                $(".two").show();
                                $(".one").css("opacity","0");
                                $(".click_col").css("opacity","1");
                            }, 100);

                            setTimeout(function () {
                                $(".mask_on_1").show()
                            }, 500);
                        });
                        //setTimeout('window.location.href = \'/activity/index\';', 2000)
                    }else {
                        $.toast("数据异常<br/>请联系客服", 'cancel',function () {
                            //window.location.reload();
                        });
                    }
                },
                error:function(response){
                    $.hideLoading();
                    $.toast("打卡失败<br/>请联系客服", 'cancel',function () {
                        //window.location.reload();
                    });

                }
            });
        });

        /*
        function SignIn() {
            console.log(c);
            var sleep_type=$("#goal_sleep_type").html().trim();
            var goal_id=$("#goal_id__get").html().trim();
            //console.log(sleep_type);
            //console.log(goal_id);
            console.log(c);

            $.ajax({
                type: "POST",
                url: "/api/sleeping_sleep",
                data:{
                    "goal":goal_id,
                    "sleep_type":sleep_type,
                    "random":c,
                },
                success: function (response) {
                    //console.log(response);
                    if(response['status'] === 403){
                        $.hideLoading();
                        $.toast("本次打卡失败<br/>请联系客服", 'cancel',function () {
                            //window.location.reload();
                        });
                        //setTimeout('window.location.href = \'/activity/index\';', 2000)
                    }
                    else if(response['status'] === 200){
                        $.hideLoading();
                        $.toast("打卡成功!",function () {

                            $(".cardCffect_box").popup();
                            //$(".mask_on_1").show();
                            setTimeout(function () {
                                $("body").addClass("popup-open");
                                $(".two").css("transform","rotateY(180deg)");
                                $(".container").css("transform","rotateY(180deg)");
                                $(".two").css("opacity","1");
                                //$(".two").css("zIndex","99999999999999999999999");
                                $(".two").show();
                                $(".one").css("opacity","0");
                                $(".click_col").css("opacity","1");

                            }, 100);

                            setTimeout(function () {
                                $(".mask_on_1").show()
                            }, 500);
                        });
                        //setTimeout('window.location.href = \'/activity/index\';', 2000)
                    }else if(response['status'] === 201){
                        $.hideLoading();
                        $.toast("打卡成功!",function () {
                            $(".cardCffect_box").popup();
                            //$(".mask_on_1").show();
                            setTimeout(function () {
                                $("body").addClass("popup-open");
                                $(".two").css("transform","rotateY(180deg)");
                                $(".container").css("transform","rotateY(180deg)");
                                $(".two").css("opacity","1");
                                //$(".two").css("zIndex","99999999999999999999999");
                                $(".two").show();
                                $(".one").css("opacity","0");
                                $(".click_col").css("opacity","1");

                            }, 100);

                            setTimeout(function () {
                                $(".mask_on_1").show()
                            }, 500);
                        });
                        //setTimeout('window.location.href = \'/activity/index\';', 2000)
                    }else {
                        $.hideLoading();
                        $.toast("数据异常<br/>请联系客服", 'cancel',function () {
                            //window.location.reload();
                        });
                    }
                },
                error:function(response){
                    $.hideLoading();
                    $.toast("打卡失败<br/>请联系客服", 'cancel',function () {
                        //window.location.reload();
                    });

                }
            });

        }
        */
    </script>



</body>

</html>